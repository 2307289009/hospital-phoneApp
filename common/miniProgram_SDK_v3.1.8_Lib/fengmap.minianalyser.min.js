// /**Released Version v3.1.8,BUILD 219,Time 1732862084489. Fengmap Mini SDK  es6, see: https://www.fengmap.com for details**/
Object.defineProperty(exports,"t",{value:!0});var N={VERSION:"v3.1.8",BUILD:219};let t={NONE:0,EXTRUDE_MARKER:2,FM3DTILE_LAYER:4,IMAGE_MARKER:8,LOCATION_MARKER:16,POLYGON_MARKER:32,TEXT_MARKER:64,LINE_MARKER:128,LINE3D_MARKER:256,HEAT_MAP_MARKER:512,EXTENT:1024,EXTERNAL_MODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,DYNAMIC_MODEL_MARKER:32768,DOM_MARKER:65536,SPHERE_MARKER:1<<17,CAD_LAYER:1<<18,EXTENT_LAYER:1<<20,EXTERNAL_MODEL_LAYER:1<<21,MODEL_LAYER:1<<22,FACILITY_LAYER:1<<23,LABEL_LAYER:1<<24,MARKER_GROUP:1<<25,FLOW_LINE_LAYER:1<<27,FLOW_LINE_MARKER:1<<27,FIRE_MARKER:1<<28,WALL_MARKER:1<<29,TUBE_MARKER:1<<30},f=(t.LAYER_NODE_TYPE=new Map,t.LAYER_NODE_TYPE.set(t.EXTENT_LAYER,t.EXTENT),t.LAYER_NODE_TYPE.set(t.EXTERNAL_MODEL_LAYER,t.EXTERNAL_MODEL),t.LAYER_NODE_TYPE.set(t.MODEL_LAYER,t.MODEL),t.LAYER_NODE_TYPE.set(t.FACILITY_LAYER,t.FACILITY),t.LAYER_NODE_TYPE.set(t.LABEL_LAYER,t.LABEL),t.LAYER_NODE_TYPE.set(t.DOM_MARKER,t.DOM_MARKER),t.LAYER_NODE_TYPE.set(t.DYNAMIC_MODEL_MARKER,t.DYNAMIC_MODEL_MARKER),t.LAYER_NODE_TYPE.set(t.EXTRUDE_MARKER,t.EXTRUDE_MARKER),t.LAYER_NODE_TYPE.set(t.HEAT_MAP_MARKER,t.HEAT_MAP_MARKER),t.LAYER_NODE_TYPE.set(t.LINE_MARKER,t.LINE_MARKER),t.LAYER_NODE_TYPE.set(t.LOCATION_MARKER,t.LOCATION_MARKER),t.LAYER_NODE_TYPE.set(t.POLYGON_MARKER,t.POLYGON_MARKER),t.LAYER_NODE_TYPE.set(t.TEXT_MARKER,t.TEXT_MARKER),t.LAYER_NODE_TYPE.set(t.IMAGE_MARKER,t.IMAGE_MARKER),t.LAYER_NODE_TYPE.set(t.FLOW_LINE_LAYER,t.FLOW_LINE_MARKER),t.LAYER_NODE_TYPE.set(t.FIRE_MARKER,t.FIRE_MARKER),t.LAYER_NODE_TYPE.set(t.WALL_MARKER,t.WALL_MARKER),t.LAYER_NODE_TYPE.set(t.TUBE_MARKER,t.TUBE_MARKER),t.LAYER_NODE_TYPE.set(t.LINE3D_MARKER,t.LINE3D_MARKER),t.LAYER_NODE_TYPE.set(t.SPHERE_MARKER,t.SPHERE_MARKER),t.LAYER_NODE_TYPE.set(t.CAD_LAYER,t.CAD_LAYER),{MODULE_SHORTEST:1,MODULE_BEST:2}),v={PRIORITY_DEFAULT:1,PRIORITY_LIFTFIRST:2,PRIORITY_ESCALATORFIRST:3,PRIORITY_STAIRFIRST:4,PRIORITY_LIFTONLY:5,PRIORITY_ESCALATORONLY:6,PRIORITY_STAIRONLY:7,PRIORITY_ACCESSIBLEONLY:8,PRIORITY_LIFTFIRST1:9,PRIORITY_ESCALATORFIRST1:10,PRIORITY_STAIRFIRST1:11},G={ROUTE_SUCCESS:1,ROUTE_FAILED_NO_DATA_START:2,ROUTE_FAILED_NO_DATA_DEST:3,ROUTE_FAILED_CANNOT_ARRIVE:4,ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR:5,ROUTE_FAILED_NO_START_ARRIVAL:6,ROUTE_FAILED_NO_DEST_ARRIVAL:7,ROUTE_FAILED_OUTLINE:8,ROUTE_FAILED_ENTRANCE:9},n={ZH:"zh",EN:"en"},T={TRANSFER_LIFT:1,TRANSFER_STAIR:2,TRANSFER_ESCALATOR:3,TRANSFER_ACCESSIBLE:4,TRANSFER_RAMP:5,TRANSFER_ENTRANCE:6},A={NONE_RODE_NETWORK:1,NONE_WALK_RODE_NETWORK:2,NONE_DRIVE_RODE_NETWORK:4};class I{constructor(t,e){this.o=t,this.u=e}}Object.assign(I.prototype,{p(t){return!1},v(t,e){}});class L extends I{constructor(t,e){super(t,e)}}Object.assign(L.prototype,{p(t){return this.u==t.fid}});class S extends I{constructor(t,e){super(t,e),this._=null,"object"==typeof this.u?(this.O=this.u.text,this.j=this.u.fuzzy,this.k=void 0===this.u.matchCase||this.u.matchCase):(this.O=this.u,this.k=!0)}}Object.assign(S.prototype,{p(t){let e=null;return e="ename"===this._?t.ename:t.name,this.O=this.O.trim(),!!e&&(this.j?(t=this.O.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),t=this.O.replace(/%rn%/g,".*"),new RegExp(t,this.k?"":"i").test(e&&e.replace(/%rn%/g,".*"))):this.k?e&&this.O===e:e&&this.O.toLowerCase()===e.toLowerCase())}});class W extends S{constructor(t,e){super(t,e),this._="name"}}class U extends S{constructor(t,e){super(t,e),this._="ename"}}class q extends I{constructor(t,e){super(t),this.u=Array.isArray(e)?e:[e]}}Object.assign(q.prototype,{p(t){return-1!=this.u.indexOf(t.type)}});class Y extends I{constructor(t,e){super(t,e),"object"==typeof this.u?(this.O=this.u.text,this.j=void 0===this.u.fuzzy||this.u.fuzzy,this.k=void 0===this.u.matchCase||this.u.matchCase):(this.O=this.u,this.j=!0,this.k=!0)}}Object.assign(Y.prototype,{p(t){var e=null,i=null,e=t.name,i=t.ename;return this.O=this.O.trim(),this.j?(t=this.O.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),t=this.O.replace(/%rn%/g,".*"),(t=new RegExp(t,this.k?"":"i")).test(e&&e.replace(/%rn%/g,".*"))||t.test(i&&i.replace(/%rn%/g,".*"))):this.k?e&&this.O===e||i&&this.O===i:e&&this.O.toLowerCase()===e.toLowerCase()||i&&this.O.toLowerCase()===i.toLowerCase()}});let b={NONE:0,POINT:1,LINE:2,POLYGON:4,MULTIPOINT:8,MULTILINE:16,MULTIPOLYGON:32,GROUP:64,EXTENT:1024,EXTERNALMODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,EXTENTGROUP:1<<20,EXTERNALMODELGROUP:1<<21,MODELGROUP:1<<22,FACILITYGROUP:1<<23,LABELGROUP:1<<24},X=(Object.freeze(b),{triangulate:function(o,h,a){a=a||2;var u=h&&h.length,f=u?h[0]*a:o.length;let c=z(o,0,f,a,!0);var d=[];if(c&&c.next!==c.prev){let e,i,r,n,s,l,t;if(u&&(c=et(o,h,c,a)),o.length>80*a){e=r=o[0],i=n=o[1];for(let t=a;t<f;t+=a)s=o[t],l=o[t+1],s<e&&(e=s),l<i&&(i=l),s>r&&(r=s),l>n&&(n=l);t=0!==(t=Math.max(r-e,n-i))?1/t:0}Q(c,d,a,e,i,t)}return d}});function z(t,e,i,r,n){let s,l;if(n===0<Ot(t,e,i,r))for(s=e;s<i;s+=r)l=_t(s,t[s],t[s+1],l);else for(s=i-r;s>=e;s-=r)l=_t(s,t[s],t[s+1],l);return l&&ct(l,l.next)&&(wt(l),l=l.next),l}function H(t,e){if(!t)return t;e=e||t;let i=t,r;do{if(r=!1,i.steiner||!ct(i,i.next)&&0!==y(i.prev,i,i.next))i=i.next;else{if(wt(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function Q(r,n,s,l,o,h,a){if(r){!a&&h&&lt(r,l,o,h);let t=r,e,i;for(;r.prev!==r.next;)if(e=r.prev,i=r.next,h?J(r,l,o,h):K(r))n.push(e.i/s),n.push(r.i/s),n.push(i.i/s),wt(r),r=i.next,t=i.next;else if((r=i)===t){a?1===a?Q(r=$(H(r),n,s),n,s,l,o,h,2):2===a&&tt(r,n,s,l,o,h):Q(H(r),n,s,l,o,h,1);break}}}function K(t){var e=t.prev,i=t,r=t.next;if(0<=y(e,i,r))return!1;let n=t.next.next;for(;n!==t.prev;){if(ut(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&0<=y(n.prev,n,n.next))return!1;n=n.next}return!0}function J(t,e,i,r){var n=t.prev,s=t,l=t.next;if(0<=y(n,s,l))return!1;var o=(n.x<s.x?n.x<l.x?n:l:s.x<l.x?s:l).x,h=(n.y<s.y?n.y<l.y?n:l:s.y<l.y?s:l).y,a=(n.x>s.x?n.x>l.x?n:l:s.x>l.x?s:l).x,u=(n.y>s.y?n.y>l.y?n:l:s.y>l.y?s:l).y,f=ht(o,h,e,i,r),c=ht(a,u,e,i,r);let d=t.prevZ,p=t.nextZ;for(;d&&d.z>=f&&p&&p.z<=c;){if(d!==t.prev&&d!==t.next&&ut(n.x,n.y,s.x,s.y,l.x,l.y,d.x,d.y)&&0<=y(d.prev,d,d.next))return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&ut(n.x,n.y,s.x,s.y,l.x,l.y,p.x,p.y)&&0<=y(p.prev,p,p.next))return!1;p=p.nextZ}for(;d&&d.z>=f;){if(d!==t.prev&&d!==t.next&&ut(n.x,n.y,s.x,s.y,l.x,l.y,d.x,d.y)&&0<=y(d.prev,d,d.next))return!1;d=d.prevZ}for(;p&&p.z<=c;){if(p!==t.prev&&p!==t.next&&ut(n.x,n.y,s.x,s.y,l.x,l.y,p.x,p.y)&&0<=y(p.prev,p,p.next))return!1;p=p.nextZ}return!0}function $(t,e,i){let r=t;do{var n=r.prev,s=r.next.next;!ct(n,s)&&dt(n,r,r.next,s)&&yt(n,s)&&yt(s,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(s.i/i),wt(r),wt(r.next),r=t=s),r=r.next}while(r!==t);return H(r)}function tt(t,e,i,r,n,s){let l=t;do{let t=l.next.next;for(;t!==l.prev;){var o;if(l.i!==t.i&&ft(l,t))return o=mt(l,t),l=H(l,l.next),o=H(o,o.next),Q(l,e,i,r,n,s),void Q(o,e,i,r,n,s);t=t.next}}while((l=l.next)!==t)}function et(t,e,i,r){var n=[];let s,l,o,h,a;for(s=0,l=e.length;s<l;s++)o=e[s]*r,h=s<l-1?e[s+1]*r:t.length,(a=z(t,o,h,r,!1))===a.next&&(a.steiner=!0),n.push(at(a));for(n.sort(it),s=0;s<n.length;s++)rt(n[s],i),i=H(i,i.next);return i}function it(t,e){return t.x-e.x}function rt(t,e){(e=nt(t,e))&&(t=mt(e,t),H(e,e.next),H(t,t.next))}function nt(i,t){let r=t;var n=i.x,s=i.y;let l=-1/0,o;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var e=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=n&&e>l){if((l=e)===n){if(s===r.y)return r;if(s===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}}while((r=r.next)!==t);if(!o)return null;if(n!==l){var h=o,a=o.x,u=o.y;let t=1/0,e;for(r=o;n>=r.x&&r.x>=a&&n!==r.x&&ut(s<u?n:l,s,a,u,s<u?l:n,s,r.x,r.y)&&(e=Math.abs(s-r.y)/(n-r.x),yt(r,i))&&(e<t||e===t&&(r.x>o.x||r.x===o.x&&st(o,r)))&&(o=r,t=e),(r=r.next)!==h;);}return o}function st(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function lt(t,e,i,r){let n=t;for(;null===n.z&&(n.z=ht(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,(n=n.next)!==t;);n.prevZ.nextZ=null,n.prevZ=null,ot(n)}function ot(t){let e,i,r,n,s,l,o,h,a=1;do{for(i=t,t=null,s=null,l=0;i;){for(l++,r=i,o=0,e=0;e<a&&(o++,r=r.nextZ);e++);for(h=a;0<o||0<h&&r;)0!==o&&(0===h||!r||i.z<=r.z)?(i=(n=i).nextZ,o--):(r=(n=r).nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;i=r}}while(s.nextZ=null,a*=2,1<l);return t}function ht(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function at(t){let e=t,i=t;for(;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),(e=e.next)!==t;);return i}function ut(t,e,i,r,n,s,l,o){return 0<=(n-l)*(e-o)-(t-l)*(s-o)&&0<=(t-l)*(r-o)-(i-l)*(e-o)&&0<=(i-l)*(s-o)-(n-l)*(r-o)}function ft(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!bt(t,e)&&(yt(t,e)&&yt(e,t)&&gt(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||ct(t,e)&&0<y(t.prev,t,t.next)&&0<y(e.prev,e,e.next))}function y(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function ct(t,e){return t.x===e.x&&t.y===e.y}function dt(t,e,i,r){var n=vt(y(t,e,i)),s=vt(y(t,e,r)),l=vt(y(i,r,t)),o=vt(y(i,r,e));return n!==s&&l!==o||!!(0===n&&pt(t,i,e)||0===s&&pt(t,r,e)||0===l&&pt(i,t,r)||0===o&&pt(i,e,r))}function pt(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function vt(t){return 0<t?1:t<0?-1:0}function bt(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&dt(i,i.next,t,e))return!0}while((i=i.next)!==t);return!1}function yt(t,e){return y(t.prev,t,t.next)<0?0<=y(t,e,t.next)&&0<=y(t,t.prev,e):y(t,e,t.prev)<0||y(t,t.next,e)<0}function gt(t,e){let i=t,r=!1;for(var n=(t.x+e.x)/2,s=(t.y+e.y)/2;i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),(i=i.next)!==t;);return r}function mt(t,e){var i=new xt(t.i,t.x,t.y),r=new xt(e.i,e.x,e.y),n=t.next,s=e.prev;return(t.next=e).prev=t,(i.next=n).prev=i,(r.next=i).prev=r,(s.next=r).prev=s,r}function _t(t,e,i,r){t=new xt(t,e,i);return r?(t.next=r.next,(t.prev=r).next.prev=t,r.next=t):(t.prev=t).next=t,t}function wt(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function xt(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ot(i,r,n,s){let l=0;for(let t=r,e=n-s;t<n;t+=s)l+=(i[e]-i[t])*(i[t+1]+i[e+1]),e=t;return l}let jt={area:function(i){var r=i.length;let n=0;for(let t=r-1,e=0;e<r;t=e++)n+=i[t].x*i[e].y-i[e].x*i[t].y;return.5*n},isClockWise:function(t){return jt.area(t)<0},triangulateShape:function(t,e){var i=[],r=[],n=[];Et(t),Mt(i,t);let s=t.length;e.forEach(Et);for(let t=0;t<e.length;t++)r.push(s),s+=e[t].length,Mt(i,e[t]);var l=X.triangulate(i,r);for(let t=0;t<l.length;t+=3)n.push(l.slice(t,t+3));return n},triangulate:function(e){let t=[];t.push(...e[0]);var i=[];for(let t=1;t<e.length;t++){var r=[];r.push(...e[t]),i.push(r)}if(!jt.isClockWise(t)){t=t.reverse();for(let t=0,e=i.length;t<e;t++){var n=i[t];jt.isClockWise(n)&&(i[t]=n.reverse())}}return jt.triangulateShape(t,i)}};function kt(t,e){return t.x===e.x&&t.y===e.y}function Et(t){var e=t.length;2<e&&kt(t[e-1],t[0])&&t.pop()}function Mt(e,i){for(let t=0;t<i.length;t++)e.push(i[t].x),e.push(i[t].y)}for(var s=[],Nt=0;Nt<256;Nt++)s[Nt]=(Nt<16?"0":"")+Nt.toString(16);var Tt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(s[255&t]+s[t>>8&255]+s[t>>16&255]+s[t>>24&255]+"-"+s[255&e]+s[e>>8&255]+"-"+s[e>>16&15|64]+s[e>>24&255]+"-"+s[63&i|128]+s[i>>8&255]+"-"+s[i>>16&255]+s[i>>24&255]+s[255&r]+s[r>>8&255]+s[r>>16&255]+s[r>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,r,n){return r+(t-e)*(n-r)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Tt.DEG2RAD},radToDeg:function(t){return t*Tt.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,r,n){var s=Math.cos,l=Math.sin,o=s(i/2),i=l(i/2),h=s((e+r)/2),a=l((e+r)/2),u=s((e-r)/2),f=l((e-r)/2),s=s((r-e)/2),l=l((r-e)/2);"XYX"===n?t.set(o*a,i*u,i*f,o*h):"YZY"===n?t.set(i*f,o*a,i*u,o*h):"ZXZ"===n?t.set(i*u,i*f,o*a,o*h):"XZX"===n?t.set(o*a,i*l,i*s,o*h):"YXY"===n?t.set(i*s,o*a,i*l,o*h):"ZYZ"===n?t.set(i*l,i*s,o*a,o*h):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};function At(t,e,i,r){this.M=t||0,this.N=e||0,this.T=i||0,this.A=void 0!==r?r:1}Object.assign(At,{slerp:function(t,e,i,r){return i.copy(t).slerp(e,r)},slerpFlat:function(t,e,i,r,n,s,l){var o,h,a,u=i[r+0],f=i[r+1],c=i[r+2],i=i[r+3],r=n[s+0],d=n[s+1],p=n[s+2],n=n[s+3];i===n&&u===r&&f===d&&c===p||(s=1-l,o=0<=(h=u*r+f*d+c*p+i*n)?1:-1,(a=1-h*h)>Number.EPSILON&&(a=Math.sqrt(a),h=Math.atan2(a,h*o),s=Math.sin(s*h)/a,l=Math.sin(l*h)/a),u=u*s+r*(h=l*o),f=f*s+d*h,c=c*s+p*h,i=i*s+n*h,s===1-l&&(u*=a=1/Math.sqrt(u*u+f*f+c*c+i*i),f*=a,c*=a,i*=a)),t[e]=u,t[e+1]=f,t[e+2]=c,t[e+3]=i}}),Object.defineProperties(At.prototype,{x:{get:function(){return this.M},set:function(t){this.M=t,this.R()}},y:{get:function(){return this.N},set:function(t){this.N=t,this.R()}},z:{get:function(){return this.T},set:function(t){this.T=t,this.R()}},w:{get:function(){return this.A},set:function(t){this.A=t,this.R()}}}),Object.assign(At.prototype,{isQuaternion:!0,set:function(t,e,i,r){return this.M=t,this.N=e,this.T=i,this.A=r,this.R(),this},clone:function(){return new this.constructor(this.M,this.N,this.T,this.A)},copy:function(t){return this.M=t.x,this.N=t.y,this.T=t.z,this.A=t.w,this.R(),this},setFromEuler:function(t,e){var i,r,n,s,l,o,h;if(t&&t.isEuler)return l=t.M,o=t.N,i=t.T,t=t.order,s=Math.cos,h=Math.sin,r=s(l/2),n=s(o/2),s=s(i/2),l=h(l/2),o=h(o/2),h=h(i/2),"XYZ"===t?(this.M=l*n*s+r*o*h,this.N=r*o*s-l*n*h,this.T=r*n*h+l*o*s,this.A=r*n*s-l*o*h):"YXZ"===t?(this.M=l*n*s+r*o*h,this.N=r*o*s-l*n*h,this.T=r*n*h-l*o*s,this.A=r*n*s+l*o*h):"ZXY"===t?(this.M=l*n*s-r*o*h,this.N=r*o*s+l*n*h,this.T=r*n*h+l*o*s,this.A=r*n*s-l*o*h):"ZYX"===t?(this.M=l*n*s-r*o*h,this.N=r*o*s+l*n*h,this.T=r*n*h-l*o*s,this.A=r*n*s+l*o*h):"YZX"===t?(this.M=l*n*s+r*o*h,this.N=r*o*s+l*n*h,this.T=r*n*h-l*o*s,this.A=r*n*s-l*o*h):"XZY"===t&&(this.M=l*n*s-r*o*h,this.N=r*o*s-l*n*h,this.T=r*n*h+l*o*s,this.A=r*n*s+l*o*h),!1!==e&&this.R(),this;throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.")},setFromAxisAngle:function(t,e){var e=e/2,i=Math.sin(e);return this.M=t.x*i,this.N=t.y*i,this.T=t.z*i,this.A=Math.cos(e),this.R(),this},setFromRotationMatrix:function(t){var e,t=t.elements,i=t[0],r=t[4],n=t[8],s=t[1],l=t[5],o=t[9],h=t[2],a=t[6],t=t[10],u=i+l+t;return 0<u?(e=.5/Math.sqrt(u+1),this.A=.25/e,this.M=(a-o)*e,this.N=(n-h)*e,this.T=(s-r)*e):l<i&&t<i?(e=2*Math.sqrt(1+i-l-t),this.A=(a-o)/e,this.M=.25*e,this.N=(r+s)/e,this.T=(n+h)/e):t<l?(e=2*Math.sqrt(1+l-i-t),this.A=(n-h)/e,this.M=(r+s)/e,this.N=.25*e,this.T=(o+a)/e):(e=2*Math.sqrt(1+t-i-l),this.A=(s-r)/e,this.M=(n+h)/e,this.N=(o+a)/e,this.T=.25*e),this.R(),this},setFromUnitVectors:function(t,e){var i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this.M=-t.y,this.N=t.x,this.T=0):(this.M=0,this.N=-t.z,this.T=t.y)):(this.M=t.y*e.z-t.z*e.y,this.N=t.z*e.x-t.x*e.z,this.T=t.x*e.y-t.y*e.x),this.A=i,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(Tt.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var i=this.angleTo(t);return 0!==i&&(e=Math.min(1,e/i),this.slerp(t,e)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this.M*=-1,this.N*=-1,this.T*=-1,this.R(),this},dot:function(t){return this.M*t.M+this.N*t.N+this.T*t.T+this.A*t.A},lengthSq:function(){return this.M*this.M+this.N*this.N+this.T*this.T+this.A*this.A},length:function(){return Math.sqrt(this.M*this.M+this.N*this.N+this.T*this.T+this.A*this.A)},normalize:function(){var t=this.length();return 0===t?(this.M=0,this.N=0,this.T=0,this.A=1):(this.M=this.M*(t=1/t),this.N=this.N*t,this.T=this.T*t,this.A=this.A*t),this.R(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t.M,r=t.N,n=t.T,t=t.A,s=e.M,l=e.N,o=e.T,e=e.A;return this.M=i*e+t*s+r*o-n*l,this.N=r*e+t*l+n*s-i*o,this.T=n*e+t*o+i*l-r*s,this.A=t*e-i*s-r*l-n*o,this.R(),this},slerp:function(t,e){if(0!==e){if(1===e)return this.copy(t);var i,r=this.M,n=this.N,s=this.T,l=this.A,o=l*t.A+r*t.M+n*t.N+s*t.T;o<0?(this.A=-t.A,this.M=-t.M,this.N=-t.N,this.T=-t.T,o=-o):this.copy(t),1<=o?(this.A=l,this.M=r,this.N=n,this.T=s):((t=1-o*o)<=Number.EPSILON?(this.A=(i=1-e)*l+e*this.A,this.M=i*r+e*this.M,this.N=i*n+e*this.N,this.T=i*s+e*this.T,this.normalize()):(i=Math.sqrt(t),t=Math.atan2(i,o),o=Math.sin((1-e)*t)/i,e=Math.sin(e*t)/i,this.A=l*o+this.A*e,this.M=r*o+this.M*e,this.N=n*o+this.N*e,this.T=s*o+this.T*e),this.R())}return this},equals:function(t){return t.M===this.M&&t.N===this.N&&t.T===this.T&&t.A===this.A},fromArray:function(t,e){return this.M=t[e=void 0===e?0:e],this.N=t[e+1],this.T=t[e+2],this.A=t[e+3],this.R(),this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.M,t[e+1]=this.N,t[e+2]=this.T,t[e+3]=this.A,t},fromBufferAttribute:function(t,e){return this.M=t.getX(e),this.N=t.getY(e),this.T=t.getZ(e),this.A=t.getW(e),this},onChange:function(t){return this.R=t,this},R:function(){}});var Rt=new Lt,It=new At;function Lt(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}Object.assign(Lt.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(It.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(It.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,i=this.y,r=this.z,t=t.elements;return this.x=t[0]*e+t[3]*i+t[6]*r,this.y=t[1]*e+t[4]*i+t[7]*r,this.z=t[2]*e+t[5]*i+t[8]*r,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,i=this.y,r=this.z,t=t.elements,n=1/(t[3]*e+t[7]*i+t[11]*r+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*r+t[12])*n,this.y=(t[1]*e+t[5]*i+t[9]*r+t[13])*n,this.z=(t[2]*e+t[6]*i+t[10]*r+t[14])*n,this},applyQuaternion:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,l=t.z,t=t.w,o=t*e+s*r-l*i,h=t*i+l*e-n*r,a=t*r+n*i-s*e,e=-n*e-s*i-l*r;return this.x=o*t+e*-n+h*-l-a*-s,this.y=h*t+e*-s+a*-n-o*-l,this.z=a*t+e*-l+o*-s-h*-n,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,i=this.y,r=this.z,t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*r,this.y=t[1]*e+t[5]*i+t[9]*r,this.z=t[2]*e+t[6]*i+t[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,r=t.y,t=t.z,n=e.x,s=e.y,e=e.z;return this.x=r*e-t*s,this.y=t*n-i*e,this.z=i*s-r*n,this},projectOnVector:function(t){var e=t.lengthSq();return 0===e?this.set(0,0,0):(e=t.dot(this)/e,this.copy(t).multiplyScalar(e))},projectOnPlane:function(t){return Rt.copy(this).projectOnVector(t),this.sub(Rt)},reflect:function(t){return this.sub(Rt.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(t=this.dot(t)/e,Math.acos(Tt.clamp(t,-1,1)))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,t=this.z-t.z;return e*e+i*i+t*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,i){var r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});let o=1e-5,St=1e-5,Ft=.001,Pt=Math.PI/180,Gt=180/Math.PI;class Dt{constructor(){}}Object.assign(Dt.prototype,{I(){return o},L(){return Pt},S(){return Gt},F(t){return t<o&&t>-o},P(t){return t>o},G(t){return t<-o},D(t,e,i){e=(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y);return Math.abs(e)<o?0:e},distanceOfTwoPoints(t,e){return t&&e?Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)):Number.NaN},distance(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},isPolygonContainPoint(r,n){let s=0;for(let i=0;i<r.length;i++){var l=r[i].x,o=r[i].y;let t=0,e=0;if(e=(i<r.length-1?(t=r[i+1].x,r[i+1]):(t=r[0].x,r[0])).y,l===n.x&&o===n.y||t===n.x&&e===n.y)return!0;if(e!==o){var h=l+(n.y-o)*(t-l)/(e-o);if(h===n.x)return!0;l!==t?h<=Math.max(l,t)&&h>=Math.min(l,t)&&h>n.x&&h!==l&&(h===t&&0<(o-n.y)*(e-n.y)?s+=2:s++):h<=Math.max(l,t)&&h>=Math.min(l,t)&&h>n.x&&(h===t&&0<(o-n.y)*(e-n.y)?s+=2:s++)}}return 0<s%2},isPolygonContainPoint2(e,i){var r=e.length;if(r<3)return!1;let n=r-1,s=!1,l=0;for(let t=0;t<r;t++){var o=e[t],h=e[n];o.y>i.y!=h.y>i.y&&i.x<(h.x-o.x)*(i.y-o.y)/(h.y-o.y)+o.x&&(s=!s,o.y>h.y?l++:l--),n=t}return 0!=l},isPolygonInPolygon(t,e){var i=Object.assign([],t),r=Object.assign([],e);i.push(i[0]),r.push(r[0]);for(let t=0;t<i.length-1;t++){var n=i[t];if(!this.isPolygonContainPoint(r,n)&&!this.isPolygonContainPoint2(r,n))return!1}for(let e=0;e<i.length-1;e++)for(let t=0;t<r.length-1;t++)if(this.V(i[e],i[e+1],r[t],r[t+1]).isintersect&&!this.B(r[t],r[t+1],i[e])&&!this.B(r[t],r[t+1],i[e+1]))return!1;return!0},Z(t,e,i,r){return!(Math.max(t.x,e.x)<Math.min(i.x,r.x)||Math.max(t.y,e.y)<Math.min(i.y,r.y)||Math.max(i.x,r.x)<Math.min(t.x,e.x)||Math.max(i.y,r.y)<Math.min(t.y,e.y))},C(t,e,i,r){return!(Math.max(t.x,e.x)<Math.min(i.x,r.x)||Math.max(t.y,e.y)<Math.min(i.y,r.y)||Math.max(i.x,r.x)<Math.min(t.x,e.x)||Math.max(i.y,r.y)<Math.min(t.y,e.y)||0===this.D(i,e,t)&&0===this.D(e,r,t)||this.D(i,e,t)*this.D(e,r,t)<0||this.D(t,r,i)*this.D(r,e,i)<0)},W(t,e,i){return!(t.x<e.x||t.y<e.y||t.x>i.x||i.y<t.y)},U(t,e,i){var r=Math.min(e.x,i.x),n=Math.max(e.x,i.x),s=Math.min(e.y,i.y),e=Math.max(e.y,i.y);return!(t.x<r||t.x>n||t.y<s||t.y>e)},Y(t,e,i){var r=Math.min(i.x,e.x),n=Math.max(i.x,e.x),s=Math.min(i.y,e.y),i=Math.max(i.y,e.y);return!(t.x<r||t.x>n||t.y<s||t.y>i)},X(e,i,r){let n=!1;var s,l;for(let t=0;t<r;t++)s=i[t],l=i[(t+1)%r],(s.y<e.y&&l.y>=e.y||l.y<e.y&&s.y>=e.y)&&(s.x<=e.x||l.x<=e.x)&&s.x+(e.y-s.y)/(l.y-s.y)*(l.x-s.x)<e.x&&(n=!n);return n},H(t,e,i){return(t.x-e.x)*(i.y-e.y)==(i.x-e.x)*(t.y-e.y)&&Math.min(e.x,i.x)<=t.x&&t.x<=Math.max(e.x,i.x)&&Math.min(e.y,i.y)<=t.y&&t.y<=Math.max(e.y,i.y)},K(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},J(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},$(t,e,i){let r;var n=e.x,e=e.y,s=i.x,i=i.y,l=t.x,t=t.y,o=s-n,h=i-e,a=o*o+h*h,u=l-n,f=t-e,c=u*u+f*f;return this.F(a)?r=this.F(c)?0:c:(h=(a=o/(o=Math.sqrt(a)))*u+(u=h/o)*f,r=this.P(h)?this.G(h-o)?(f=l-(n+h*a))*f+(o=t-(e+h*u))*o:(n=l-s)*n+(a=t-i)*a:c,this.F(r)?0:r)},tt(t,e,i,r){let n;var s=e.x,l=e.y,o=i.x,h=i.y,a=t.x,t=t.y,u=o-s,f=h-l,c=Math.sqrt(u*u+f*f),d=a-s,p=t-l,v=Math.sqrt(d*d+p*p);return n=!this.F(c)&&(f=(u=u/c)*d+(d=f/c)*p,this.P(f))?this.G(f-c)?(c=a-(p=s+f*u),u=t-(s=l+f*d),l=Math.sqrt(c*c+u*u),r.x=p,r.y=s,l):(f=a-o,d=t-h,c=Math.sqrt(f*f+d*d),r.x=i.x,r.y=i.y,c):(r.x=e.x,r.y=e.y,v),this.F(n)?0:n},et(e,i){let r=0,n=0,s=0;for(let t=0;t<i;t++){var l=e[t],o=e[(t+1)%i],h=(l.x*o.y-l.y*o.x)/2;r+=h,n+=h*(l.x+o.x)/3,s+=h*(l.y+o.y)/3}return n/=r,s/=r,{x:n,y:s}},it(e){var i=jt.triangulate([e]);let r=0,n=0,s=0;for(let t=0;t<i.length;t++){var l=e[i[t][0]],o=e[i[t][1]],h=e[i[t][2]],a={x:o.x-l.x,y:o.y-l.y},u={x:h.x-l.x,y:h.y-l.y},u=(a.x*u.y-u.x*a.y)/2,a=(r+=u,(l.x+o.x+h.x)/3);n+=a*u,s+=(l.y+o.y+h.y)/3*u}return{x:n/r,y:s/r}},rt(e,i){if(i<3)return 0;let r=0;for(let t=0;t<i;++t){var n=e[t],s=e[(t+1)%i];r+=n.x*s.y-n.y*s.x}return Math.abs(r/2)},nt(t,e,i,r,n){var s;return this.C(t,e,i,r)?(s=(r.x-i.x)*(t.y-e.y)-(e.x-t.x)*(i.y-r.y),n.x=((t.y-i.y)*(e.x-t.x)*(r.x-i.x)+i.x*(r.y-i.y)*(e.x-t.x)-t.x*(e.y-t.y)*(r.x-i.x))/s,n.y=(e.y*(t.x-e.x)*(r.y-i.y)+(r.x-e.x)*(r.y-i.y)*(t.y-e.y)-r.y*(i.x-r.x)*(e.y-t.y))/(s=(t.x-e.x)*(r.y-i.y)-(e.y-t.y)*(i.x-r.x)),1):0},st(t,e,i,r,n){var s=Math.min(i.x,r.x),l=Math.max(i.x,r.x),o=Math.min(i.y,r.y),h=Math.max(i.y,r.y),a=t.x,u=t.y,f=i.x,c=i.y,d=r.x,p=r.y;if(90==e)return!(t.x<s||t.x>l||(l-s<Ft?t.y>=c&&t.y<=p||t.y>=p&&t.y<=c?(n.x=t.x,n.y=t.y,0):c<p&&t.x<c?(n.x=f,n.y=c,0):!(p<c&&t.x<p)||(n.x=d,n.y=p,0):(n.y=v=(p-c)/(d-f)*(a-f)+c,n.x=a,v<u||!this.Y(n,i,r))));if(270==e)return!(t.x<s||t.x>l||(Math.abs(l-s<Ft)?t.y>=c&&t.y<=p||t.y>=p&&t.y<=c?(n.x=t.x,n.y=t.y,0):c<p&&t.y>p?(n.x=d,n.y=p,0):!(p<c&&t.y>c)||(n.x=f,n.y=c,0):(n.y=v=(p-c)/(d-f)*(a-f)+c,n.x=a,u<v||!this.Y(n,i,r))));if(270!=e&&90!=e&&Math.abs(l-s<Ft)){var t=s,v=Math.tan(e/180*Math.PI)*(t-a)+u;if(n.y=v,n.x=t,this.Y(n,i,r))return l=v-u,0<(s=t-a)/Math.sqrt(s*s+l*l)*Math.cos(e/180*Math.PI)}return Math.abs(h-o<=Ft)?(v=o,t=1/Math.tan(e/180*Math.PI)*(v-u)+a,n.x=t,n.y=v,!!this.Y(n,i,r)&&(s=v-u,0<(l=t-a)/Math.sqrt(l*l+s*s)*Math.cos(e/180*Math.PI))):(t=u+(h=Math.tan(e/180*Math.PI))*((v=(c-u-((o=(p-c)/(d-f))*f-h*a))/(h-o))-a),n.x=v,n.y=t,!!this.Y(n,i,r)&&(l=v-a,s=t-u,Math.abs(l)<=Ft&&Math.abs(s)<=Ft||0<l/Math.sqrt(l*l+s*s)*Math.cos(e/180*Math.PI)))},lt(t,e){return Math.abs(t.x-e.x)<o&&Math.abs(t.y-e.y)<o},ot(t,e,i,r){var n,s,l,o,h=t.x,a=t.y,u=e.x,f=e.y,c=i.x,d=i.y;return this.lt(t,e)||this.lt(t,i)?(r.x=h,r.y=a,!0):(l=Math.min(e.x,i.x),o=Math.max(e.x,i.x),n=Math.min(e.y,i.y),s=Math.max(e.y,i.y),Math.abs(u-c)<St?(r.x=u,n<=(r.y=a)&&a<=s):Math.abs(f-d)<St?(r.x=h,r.y=f,l<=h&&h<=o):(o=a+(n=-1/((d-f)/(c-u)))*((l=(f-a-((s=(d-f)/(c-u))*u-n*h))/(n-s))-h),r.x=l,r.y=o,!!this.Y(r,e,i)||!(!this.lt(t,e)&&!this.lt(t,i))))},ht(t,e){return{x:t.y*e.z-t.z*e.y,y:t.z*e.x-t.x*e.z,z:t.x*e.y-t.y*e.x}},ut(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},ft(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},ct(t,e){return t.x*e.x+t.y*e.y},dt(t,e){return t.x*e.y-t.y*e.x},vt(t){return Math.sqrt(t.x*t.x+t.y*t.y)},bt(t,e){var i,r;return 0==t.x&&0==t.y||0==e.x&&0==e.y?0:(i={x:e.x,y:e.y,z:0},i=this.ht({x:t.x,y:t.y,z:0},i),r=this.ct(t,e),r=Math.acos(r/(this.vt(t)*this.vt(e))),0<i.z?r/Math.PI*180:360-r/Math.PI*180)},yt(e,i,r,n){for(let t=0;t<r.length;t++){var s=r[t],l=r[(t+1)%r.length];if(1==this.nt(e,i,s,l,n))return!0}return!1},gt(t,e,i,r,n){var s=Math.min(t.x,i.x,r.x),l=Math.max(t.x,i.x,r.x),o=Math.min(t.y,i.y,r.y),h=Math.max(t.y,i.y,r.y),l=Math.sqrt((l-s)*(l-s)+(h-o)*(h-o)),s=e/180*Math.PI,h=l*Math.cos(s)+t.x,o=l*Math.sin(s)+t.y;return 1==this.nt(t,{x:h,y:o},i,r,n)},_t(e){var t={x:null,y:null};let i=0,r=0,n=e.length;1<e.length&&e[0].x===e[e.length-1].x&&e[0].y===e[e.length-1].y&&n--;for(let t=0;t<n;t++)i+=e[t].x,r+=e[t].y;return t.x=i/e.length,t.y=r/e.length,t},wt(t,e,i,r){var n=[],s=t.x-e,l=t.x+e,o=t.y-e,h=t.y+e,a=Math.min(i.x,r.x),u=Math.max(i.x,r.x),f=Math.min(i.y,r.y),c=Math.max(i.y,r.y);return u<s||l<a||c<o||h<f||(l=(t=((s=r.x-i.x)*(l=t.x-i.x)+(o=r.y-i.y)*(h=t.y-i.y))/(r=s*s+o*o))*t-(l*l+h*h-e*e)/r)<0||(h=Math.sqrt(l),r={x:i.x-s*(e=-t+h),y:i.y-o*e},s={x:i.x-s*(l=-t-h),y:i.y-o*l},e!==l&&(a<=r.x&&r.x<=u&&f<=r.y&&r.y<=c&&n.push(r),a<=s.x)&&s.x<=u&&f<=s.y&&s.y<=c&&n.push(s)),n},xt(t,e){return Math.abs(t.x-e.x)<=o&&Math.abs(t.y-e.y)<=o},Ot(t,e,i){var r,n={};if(t.x!=e.x)return r=e=(e.y-t.y)/(e.x-t.x),n.x=(+i.x- -1*r*i.y-r*(e=t.y-e*t.x))/(r*r+1),n.y=(r*r*i.y- -1*r*i.x- -1*e)/(r*r+1),n;n.x=t.x,n.y=i.y},V(t,e,i,r){var n,s,l,o,h={point:null,isintersect:!1};return this.distanceOfTwoPoints(t,i)<.001||this.distanceOfTwoPoints(t,r)<.001?(h.isintersect=!0,h.point=t):this.distanceOfTwoPoints(e,i)<.001||this.distanceOfTwoPoints(e,r)<.001?(h.isintersect=!0,h.point=e):(n={x:e.x-t.x,y:e.y-t.y},s={x:r.x-i.x,y:r.y-i.y},r={x:r.x-t.x,y:r.y-t.y},e={x:e.x-i.x,y:e.y-i.y},l={x:-(i={x:i.x-t.x,y:i.y-t.y}).x,y:-i.y},o=this.dt(s,n),Math.abs(o)<=1e-5||this.dt(i,n)*this.dt(r,n)<=-5e-4&&this.dt(l,s)*this.dt(e,s)<-5e-4&&(r=this.dt(s,i)/o,h.point={x:t.x+n.x*r,y:t.y+n.y*r},h.isintersect=!0)),h},jt(t,e,i){return t.x===e.x&&(e.x=e.x+1),t.y===e.y&&(e.y=e.y+1),e.x===i.x&&(i.x=i.x+1),e.y===i.y&&(i.y=i.y+1),!(0<(e.x-t.x)*(i.y-e.y)-(e.y-t.y)*(i.x-e.x))},getAngle(t){var e=t.p1,t=t.p2,i=t.x-e.x,t=t.y-e.y,e=Math.sqrt(i*i+t*t),e=Math.asin(Math.abs(t)/e);return 0<i&&0<t?e:i<0&&0<t?Math.PI-e:i<0&&t<0?Math.PI+e:0<i&&t<0?2*Math.PI-e:0==i&&0<t?e:0==i&&t<0?3*Math.PI/2:0<i&&0==t?e:i<0&&0==t?Math.PI:null},kt(t){var e=this.distanceOfTwoPoints(t[0],t[1]),i=this.distanceOfTwoPoints(t[1],t[2]),t=this.distanceOfTwoPoints(t[0],t[2]),r=(e+i+t)/2;return Math.sqrt(r*(r-e)*(r-i)*(r-t))},Et(t,e){var i,r,n,s,l;return this.tt(t,e[0],e[1],{})<1e-4||this.tt(t,e[0],e[2],{})<1e-4||this.tt(t,e[1],e[2],{})<1e-4||(s={x:e[1].x-e[0].x,y:e[1].y-e[0].y},i={x:e[0].x-e[2].x,y:e[0].y-e[2].y},r={x:e[2].x-e[1].x,y:e[2].y-e[1].y},l={x:t.x-e[0].x,y:t.y-e[0].y},n={x:t.x-e[1].x,y:t.y-e[1].y},t={x:t.x-e[2].x,y:t.y-e[2].y},e=this.dt(s,l),s=this.dt(r,n),l=this.dt(i,t),e*s>o&&s*l>o)},Mt(r,n,s){var l=s.length,o={isintersect:!1,start:null,end:null,type:0,outer:null},h=[];if(this.Et(r,s)&&(o.start=r),this.Et(n,s)&&(o.end=n),null!=o.start&&null!=o.end)o.isintersect=!0,o.type=1;else{let e=(s[1].x+s[2].x)/2,i=(s[1].y+s[2].y)/2;for(let t=1;t<l;t++){var a,u=this.V(r,n,s[t-1],s[t]);if(u.isintersect){if(null!=o.start)return o.end=u.point,o.isintersect=!0,o.outer="end",a=this.bt({x:e-s[0].x,y:i-s[0].y},{x:n.x-s[0].x,y:n.y-s[0].y}),o.type=0<(a=a<180?a:a-360)?2:3,o;if(null!=o.end)return o.start=u.point,o.isintersect=!0,o.outer="start",a=this.bt({x:e-s[0].x,y:i-s[0].y},{x:r.x-s[0].x,y:r.y-s[0].y}),o.type=0<(a=a<180?a:a-360)?2:3,o;h.push(u)}}var t,f=this.V(r,n,s[0],s[l-1]);if(f.isintersect){if(null!=o.start)return o.end=f.point,o.isintersect=!0,o.outer="end",t=this.bt({x:e-s[0].x,y:i-s[0].y},{x:n.x-s[0].x,y:n.y-s[0].y}),o.type=0<(t=t<180?t:t-360)?2:3,o;if(null!=o.end)return o.start=f.point,o.isintersect=!0,o.outer="start",t=this.bt({x:e-s[0].x,y:i-s[0].y},{x:r.x-s[0].x,y:r.y-s[0].y}),o.type=0<(t=t<180?t:t-360)?2:3,o;h.push(f)}2!=h.length||this.distanceOfTwoPoints(h[0].point,h[1].point)<.01||(this.distanceOfTwoPoints(h[0].point,r)<=this.distanceOfTwoPoints(h[0].point,n)?(o.start=h[0].point,o.end=h[1].point):(o.start=h[1].point,o.end=h[0].point),o.isintersect=!0,o.type=4)}return o},Nt(e,i,r){var n=r.length,s={isintersect:!1,start:null,end:null},l=[];if(this.Et(e,r)&&(s.start=e),this.Et(i,r)&&(s.end=i),null!=s.start&&null!=s.end)s.isintersect=!0;else{for(let t=1;t<n;t++){var o=this.V(e,i,r[t-1],r[t]);if(o.isintersect){if(null!=s.start)return s.end=o.point,s.isintersect=!0,s;if(null!=s.end)return s.start=e,s.isintersect=!0,s;l.push(o)}}var t=this.V(e,i,r[0],r[n-1]);if(t.isintersect){if(null!=s.start)return s.end=t.point,s.isintersect=!0,s;if(null!=s.end)return s.start=e,s.isintersect=!0,s;l.push(t)}2==l.length&&(s.start=(this.distanceOfTwoPoints(l[0].point,e)<=this.distanceOfTwoPoints(l[0].point,i)?l[0]:l[1]).point,s.end=(this.distanceOfTwoPoints(l[0].point,e)>this.distanceOfTwoPoints(l[0].point,i)?l[0]:l[1]).point,s.isintersect=!0)}return s},Tt(n,t){if(0==t.length)return[n];var e,i,r=this.At(t),s=[];r.sort(function(t,e){var i=(t.Rt.x-n.Rt.x)*(t.Rt.x-n.Rt.x)+(t.Rt.y-n.Rt.y)*(t.Rt.y-n.Rt.y),r=(e.Rt.x-n.Rt.x)*(e.Rt.x-n.Rt.x)+(e.Rt.y-n.Rt.y)*(e.Rt.y-n.Rt.y),t=(t.It.x-n.Rt.x)*(t.It.x-n.Rt.x)+(t.It.y-n.Rt.y)*(t.It.y-n.Rt.y),e=(e.It.x-n.Rt.x)*(e.It.x-n.Rt.x)+(e.It.y-n.Rt.y)*(e.It.y-n.Rt.y);return(i<t?i:t)<(r<e?r:e)});let l=0;for(l=0;l<r.length;l++)this.distanceOfTwoPoints(r[l].Rt,r[l].It)<.01||(e=this.distanceOfTwoPoints(r[l].Rt,n.Rt),i=this.distanceOfTwoPoints(r[l].It,n.Rt),e<.01?n.Rt=r[l].It:i<.01?n.Rt=r[l].Rt:e<i?.1<this.distanceOfTwoPoints(n.Rt,r[l].Rt)&&(s.push({Lt:n.Lt,Rt:n.Rt,It:r[l].Rt,K:n.K,St:n.St}),n.Rt=r[l].It):.1<this.distanceOfTwoPoints(n.Rt,r[l].It)&&(s.push({Lt:n.Lt,Rt:n.Rt,It:r[l].It,K:n.K,St:n.St}),n.Rt=r[l].Rt),r.splice(l,1));return.1<this.distanceOfTwoPoints(n.Rt,n.It)&&s.push(n),s},At(t){var e=[];if(1==t.length)return t;let i=t[0],r=1;for(;0<t.length;){if(r>=t.length){if(e.push(i),t.splice(0,1),t.length<1)break;i=t[0],r=1}if(1===t.length){e.push(i);break}this.B(i.Rt,i.It,t[r].Rt)?(this.B(i.Rt,i.It,t[r].It)||(i.It=t[r].It),t.splice(r,1)):this.B(i.Rt,i.It,t[r].It)?(i.Rt=t[r].Rt,t.splice(r,1)):this.B(t[r].Rt,t[r].It,i.Rt)?(i=(this.B(t[r].Rt,t[r].It,i.It)||(t[r].It=i.It),t[r]),t.splice(r,1)):this.B(t[r].Rt,t[r].It,i.It)?(t[r].Rt=i.Rt,i=t[r],t.splice(r,1)):r++}return e},B(t,e,i){let r=t.x-i.x,n=t.y-i.y,s=e.x-i.x,l=e.y-i.y;var o=this.distanceOfTwoPoints(t,i),i=this.distanceOfTwoPoints(e,i),t=this.distanceOfTwoPoints(t,e);return r*l-n*s<1e-5&&o+i-t<.001},Ft(t,e,i){let r=e.x-t.x,n=e.y-t.y;t=Math.sqrt(r*r+n*n);return{x:e.x+r/t*i,y:e.y+n/t*i}},Pt(e){let i=null,r=0,t=0,n=0;for(let t=0;t<e.length;t++)(null===i||e[t].x>i)&&(i=e[t].x,r=t);var s=new Lt(e[r].x,e[r].y,0),l=(t=0===r?e.length-1:r-1,n=r===e.length-1?0:r+1,new Lt(e[t].x,e[t].y,0)),o=new Lt(e[n].x,e[n].y,0),l=(new Lt).copy(s).sub(l),o=(new Lt).copy(o).sub(s);return 0<l.cross(o).z}});let D=new Dt;class Vt{constructor(){this.Gt={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.Dt={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}get min(){return this.Gt}get max(){return this.Dt}get center(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=(this.min.x+this.max.x)/2,t.y=(this.min.y+this.max.y)/2),t}get size(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=this.max.x-this.min.x,t.y=this.max.y-this.min.y),t}copy(t){return this.Dt.x=t.max.x,this.Dt.y=t.max.y,this.Gt.x=t.min.x,this.Gt.y=t.min.y,this}clone(){return(new Vt).copy(this)}reset(){this.Gt={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.Dt={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}toObject(){return{min:this.min,max:this.max,center:this.center,size:this.size}}expand(t){this.Vt(t)}expandByCoords(t){this.Bt(t)}valid(){return this.Zt()}isCross(t){let e=!0;return t.max.x<this.min.x&&(e=!1),t.min.x>this.max.x&&(e=!1),t.max.y<this.min.y&&(e=!1),e=t.min.y>this.max.y?!1:e}}Object.assign(Vt.prototype,{Zt(){return!(this.min.x>this.max.x||this.min.y>this.max.y)},Vt(t){t&&t.valid()&&(t.min.x<this.min.x&&(this.min.x=t.min.x),t.min.y<this.min.y&&(this.min.y=t.min.y),t.max.x>this.max.x&&(this.max.x=t.max.x),t.max.y>this.max.y)&&(this.max.y=t.max.y)},Bt(t){t&&0!=t.length&&t.forEach(t=>{t.x<this.min.x&&(this.min.x=t.x),t.y<this.min.y&&(this.min.y=t.y),t.x>this.max.x&&(this.max.x=t.x),t.y>this.max.y&&(this.max.y=t.y)})}});class Bt extends I{constructor(t,e){super(t,e),this.Ct=new Vt,this.Wt=null}}Object.assign(Bt.prototype,{p(t){return t.getType()!=b.MODEL?this.Ut(t):this.qt(t)},qt(t){return!0},Yt(t){t=t.getBound();return!!D.Z(this.Ct.Gt,this.Ct.Dt,t.min,t.max)},v(t,e){var n=t.getCoordinates();if(t.getType()!==b.MODEL)e.K=Math.sqrt(D.J(n[0],this.Xt));else{let r=Number.MAX_VALUE;for(let i=0,t=n.length;i<t;i++)for(let t=1,e=n[i].length;t<e;t++){var s=n[i][t-1],l=n[i][t],s=D.$(this.Xt,s,l);r>s&&(r=s)}e.K=Math.sqrt(r)}},Ut(t){t=t.getCoordinates()[0];return!!D.W(t,this.Ct.Gt,this.Ct.Dt)&&("circle"===this.Wt?D.J(t,this.Xt)<this.zt:D.X(t,this.Ht,this.Ht.length-1))}});class Zt extends Bt{constructor(t,e){super(t,e),this.Wt="circle",this.Xt=this.u.center,this.Qt=this.u.radius,this.zt=this.u.radius*this.u.radius,this.Ct.Bt([{x:this.Xt.x-this.Qt,y:this.Xt.y-this.Qt},{x:this.Xt.x+this.Qt,y:this.Xt.y+this.Qt}])}}Object.assign(Zt.prototype,{qt(t){if(this.Yt(t)){var r=t.getCoordinates();for(let i=0,t=r.length;i<t;i++)for(let t=1,e=r[i].length;t<e;t++){var n=r[i][t];if(D.J(n,this.Xt)<this.zt)return!0;var s=r[i][t-1];if(1==t&&D.J(s,this.Xt)<this.zt)return!0;if(D.$(this.Xt,s,n)<this.zt)return!0}}return!1}});class Ct extends Bt{constructor(t,e){super(t,e),this.Wt="polygon",this.Ht=this.u,this.Kt=this.Ht.length-1,this.Xt=D.it(this.Ht),this.Ct.Bt(this.Ht)}}Object.assign(Ct.prototype,{qt(t){if(this.Yt(t)){var s=t.getCoordinates();for(let i=0,t=s.length;i<t;i++)for(let t=0,e=s[i].length-1;t<e;t++)if(D.X(s[i][t],this.Ht,this.Ht.length))return!0;for(let r=0;r<this.Kt;r++){let i=!1;for(let t=0,e=s.length;t<e;t++)D.X(this.Ht[r],s[t],s[t].length-1)&&(i=0==t);if(i)return!0}for(let t=0;t<=this.Kt;t++){let r=null,n=null;n=t===this.Kt?(r=this.Ht[0],this.Ht[t]):(r=this.Ht[t],this.Ht[t+1]);for(let i=0,t=s.length;i<t;i++)for(let t=0,e=s[i].length-1;t<e;t++){var l=s[i][t],o=s[i][t+1];if(D.C(r,n,l,o))return!0}}}return!1}});class Wt extends I{constructor(t,e){super(t,e)}}Object.assign(Wt.prototype,{p(t){return!1}});class Ut extends I{constructor(t,e){super(t,e),this.Jt=this.u.point}}Object.assign(Ut.prototype,{p(t){return t.getType()==b.MODEL&&this.qt(t)},qt(t){var e=t.getBound();if(!D.W(this.Jt,e.min,e.max))return!1;var i=t.getCoordinates();let r=0;for(let t=0,e=i.length;t<e&&(D.X(this.Jt,i[t],i[t].length-1)&&r++,!(1<r));t++);return 1==r}});class qt extends Bt{constructor(t,e){super(t,e),this.Wt="linebuffer",this.$t=this.u.coords,this.te=this.u.buffer,this.ee=this.te*this.te,this.ie=[],this.ie=this.re(this.$t,this.te)}re(e,i){var r=[];for(let t=0;t<e.length-1;t++){var n=Math.min(e[t].x,e[t+1].x),s=Math.max(e[t].x,e[t+1].x),l=Math.min(e[t].y,e[t+1].y),o=Math.max(e[t].y,e[t+1].y),h=(n-=i,s+=i,l-=i,o+=i,new Vt);h.expandByCoords([{x:n,y:l},{x:s,y:o}]),r.push(h)}return r}}Object.assign(qt.prototype,{Yt(t){var e=t.getBound();for(let t=0;t<this.ie.length;t++){var i=this.ie[t];if(D.Z(i.Gt,i.Dt,e.min,e.max))return!0}return!1},qt(t){if(this.Yt(t)){var r=t.getCoordinates();for(let i=0,t=r.length;i<t;i++)for(let e=1,t=r[i].length;e<t;e++){var n=r[i][e],s=r[i][e-1];for(let t=0;t<this.$t.length-1;t++){var l=this.$t[t],o=this.$t[t+1];if(D.$(n,l,o)<this.ee)return!0;if(1==e&&D.$(s,l,o)<this.ee)return!0;if(D.$(l,s,n)<this.ee)return!0;if(D.$(o,s,n)<this.ee)return!0;if(D.C(l,o,s,n))return!0}}}return!1},Ut(t){var e=t.getCoordinates()[0];for(let t=0;t<this.$t.length-1;t++){var i=this.$t[k],r=this.$t[k+1];if(D.$(e,i,r)<this.ee)return!0}return!1},v(t,e){return e}});class Yt{constructor(){}create(t){if(!t||"object"!=typeof t)return null;var e,i=[];for(e in t)switch(e){case"FID":i.push(new L(e,t[e]));break;case"name":i.push(new W(e,t[e]));break;case"ename":i.push(new U(e,t[e]));break;case"keyword":i.push(new Y(e,t[e]));break;case"typeID":i.push(new q(e,t[e]));break;case"circle":i.push(new Zt(e,t[e]));break;case"polygon":i.push(new Ct(e,t[e]));break;case"buffer":i.push(new Wt(e,t[e]));break;case"contain":i.push(new Ut(e,t[e]));break;case"line":i.push(new qt(e,t[e]))}return i}}let Xt=new Yt;class zt{constructor(){this.ne=null,this.se=t.MODEL,this.le=null,this.oe=[],this.he=[],this.ae=!1,this.ue=null}set levels(t){this.ne=t}get levels(){return this.ne}set type(t){this.se=t}get type(){return this.se}addCondition(t){var e=Xt.create(t);this.he.push(...e),this.oe.push(t)}set onlyInBuilding(t){this.ae=t}get onlyInBuilding(){return this.ae}set buildings(t){this.ue=t}get buildings(){return this.ue}set buildingID(t){this.le=t}get buildingID(){return this.le}}let Ht={BROWSER:0,WX:1},u=(Object.freeze(Ht),{document:"undefined"!=typeof document?document:{},window:"undefined"!=typeof window?window:{},environment:Ht.BROWSER,XMLHttpRequest:"undefined"!=typeof XMLHttpRequest?XMLHttpRequest:{}}),Qt=null;class Kt{constructor(){}static global(){if("undefined"!=typeof self&&null!==self&&0!==Object.keys(self).length)return self;if("undefined"!=typeof window&&null!==window&&0!==Object.keys(window).length)return window;if("undefined"!=typeof global&&null!==global&&0!==Object.keys(global).length)return global;var t;if("undefined"!=typeof my)return Qt||(t=my.getAppIdSync(),Qt={location:{host:t.appId+".hybrid.alipay-eco.com"}}),Qt;if(u.environment==Ht.WX)return{};throw new Error("unable to locate global object")}}let c={NAME_KEY_ERROR:0,MAP_ID_URL_ERROR:2,THEME_ID_URL_ERROR:4,LICENSE_ERROR:8,PATH_ERROR:404,INFO:32,DEFAULT_LEVEL_ERROR:64};class l{constructor(t){this.fe={data:null,method:"GET",responseType:"json",...t},this.ce=null}}Object.assign(l.prototype,{de(t,e,i){var{data:r,method:n,url:s,responseType:l,header:o}=this.fe;let h=null;if((h=new(u.environment===Ht.WX?u.XMLHttpRequest:"undefined"!=typeof XMLHttpRequest?XMLHttpRequest:Kt.global().fengmap.XMLHttpRequest)).responseType=l,h.open(n,s),"object"==typeof o)for(var a in o)h.setRequestHeader(a,o[a]);h.addEventListener("load",()=>{200===h.status||0===h.status||201===h.status?t&&t(h.response):e&&(404===h.status?e(c.PATH_ERROR):2069===h.response.error_code?e(c.NAME_KEY_ERROR):2063===h.response.error_code?e(c.MAP_ID_URL_ERROR):400===h.response.error_code?e(c.THEME_ID_URL_ERROR):e(h.response))}),h.addEventListener("timeout",t=>{i&&i(t)}),h.addEventListener("error",t=>{e&&e(t)}),h.send(JSON.stringify(r)),this.ce=h},pe(){this.ce&&this.ce.abort&&(this.ce.abort(),this.ce=null)}});var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Jt(t){return t&&t.t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $t={exports:{}},te={},ee={},ie,re;function ne(){return re||(re=1,ie=function(t,e){var i=new Array(arguments.length-1),s=0,r=2,l=!0;for(;r<arguments.length;)i[s++]=arguments[r++];return new Promise(function(r,n){i[s]=function(t){if(l)if(l=!1,t)n(t);else{for(var e=new Array(arguments.length-1),i=0;i<e.length;)e[i++]=arguments[i];r.apply(null,e)}};try{t.apply(e||null,i)}catch(t){l&&(l=!1,n(t))}})}),ie}var se={},le,oe,he,ae,ue,fe,ce;function de(){if(!le){le=1;for(var t=se,a=(t.length=function(t){var e=t.length;if(!e)return 0;for(var i=0;1<--e%4&&"="===t.charAt(e);)++i;return Math.ceil(3*t.length)/4-i},new Array(64)),h=new Array(123),e=0;e<64;)h[a[e]=e<26?e+65:e<52?e+71:e<62?e-4:e-59|43]=e++;t.encode=function(t,e,i){for(var r,n=null,s=[],l=0,o=0;e<i;){var h=t[e++];switch(o){case 0:s[l++]=a[h>>2],r=(3&h)<<4,o=1;break;case 1:s[l++]=a[r|h>>4],r=(15&h)<<2,o=2;break;case 2:s[l++]=a[r|h>>6],s[l++]=a[63&h],o=0}8191<l&&((n=n||[]).push(String.fromCharCode.apply(String,s)),l=0)}return o&&(s[l++]=a[r],s[l++]=61,1===o)&&(s[l++]=61),n?(l&&n.push(String.fromCharCode.apply(String,s.slice(0,l))),n.join("")):String.fromCharCode.apply(String,s.slice(0,l))};var u="invalid encoding";t.decode=function(t,e,i){for(var r,n=i,s=0,l=0;l<t.length;){var o=t.charCodeAt(l++);if(61===o&&1<s)break;if(void 0===(o=h[o]))throw Error(u);switch(s){case 0:r=o,s=1;break;case 1:e[i++]=r<<2|(48&o)>>4,r=o,s=2;break;case 2:e[i++]=(15&r)<<4|(60&o)>>2,r=o,s=3;break;case 3:e[i++]=(3&r)<<6|o,s=0}}if(1===s)throw Error(u);return i-n},t.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}}return se}function pe(){return he||(he=1,(oe=t).prototype.on=function(t,e,i){return(this.ve[t]||(this.ve[t]=[])).push({fn:e,ctx:i||this}),this},t.prototype.off=function(t,e){if(void 0===t)this.ve={};else if(void 0===e)this.ve[t]=[];else for(var i=this.ve[t],r=0;r<i.length;)i[r].fn===e?i.splice(r,1):++r;return this},t.prototype.emit=function(t){var e=this.ve[t];if(e){for(var i=[],r=1;r<arguments.length;)i.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,i)}return this}),oe;function t(){this.ve={}}}function ve(){return ue||(ue=1,ae=t(t)),ae;function t(t){function e(t,e,i,r){var n=e<0?1:0;0===(e=n?-e:e)?t(0<1/e?0:2147483648,i,r):isNaN(e)?t(2143289344,i,r):t(34028234663852886e22<e?(n<<31|2139095040)>>>0:e<11754943508222875e-54?(n<<31|Math.round(e/1401298464324817e-60))>>>0:(n<<31|(t=Math.floor(Math.log(e)/Math.LN2))+127<<23|8388607&Math.round(e*Math.pow(2,-t)*8388608))>>>0,i,r)}function i(t,e,i){t=t(e,i),e=2*(t>>31)+1,i=t>>>23&255,t&=8388607;return 255==i?t?NaN:1/0*e:0==i?1401298464324817e-60*e*t:e*Math.pow(2,i-150)*(8388608+t)}function r(t,e,i){o[0]=t,e[i]=h[0],e[i+1]=h[1],e[i+2]=h[2],e[i+3]=h[3]}function n(t,e,i){o[0]=t,e[i]=h[3],e[i+1]=h[2],e[i+2]=h[1],e[i+3]=h[0]}function s(t,e){return h[0]=t[e],h[1]=t[e+1],h[2]=t[e+2],h[3]=t[e+3],o[0]}function l(t,e){return h[3]=t[e],h[2]=t[e+1],h[1]=t[e+2],h[0]=t[e+3],o[0]}var o,h,a,u,f;function c(t,e,i,r,n,s){var l,o,h=r<0?1:0;0===(r=h?-r:r)?(t(0,n,s+e),t(0<1/r?0:2147483648,n,s+i)):isNaN(r)?(t(0,n,s+e),t(2146959360,n,s+i)):17976931348623157e292<r?(t(0,n,s+e),t((h<<31|2146435072)>>>0,n,s+i)):r<22250738585072014e-324?(t((l=r/5e-324)>>>0,n,s+e),t((h<<31|l/4294967296)>>>0,n,s+i)):(1024===(o=Math.floor(Math.log(r)/Math.LN2))&&(o=1023),t(4503599627370496*(l=r*Math.pow(2,-o))>>>0,n,s+e),t((h<<31|o+1023<<20|1048576*l&1048575)>>>0,n,s+i))}function d(t,e,i,r,n){e=t(r,n+e),t=t(r,n+i),r=2*(t>>31)+1,n=t>>>20&2047,i=4294967296*(1048575&t)+e;return 2047==n?i?NaN:1/0*r:0==n?5e-324*r*i:r*Math.pow(2,n-1075)*(i+4503599627370496)}function p(t,e,i){a[0]=t,e[i]=u[0],e[i+1]=u[1],e[i+2]=u[2],e[i+3]=u[3],e[i+4]=u[4],e[i+5]=u[5],e[i+6]=u[6],e[i+7]=u[7]}function v(t,e,i){a[0]=t,e[i]=u[7],e[i+1]=u[6],e[i+2]=u[5],e[i+3]=u[4],e[i+4]=u[3],e[i+5]=u[2],e[i+6]=u[1],e[i+7]=u[0]}function b(t,e){return u[0]=t[e],u[1]=t[e+1],u[2]=t[e+2],u[3]=t[e+3],u[4]=t[e+4],u[5]=t[e+5],u[6]=t[e+6],u[7]=t[e+7],a[0]}function y(t,e){return u[7]=t[e],u[6]=t[e+1],u[5]=t[e+2],u[4]=t[e+3],u[3]=t[e+4],u[2]=t[e+5],u[1]=t[e+6],u[0]=t[e+7],a[0]}return"undefined"!=typeof Float32Array?(o=new Float32Array([-0]),h=new Uint8Array(o.buffer),f=128===h[3],t.writeFloatLE=f?r:n,t.writeFloatBE=f?n:r,t.readFloatLE=f?s:l,t.readFloatBE=f?l:s):(t.writeFloatLE=e.bind(null,g),t.writeFloatBE=e.bind(null,m),t.readFloatLE=i.bind(null,_),t.readFloatBE=i.bind(null,w)),"undefined"!=typeof Float64Array?(a=new Float64Array([-0]),u=new Uint8Array(a.buffer),f=128===u[7],t.writeDoubleLE=f?p:v,t.writeDoubleBE=f?v:p,t.readDoubleLE=f?b:y,t.readDoubleBE=f?y:b):(t.writeDoubleLE=c.bind(null,g,0,4),t.writeDoubleBE=c.bind(null,m,4,0),t.readDoubleLE=d.bind(null,_,0,4),t.readDoubleBE=d.bind(null,w,4,0)),t}function g(t,e,i){e[i]=255&t,e[i+1]=t>>>8&255,e[i+2]=t>>>16&255,e[i+3]=t>>>24}function m(t,e,i){e[i]=t>>>24,e[i+1]=t>>>16&255,e[i+2]=t>>>8&255,e[i+3]=255&t}function _(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function w(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}}function be(){return ce||(ce=1,fe=t),fe;function t(t){try{var e=eval("quire".replace(/^/,"re"))(t);if(e&&(e.length||Object.keys(e).length))return e}catch(t){}return null}}var ye={},ge,me,_e,we,xe,Oe;function je(){var t;return ge||(ge=1,(t=ye).length=function(t){for(var e,i=0,r=0;r<t.length;++r)(e=t.charCodeAt(r))<128?i+=1:e<2048?i+=2:55296==(64512&e)&&56320==(64512&t.charCodeAt(r+1))?(++r,i+=4):i+=3;return i},t.read=function(t,e,i){if(i-e<1)return"";for(var r,n=null,s=[],l=0;e<i;)(r=t[e++])<128?s[l++]=r:191<r&&r<224?s[l++]=(31&r)<<6|63&t[e++]:239<r&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,s[l++]=55296+(r>>10),s[l++]=56320+(1023&r)):s[l++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],8191<l&&((n=n||[]).push(String.fromCharCode.apply(String,s)),l=0);return n?(l&&n.push(String.fromCharCode.apply(String,s.slice(0,l))),n.join("")):String.fromCharCode.apply(String,s.slice(0,l))},t.write=function(t,e,i){for(var r,n,s=i,l=0;l<t.length;++l)(r=t.charCodeAt(l))<128?e[i++]=r:(r<2048?e[i++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(n=t.charCodeAt(l+1)))?(++l,e[i++]=(r=65536+((1023&r)<<10)+(1023&n))>>18|240,e[i++]=r>>12&63|128):e[i++]=r>>12|224,e[i++]=r>>6&63|128),e[i++]=63&r|128);return i-s}),ye}function ke(){return _e||(_e=1,me=function(e,i,t){var r=t||8192,n=r>>>1,s=null,l=r;return function(t){if(t<1||n<t)return e(t);r<l+t&&(s=e(r),l=0);t=i.call(s,l,l+=t);return 7&l&&(l=1+(7|l)),t}}),me}function Ee(){var e,r,i;return xe||(xe=1,we=n,e=Me(),(r=n.zero=new n(0,0)).toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1},n.zeroHash="\0\0\0\0\0\0\0\0",n.fromNumber=function(t){var e,i;return 0===t?r:(i=(t=(e=t<0)?-t:t)>>>0,t=(t-i)/4294967296>>>0,e&&(t=~t>>>0,i=~i>>>0,4294967295<++i)&&(i=0,4294967295<++t)&&(t=0),new n(i,t))},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(e.isString(t)){if(!e.Long)return n.fromNumber(parseInt(t,10));t=e.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):r},n.prototype.toNumber=function(t){var e;return!t&&this.hi>>>31?(t=1+~this.lo>>>0,e=~this.hi>>>0,-(t+4294967296*(e=t?e:e+1>>>0))):this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return e.Long?new e.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}},i=String.prototype.charCodeAt,n.fromHash=function(t){return"\0\0\0\0\0\0\0\0"===t?r:new n((i.call(t,0)|i.call(t,1)<<8|i.call(t,2)<<16|i.call(t,3)<<24)>>>0,(i.call(t,4)|i.call(t,5)<<8|i.call(t,6)<<16|i.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0==i?0==e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:i<128?9:10}),we;function n(t,e){this.lo=t>>>0,this.hi=e>>>0}}function Me(){var r;return Oe||(Oe=1,(r=ee).asPromise=ne(),r.base64=de(),r.EventEmitter=pe(),r.float=ve(),r.inquire=be(),r.utf8=je(),r.pool=ke(),r.LongBits=Ee(),r.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),r.global=r.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||e,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,e){var i=t[e];return!(null==i||!t.hasOwnProperty(e))&&("object"!=typeof i||0<(Array.isArray(i)?i:Object.keys(i)).length)},r.Buffer=(()=>{try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}})(),r.be=null,r.ye=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r.ye(t):new r.Array(t):r.Buffer?r.be(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){t=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(t.lo,t.hi,e):t.toNumber(Boolean(e))},r.merge=n,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=t,r.ProtocolError=t("ProtocolError"),r.oneOfGetter=function(t){for(var i={},e=0;e<t.length;++e)i[t[e]]=1;return function(){for(var t=Object.keys(this),e=t.length-1;-1<e;--e)if(1===i[t[e]]&&null!=this[t[e]])return t[e]}},r.oneOfSetter=function(i){return function(t){for(var e=0;e<i.length;++e)i[e]!==t&&delete this[i[e]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r.ge=function(){var i=r.Buffer;i?(r.be=i.from!==Uint8Array.from&&i.from||function(t,e){return new i(t,e)},r.ye=i.allocUnsafe||function(t){return new i(t)}):r.be=r.ye=null}),ee;function n(t,e,i){for(var r=Object.keys(e),n=0;n<r.length;++n)void 0!==t[r[n]]&&i||(t[r[n]]=e[r[n]]);return t}function t(t){function i(t,e){if(!(this instanceof i))return new i(t,e);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),e&&n(this,e)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return t}}),i.prototype.toString=function(){return this.name+": "+this.message},i}}var Ne=h,r=Me(),Te,Ae=r.LongBits,Re=r.base64,Ie=r.utf8;function Le(t,e,i){this.fn=t,this.len=e,this.next=void 0,this.val=i}function Se(){}function Fe(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function h(){this.len=0,this.head=new Le(Se,0,0),this.tail=this.head,this.states=null}var Pe=function(){return r.Buffer?function(){return(h.create=function(){return new Te})()}:function(){return new h}};function Ge(t,e,i){e[i]=255&t}function De(t,e,i){for(;127<t;)e[i++]=127&t|128,t>>>=7;e[i]=t}function Ve(t,e){this.len=t,this.next=void 0,this.val=e}function Be(t,e,i){for(;t.hi;)e[i++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;127<t.lo;)e[i++]=127&t.lo|128,t.lo=t.lo>>>7;e[i++]=t.lo}function Ze(t,e,i){e[i]=255&t,e[i+1]=t>>>8&255,e[i+2]=t>>>16&255,e[i+3]=t>>>24}h.create=Pe(),h.alloc=function(t){return new r.Array(t)},r.Array!==Array&&(h.alloc=r.pool(h.alloc,r.Array.prototype.subarray)),h.prototype.me=function(t,e,i){return this.tail=this.tail.next=new Le(t,e,i),this.len+=e,this},Ve.prototype=Object.create(Le.prototype),Ve.prototype.fn=De,h.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new Ve((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},h.prototype.int32=function(t){return t<0?this.me(Be,10,Ae.fromNumber(t)):this.uint32(t)},h.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},h.prototype.uint64=function(t){t=Ae.from(t);return this.me(Be,t.length(),t)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(t){t=Ae.from(t).zzEncode();return this.me(Be,t.length(),t)},h.prototype.bool=function(t){return this.me(Ge,1,t?1:0)},h.prototype.fixed32=function(t){return this.me(Ze,4,t>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(t){t=Ae.from(t);return this.me(Ze,4,t.lo).me(Ze,4,t.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(t){return this.me(r.float.writeFloatLE,4,t)},h.prototype.double=function(t){return this.me(r.float.writeDoubleLE,8,t)};var Ce=r.Array.prototype.set?function(t,e,i){e.set(t,i)}:function(t,e,i){for(var r=0;r<t.length;++r)e[i+r]=t[r]},We=(h.prototype.bytes=function(t){var e,i=t.length>>>0;return i?(r.isString(t)&&(e=h.alloc(i=Re.length(t)),Re.decode(t,e,0),t=e),this.uint32(i).me(Ce,i,t)):this.me(Ge,1,0)},h.prototype.string=function(t){var e=Ie.length(t);return e?this.uint32(e).me(Ie.write,e,t):this.me(Ge,1,0)},h.prototype.fork=function(){return this.states=new Fe(this),this.head=this.tail=new Le(Se,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Le(Se,0,0),this.len=0),this},h.prototype.ldelim=function(){var t=this.head,e=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=t.next,this.tail=e,this.len+=i),this},h.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),i=0;t;)t.fn(t.val,e,i),i+=t.len,t=t.next;return e},h.ge=function(t){Te=t,h.create=Pe(),Te.ge()},Ye),Ue=Ne,qe=((Ye.prototype=Object.create(Ue.prototype)).constructor=Ye,Me());function Ye(){Ue.call(this)}function Xe(t,e,i){t.length<40?qe.utf8.write(t,e,i):e.utf8Write?e.utf8Write(t,i):e.write(t,i)}Ye.ge=function(){Ye.alloc=qe.ye,Ye.writeBytesBuffer=qe.Buffer&&qe.Buffer.prototype instanceof Uint8Array&&"set"===qe.Buffer.prototype.set.name?function(t,e,i){e.set(t,i)}:function(t,e,i){if(t.copy)t.copy(e,i,0,t.length);else for(var r=0;r<t.length;)e[i++]=t[r++]}},Ye.prototype.bytes=function(t){var e=(t=qe.isString(t)?qe.be(t,"base64"):t).length>>>0;return this.uint32(e),e&&this.me(Ye.writeBytesBuffer,e,t),this},Ye.prototype.string=function(t){var e=qe.Buffer.byteLength(t);return this.uint32(e),e&&this.me(Xe,e,t),this},Ye.ge();var ze=i,He=Me(),Qe,Ke=He.LongBits,Je=He.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function i(t){this.buf=t,this.pos=0,this.len=t.length}var $e="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new i(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new i(t);throw Error("illegal buffer")},ti=function(){return He.Buffer?function(t){return(i.create=function(t){return He.Buffer.isBuffer(t)?new Qe(t):$e(t)})(t)}:$e};function ei(){var t=new Ke(0,0),e=0;if(!(4<this.len-this.pos)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,4<this.len-this.pos){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function ii(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function ri(){if(this.pos+8>this.len)throw a(this,8);return new Ke(ii(this.buf,this.pos+=4),ii(this.buf,this.pos+=4))}i.create=ti(),i.prototype._e=He.Array.prototype.subarray||He.Array.prototype.slice,i.prototype.uint32=(()=>{var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)||!((this.pos+=5)>this.len))return t;throw this.pos=this.len,a(this,10)}})(),i.prototype.int32=function(){return 0|this.uint32()},i.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},i.prototype.bool=function(){return 0!==this.uint32()},i.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return ii(this.buf,this.pos+=4)},i.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|ii(this.buf,this.pos+=4)},i.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=He.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},i.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=He.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},i.prototype.bytes=function(){var t=this.uint32(),e=this.pos,i=this.pos+t;if(i>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,i):e===i?new this.buf.constructor(0):this._e.call(this.buf,e,i)},i.prototype.string=function(){var t=this.bytes();return Je.read(t,0,t.length)},i.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},i.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},i.ge=function(t){Qe=t,i.create=ti(),Qe.ge();var e=He.Long?"toLong":"toNumber";He.merge(i.prototype,{int64:function(){return ei.call(this)[e](!1)},uint64:function(){return ei.call(this)[e](!0)},sint64:function(){return ei.call(this).zzDecode()[e](!1)},fixed64:function(){return ri.call(this)[e](!0)},sfixed64:function(){return ri.call(this)[e](!1)}})};var ni=oi,si=ze,li=((oi.prototype=Object.create(si.prototype)).constructor=oi,Me());function oi(t){si.call(this,t)}oi.ge=function(){li.Buffer&&(oi.prototype._e=li.Buffer.prototype.slice)},oi.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},oi.ge();var hi={},ai=fi,ui=Me();function fi(t,e,i){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");ui.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(i)}(fi.prototype=Object.create(ui.EventEmitter.prototype)).constructor=fi,fi.prototype.rpcCall=function t(i,e,r,n,s){if(!n)throw TypeError("request must be specified");var l=this;if(!s)return ui.asPromise(t,l,i,e,r,n);if(l.rpcImpl)try{return l.rpcImpl(i,e[l.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(t,e){if(t)return l.emit("error",t,i),s(t);if(null!==e){if(!(e instanceof r))try{e=r[l.responseDelimited?"decodeDelimited":"decode"](e)}catch(t){return l.emit("error",t,i),s(t)}return l.emit("data",e,i),s(null,e)}l.end(!0)})}catch(t){l.emit("error",t,i),setTimeout(function(){s(t)},0)}else setTimeout(function(){s(Error("already ended"))},0)},fi.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},hi.Service=ai;var ci={},di=((()=>{var t=te;function e(){t.util.ge(),t.Writer.ge(t.BufferWriter),t.Reader.ge(t.BufferReader)}t.build="minimal",t.Writer=Ne,t.BufferWriter=We,t.Reader=ze,t.BufferReader=ni,t.util=Me(),t.rpc=hi,t.roots=ci,t.configure=e,e()})(),{exports:{}}),pi=vi;function vi(e,i){"string"==typeof e&&(i=e,e=void 0);var h=[];function a(t){if("string"!=typeof t){var e=u();if(vi.verbose,e="return "+e,t){for(var i=Object.keys(t),r=new Array(i.length+1),n=new Array(i.length),s=0;s<i.length;)r[s]=i[s],n[s]=t[i[s++]];return r[s]=e,Function.apply(null,r).apply(null,n)}return Function(e)()}for(var l=new Array(arguments.length-1),o=0;o<l.length;)l[o]=arguments[++o];if(o=0,t=t.replace(/%([%dfijs])/g,function(t,e){var i=l[o++];switch(e){case"d":case"f":return String(Number(i));case"i":return String(Math.floor(i));case"j":return JSON.stringify(i);case"s":return String(i)}return"%"}),o!==l.length)throw Error("parameter count mismatch");return h.push(t),a}function u(t){return"function "+(t||i||"")+"("+(e&&e.join(",")||"")+"){\n  "+h.join("\n  ")+"\n}"}return a.toString=u,a}vi.verbose=!1;var bi=_i,yi=ne(),gi=be(),mi=gi("fs");function _i(i,r,n){return r="function"==typeof r?(n=r,{}):r||{},n?!r.xhr&&mi&&mi.readFile?mi.readFile(i,function(t,e){return t&&"undefined"!=typeof XMLHttpRequest?_i.xhr(i,r,n):t?n(t):n(null,r.binary?e:e.toString("utf8"))}):_i.xhr(i,r,n):yi(_i,this,i,r)}_i.xhr=function(t,i,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(i.binary){if(!(t=n.response))for(var t=[],e=0;e<n.responseText.length;++e)t.push(255&n.responseText.charCodeAt(e));return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return r(null,n.responseText)}},i.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",t),n.send()};var wi={},xi=((()=>{var t=wi,n=t.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},r=t.normalize=function(t){var e=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),i=n(t),t="";i&&(t=e.shift()+"/");for(var r=0;r<e.length;)".."===e[r]?0<r&&".."!==e[r-1]?e.splice(--r,2):i?e.splice(r,1):++r:"."===e[r]?e.splice(r,1):++r;return t+e.join("/")};t.resolve=function(t,e,i){return i||(e=r(e)),!n(e)&&(t=(t=i?t:r(t)).replace(/(?:\/|^)[^/]+$/,"")).length?r(t+"/"+e):e}})(),{}),Oi,ji,ki,Ei,Mi,Ni,Ti,Ai,Ri,Ii,Li,Si,Fi;function Pi(){var t,e,n;return Oi||(Oi=1,t=xi,e=_(),n=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"],t.basic=i([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),t.defaults=i([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",e.emptyArray,null]),t.long=i([0,0,0,1,1],7),t.mapKey=i([0,0,0,5,5,0,0,0,1,1,0,2],2),t.packed=i([1,5,0,0,0,5,5,0,0,0,1,1,0])),xi;function i(t,e){var i=0,r={};for(e|=0;i<t.length;)r[n[i+e]]=t[i++];return r}}function Gi(){var o,e,h,a,i,u;return ki||(ki=1,ji=l,o=vr(),((l.prototype=Object.create(o.prototype)).constructor=l).className="Field",e=br(),h=Pi(),a=_(),u=/^required|optional|repeated$/,l.fromJSON=function(t,e){return new l(t,e.id,e.type,e.rule,e.extend,e.options,e.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this.we&&(this.we=!1!==this.getOption("packed")),this.we}}),l.prototype.setOption=function(t,e,i){return"packed"===t&&(this.we=null),o.prototype.setOption.call(this,t,e,i)},l.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},l.prototype.resolve=function(){var t;return this.resolved?this:(void 0===(this.typeDefault=h.defaults[this.type])&&(this.resolvedType=(this.declaringField||this).parent.lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof e)&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault]),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof e)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long?(this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault)):this.bytes&&"string"==typeof this.typeDefault&&(a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,t=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,t=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=t),this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),o.prototype.resolve.call(this))},l.d=function(i,r,n,s){return"function"==typeof r?r=a.decorateType(r).name:r&&"object"==typeof r&&(r=a.decorateEnum(r).name),function(t,e){a.decorateType(t.constructor).add(new l(e,i,r,n,{default:s}))}},l.ge=function(t){i=t}),ji;function l(t,e,i,r,n,s,l){if(a.isObject(r)?(l=n,s=r,r=n=void 0):a.isObject(n)&&(l=s,s=n,n=void 0),o.call(this,t,s),!a.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!a.isString(i))throw TypeError("type must be a string");if(void 0!==r&&!u.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==n&&!a.isString(n))throw TypeError("extend must be a string");this.rule=(r="proto3_optional"===r?"optional":r)&&"optional"!==r?r:void 0,this.type=i,this.id=e,this.extend=n||void 0,this.required="required"===r,this.optional=!this.required,this.repeated="repeated"===r,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==h.long[i],this.bytes="bytes"===i,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.we=null,this.comment=l}}function Di(){var n,i,r;return Mi||(Mi=1,Ei=s,n=vr(),((s.prototype=Object.create(n.prototype)).constructor=s).className="OneOf",i=Gi(),r=_(),s.fromJSON=function(t,e){return new s(t,e.oneof,e.options,e.comment)},s.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return r.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},s.prototype.add=function(t){if(t instanceof i)return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),l(t.partOf=this),this;throw TypeError("field must be a Field")},s.prototype.remove=function(t){if(!(t instanceof i))throw TypeError("field must be a Field");var e=this.fieldsArray.indexOf(t);if(e<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(e,1),-1<(e=this.oneof.indexOf(t.name))&&this.oneof.splice(e,1),t.partOf=null,this},s.prototype.onAdd=function(t){n.prototype.onAdd.call(this,t);for(var e=0;e<this.oneof.length;++e){var i=t.get(this.oneof[e]);i&&!i.partOf&&(i.partOf=this).fieldsArray.push(i)}l(this)},s.prototype.onRemove=function(t){for(var e,i=0;i<this.fieldsArray.length;++i)(e=this.fieldsArray[i]).parent&&e.parent.remove(e);n.prototype.onRemove.call(this,t)},s.d=function(){for(var i=new Array(arguments.length),t=0;t<arguments.length;)i[t]=arguments[t++];return function(t,e){r.decorateType(t.constructor).add(new s(e,i)),Object.defineProperty(t,e,{get:r.oneOfGetter(i),set:r.oneOfSetter(i)})}}),Ei;function s(t,e,i,r){if(Array.isArray(e)||(i=e,e=void 0),n.call(this,t,i),void 0!==e&&!Array.isArray(e))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=r}function l(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}}function Vi(){var i,n,s,l,o,h,a;return Ti||(Ti=1,Ni=u,i=vr(),((u.prototype=Object.create(i.prototype)).constructor=u).className="Namespace",n=Gi(),s=Di(),l=_(),u.fromJSON=function(t,e){return new u(t,e.options).addJSON(e.nested)},u.arrayToJSON=e,u.isReservedId=function(t,e){if(t)for(var i=0;i<t.length;++i)if("string"!=typeof t[i]&&t[i][0]<=e&&t[i][1]>e)return!0;return!1},u.isReservedName=function(t,e){if(t)for(var i=0;i<t.length;++i)if(t[i]===e)return!0;return!1},Object.defineProperty(u.prototype,"nestedArray",{get:function(){return this.xe||(this.xe=l.toArray(this.nested))}}),u.prototype.toJSON=function(t){return l.toObject(["options",this.options,"nested",e(this.nestedArray,t)])},u.prototype.addJSON=function(t){if(t)for(var e,i=Object.keys(t),r=0;r<i.length;++r)e=t[i[r]],this.add((void 0!==e.fields?o:void 0!==e.values?a:void 0!==e.methods?h:void 0!==e.id?n:u).fromJSON(i[r],e));return this},u.prototype.get=function(t){return this.nested&&this.nested[t]||null},u.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof a)return this.nested[t].values;throw Error("no such enum: "+t)},u.prototype.add=function(t){if(!(t instanceof n&&void 0!==t.extend||t instanceof o||t instanceof a||t instanceof h||t instanceof u||t instanceof s))throw TypeError("object must be a valid nested object");if(this.nested){var e=this.get(t.name);if(e){if(!(e instanceof u&&t instanceof u)||e instanceof o||e instanceof h)throw Error("duplicate name '"+t.name+"' in "+this);for(var i=e.nestedArray,r=0;r<i.length;++r)t.add(i[r]);this.remove(e),this.nested||(this.nested={}),t.setOptions(e.options,!0)}}else this.nested={};return(this.nested[t.name]=t).onAdd(this),f(this)},u.prototype.remove=function(t){if(!(t instanceof i))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),f(this)},u.prototype.define=function(t,e){if(l.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var i=this;0<t.length;){var r=t.shift();if(i.nested&&i.nested[r]){if(!((i=i.nested[r])instanceof u))throw Error("path conflicts with non-namespace objects")}else i.add(i=new u(r))}return e&&i.addJSON(e),i},u.prototype.resolveAll=function(){for(var t=this.nestedArray,e=0;e<t.length;)t[e]instanceof u?t[e++].resolveAll():t[e++].resolve();return this.resolve()},u.prototype.lookup=function(t,e,i){if("boolean"==typeof e?(i=e,e=void 0):e&&!Array.isArray(e)&&(e=[e]),l.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),e);var r=this.get(t[0]);if(r){if(1===t.length){if(!e||-1<e.indexOf(r.constructor))return r}else if(r instanceof u&&(r=r.lookup(t.slice(1),e,!0)))return r}else for(var n=0;n<this.nestedArray.length;++n)if(this.xe[n]instanceof u&&(r=this.xe[n].lookup(t,e,!0)))return r;return null===this.parent||i?null:this.parent.lookup(t,e)},u.prototype.lookupType=function(t){var e=this.lookup(t,[o]);if(e)return e;throw Error("no such type: "+t)},u.prototype.lookupEnum=function(t){var e=this.lookup(t,[a]);if(e)return e;throw Error("no such Enum '"+t+"' in "+this)},u.prototype.lookupTypeOrEnum=function(t){var e=this.lookup(t,[o,a]);if(e)return e;throw Error("no such Type or Enum '"+t+"' in "+this)},u.prototype.lookupService=function(t){var e=this.lookup(t,[h]);if(e)return e;throw Error("no such Service '"+t+"' in "+this)},u.ge=function(t,e,i){o=t,h=e,a=i}),Ni;function e(t,e){if(t&&t.length){for(var i={},r=0;r<t.length;++r)i[t[r].name]=t[r].toJSON(e);return i}}function u(t,e){i.call(this,t,e),this.nested=void 0,this.xe=null}function f(t){return t.xe=null,t}}function Bi(){var l,t,o;return Ri||(Ri=1,Ai=s,l=Gi(),((s.prototype=Object.create(l.prototype)).constructor=s).className="MapField",t=Pi(),o=_(),s.fromJSON=function(t,e){return new s(t,e.id,e.keyType,e.type,e.options,e.comment)},s.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===t.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return l.prototype.resolve.call(this)},s.d=function(i,r,n){return"function"==typeof n?n=o.decorateType(n).name:n&&"object"==typeof n&&(n=o.decorateEnum(n).name),function(t,e){o.decorateType(t.constructor).add(new s(e,i,r,n))}}),Ai;function s(t,e,i,r,n,s){if(l.call(this,t,e,r,void 0,void 0,n,s),!o.isString(i))throw TypeError("keyType must be a string");this.keyType=i,this.resolvedKeyType=null,this.map=!0}}function Zi(){var a,u;return Li||(Li=1,Ii=i,a=vr(),((i.prototype=Object.create(a.prototype)).constructor=i).className="Method",u=_(),i.fromJSON=function(t,e){return new i(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options,e.comment,e.parsedOptions)},i.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return u.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),a.prototype.resolve.call(this))}),Ii;function i(t,e,i,r,n,s,l,o,h){if(u.isObject(n)?(l=n,n=s=void 0):u.isObject(s)&&(l=s,s=void 0),void 0!==e&&!u.isString(e))throw TypeError("type must be a string");if(!u.isString(i))throw TypeError("requestType must be a string");if(!u.isString(r))throw TypeError("responseType must be a string");a.call(this,t,l),this.type=e||"rpc",this.requestType=i,this.requestStream=!!n||void 0,this.responseType=r,this.responseStream=!!s||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=o,this.parsedOptions=h}}function Ci(){var r,s,o,h;return Fi||(Fi=1,Si=l,r=Vi(),((l.prototype=Object.create(r.prototype)).constructor=l).className="Service",s=Zi(),o=_(),h=hi,l.fromJSON=function(t,e){var i=new l(t,e.options);if(e.methods)for(var r=Object.keys(e.methods),n=0;n<r.length;++n)i.add(s.fromJSON(r[n],e.methods[r[n]]));return e.nested&&i.addJSON(e.nested),i.comment=e.comment,i},l.prototype.toJSON=function(t){var e=r.prototype.toJSON.call(this,t),i=!!t&&Boolean(t.keepComments);return o.toObject(["options",e&&e.options||void 0,"methods",r.arrayToJSON(this.methodsArray,t)||{},"nested",e&&e.nested||void 0,"comment",i?this.comment:void 0])},Object.defineProperty(l.prototype,"methodsArray",{get:function(){return this.Oe||(this.Oe=o.toArray(this.methods))}}),l.prototype.get=function(t){return this.methods[t]||r.prototype.get.call(this,t)},l.prototype.resolveAll=function(){for(var t=this.methodsArray,e=0;e<t.length;++e)t[e].resolve();return r.prototype.resolve.call(this)},l.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof s?e((this.methods[t.name]=t).parent=this):r.prototype.add.call(this,t)},l.prototype.remove=function(t){if(t instanceof s){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,e(this)}return r.prototype.remove.call(this,t)},l.prototype.create=function(t,e,i){for(var r,n=new h.Service(t,e,i),s=0;s<this.methodsArray.length;++s){var l=o.lcFirst((r=this.Oe[s]).resolve().name).replace(/[^$\w_]/g,"");n[l]=o.codegen(["r","c"],o.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return n}),Si;function l(t,e){r.call(this,t,e),this.methods={},this.Oe=null}function e(t){return t.Oe=null,t}}var Wi=Hi,Ui=Me(),qi,Yi,Xi,zi;function Hi(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)this[e[i]]=t[e[i]]}function Qi(){var o,h,a;return Yi||(Yi=1,qi=function(t){var e=a.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(t){return t.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break");e("switch(t>>>3){");for(var i=0;i<t.fieldsArray.length;++i){var r=t.je[i].resolve(),n=r.resolvedType instanceof o?"int32":r.type,s="m"+a.safeProp(r.name);e("case %i:",r.id),r.map?(e("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),void 0!==h.defaults[r.keyType]?e("k=%j",h.defaults[r.keyType]):e("k=null"),void 0!==h.defaults[n]?e("value=%j",h.defaults[n]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",r.keyType)("case 2:"),void 0===h.basic[n]?e("value=types[%i].decode(r,r.uint32())",i):e("value=r.%s()",n),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==h.long[r.keyType]?e('%s[typeof k==="object"?util.longToHash(k):k]=value',s):e("%s[k]=value",s)):r.repeated?(e("if(!(%s&&%s.length))",s,s)("%s=[]",s),void 0!==h.packed[n]&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,n)("}else"),void 0===h.basic[n]?e(r.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",s,i):e("%s.push(r.%s())",s,n)):void 0===h.basic[n]?e(r.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",s,i):e("%s=r.%s()",s,n),e("break")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),i=0;i<t.je.length;++i){var l=t.je[i];l.required&&e("if(!m.hasOwnProperty(%j))",l.name)("throw util.ProtocolError(%j,{instance:m})","missing required '"+l.name+"'")}return e("return m")},o=br(),h=Pi(),a=_()),qi}function Ki(){var l,h;return zi||(zi=1,Xi=function(t){var e=h.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),i=t.oneofsArray,r={};i.length&&e("var p={}");for(var n=0;n<t.fieldsArray.length;++n){var s,l=t.je[n].resolve(),o="m"+h.safeProp(l.name);l.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",o,l.name),l.map?(e("if(!util.isObject(%s))",o)("return%j",a(l,"object"))("var k=Object.keys(%s)",o)("for(var i=0;i<k.length;++i){"),((t,e,i)=>{switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",i)("return%j",a(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",i)("return%j",a(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",i)("return%j",a(e,"boolean key"))}})(e,l,"k[i]"),u(e,l,n,o+"[k[i]]")("}")):l.repeated?(e("if(!Array.isArray(%s))",o)("return%j",a(l,"array"))("for(var i=0;i<%s.length;++i){",o),u(e,l,n,o+"[i]")("}")):(l.partOf&&(s=h.safeProp(l.partOf.name),1===r[l.partOf.name]&&e("if(p%s===1)",s)("return%j",l.partOf.name+": multiple values"),r[l.partOf.name]=1,e("p%s=1",s)),u(e,l,n,o)),l.optional&&e("}")}return e("return null")},l=br(),h=_()),Xi;function a(t,e){return t.name+": "+e+(t.repeated&&"array"!==e?"[]":t.map&&"object"!==e?"{k:"+t.keyType+"}":"")+" expected"}function u(t,e,i,r){if(e.resolvedType)if(e.resolvedType instanceof l){t("switch(%s){",r)("default:")("return%j",a(e,"enum value"));for(var n=Object.keys(e.resolvedType.values),s=0;s<n.length;++s)t("case %i:",e.resolvedType.values[n[s]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",i,r)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",r)("return%j",a(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",a(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',r)("return%j",a(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',r)("return%j",a(e,"boolean"));break;case"string":t("if(!util.isString(%s))",r)("return%j",a(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",a(e,"buffer"))}return t}}Hi.create=function(t){return this.$type.create(t)},Hi.encode=function(t,e){return this.$type.encode(t,e)},Hi.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e)},Hi.decode=function(t){return this.$type.decode(t)},Hi.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},Hi.verify=function(t){return this.$type.verify(t)},Hi.fromObject=function(t){return this.$type.fromObject(t)},Hi.toObject=function(t,e){return this.$type.toObject(t,e)},Hi.prototype.toJSON=function(){return this.$type.toObject(this,Ui.toJSONOptions)};var Ji={},$i;function tr(){var t,c,d;return $i||($i=1,t=Ji,c=br(),d=_(),t.fromObject=function(t){var e=t.fieldsArray,i=d.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!e.length)return i("return new this.ctor");i("var m=new this.ctor");for(var r=0;r<e.length;++r){var n=e[r].resolve(),s=d.safeProp(n.name);n.map?(i("if(d%s){",s)('if(typeof d%s!=="object")',s)("throw TypeError(%j)",n.fullName+": object expected")("m%s={}",s)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",s),l(i,n,r,s+"[ks[i]]")("}")("}")):n.repeated?(i("if(d%s){",s)("if(!Array.isArray(d%s))",s)("throw TypeError(%j)",n.fullName+": array expected")("m%s=[]",s)("for(var i=0;i<d%s.length;++i){",s),l(i,n,r,s+"[i]")("}")("}")):(n.resolvedType instanceof c||i("if(d%s!=null){",s),l(i,n,r,s),n.resolvedType instanceof c||i("}"))}return i("return m")},t.toObject=function(t){var e=t.fieldsArray.slice().sort(d.compareFieldsById);if(!e.length)return d.codegen()("return {}");for(var i=d.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],n=[],s=[],l=0;l<e.length;++l)e[l].partOf||(e[l].resolve().repeated?r:e[l].map?n:s).push(e[l]);if(r.length){for(i("if(o.arrays||o.defaults){"),l=0;l<r.length;++l)i("d%s=[]",d.safeProp(r[l].name));i("}")}if(n.length){for(i("if(o.objects||o.defaults){"),l=0;l<n.length;++l)i("d%s={}",d.safeProp(n[l].name));i("}")}if(s.length){for(i("if(o.defaults){"),l=0;l<s.length;++l){var o,h=s[l],a=d.safeProp(h.name);h.resolvedType instanceof c?i("d%s=o.enums===String?%j:%j",a,h.resolvedType.valuesById[h.typeDefault],h.typeDefault):h.long?i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",h.typeDefault.low,h.typeDefault.high,h.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",a)("}else")("d%s=o.longs===String?%j:%i",a,h.typeDefault.toString(),h.typeDefault.toNumber()):h.bytes?(o="["+Array.prototype.slice.call(h.typeDefault).join(",")+"]",i("if(o.bytes===String)d%s=%j",a,String.fromCharCode.apply(String,h.typeDefault))("else{")("d%s=%s",a,o)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",a,a)("}")):i("d%s=%j",a,h.typeDefault)}i("}")}for(var u=!1,l=0;l<e.length;++l){var h=e[l],f=t.je.indexOf(h),a=d.safeProp(h.name);h.map?(u||(u=!0,i("var ks2")),i("if(m%s&&(ks2=Object.keys(m%s)).length){",a,a)("d%s={}",a)("for(var j=0;j<ks2.length;++j){"),p(i,h,f,a+"[ks2[j]]")("}")):h.repeated?(i("if(m%s&&m%s.length){",a,a)("d%s=[]",a)("for(var j=0;j<m%s.length;++j){",a),p(i,h,f,a+"[j]")("}")):(i("if(m%s!=null&&m.hasOwnProperty(%j)){",a,h.name),p(i,h,f,a),h.partOf&&i("if(o.oneofs)")("d%s=%j",d.safeProp(h.partOf.name),h.name)),i("}")}return i("return d")}),Ji;function l(t,e,i,r){if(e.resolvedType)if(e.resolvedType instanceof c){t("switch(d%s){",r);for(var n=e.resolvedType.values,s=Object.keys(n),l=0;l<s.length;++l)e.repeated&&n[s[l]]===e.typeDefault&&t("default:"),t("case%j:",s[l])("case %i:",n[s[l]])("m%s=%j",r,n[s[l]])("break");t("}")}else t('if(typeof d%s!=="object")',r)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,i,r);else{var o=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",r,r);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,o)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,o?"true":"");break;case"bytes":t('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":t("m%s=String(d%s)",r,r);break;case"bool":t("m%s=Boolean(d%s)",r,r)}}return t}function p(t,e,i,r){if(e.resolvedType)e.resolvedType instanceof c?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,i,r,r):t("d%s=types[%i].toObject(m%s,o)",r,i,r);else{var n=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":n=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,n?"true":"",r);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:t("d%s=m%s",r,r)}}return t}}var er={},ir,rr,nr,sr,lr,or,hr,ar,ur,fr,cr;function dr(){var l,o,h,a,u,f,n,s,c,d,p,v,b,y,g;return rr||(rr=1,ir=m,l=Vi(),((m.prototype=Object.create(l.prototype)).constructor=m).className="Type",o=br(),h=Di(),a=Gi(),u=Bi(),f=Ci(),n=Wi,s=ze,c=Ne,d=_(),p=yr(),v=Qi(),b=Ki(),y=tr(),g=er,Object.defineProperties(m.prototype,{fieldsById:{get:function(){if(!this.ke){this.ke={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var i=this.fields[t[e]],r=i.id;if(this.ke[r])throw Error("duplicate id "+r+" in "+this);this.ke[r]=i}}return this.ke}},fieldsArray:{get:function(){return this.je||(this.je=d.toArray(this.fields))}},oneofsArray:{get:function(){return this.Ee||(this.Ee=d.toArray(this.oneofs))}},ctor:{get:function(){return this.Me||(this.ctor=m.generateConstructor(this)())},set:function(t){for(var e=t.prototype,i=(e instanceof n||((t.prototype=new n).constructor=t,d.merge(t.prototype,e)),t.$type=t.prototype.$type=this,d.merge(t,n,!0),this.Me=t,0);i<this.fieldsArray.length;++i)this.je[i].resolve();for(var r={},i=0;i<this.oneofsArray.length;++i)r[this.Ee[i].resolve().name]={get:d.oneOfGetter(this.Ee[i].oneof),set:d.oneOfSetter(this.Ee[i].oneof)};i&&Object.defineProperties(t.prototype,r)}}}),m.generateConstructor=function(t){for(var e,i=d.codegen(["p"],t.name),r=0;r<t.fieldsArray.length;++r)(e=t.je[r]).map?i("this%s={}",d.safeProp(e.name)):e.repeated&&i("this%s=[]",d.safeProp(e.name));return i("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},m.fromJSON=function(t,e){for(var i=new m(t,e.options),r=(i.extensions=e.extensions,i.reserved=e.reserved,Object.keys(e.fields)),n=0;n<r.length;++n)i.add((void 0!==e.fields[r[n]].keyType?u:a).fromJSON(r[n],e.fields[r[n]]));if(e.oneofs)for(r=Object.keys(e.oneofs),n=0;n<r.length;++n)i.add(h.fromJSON(r[n],e.oneofs[r[n]]));if(e.nested)for(r=Object.keys(e.nested),n=0;n<r.length;++n){var s=e.nested[r[n]];i.add((void 0!==s.id?a:void 0!==s.fields?m:void 0!==s.values?o:void 0!==s.methods?f:l).fromJSON(r[n],s))}return e.extensions&&e.extensions.length&&(i.extensions=e.extensions),e.reserved&&e.reserved.length&&(i.reserved=e.reserved),e.group&&(i.group=!0),e.comment&&(i.comment=e.comment),i},m.prototype.toJSON=function(t){var e=l.prototype.toJSON.call(this,t),i=!!t&&Boolean(t.keepComments);return d.toObject(["options",e&&e.options||void 0,"oneofs",l.arrayToJSON(this.oneofsArray,t),"fields",l.arrayToJSON(this.fieldsArray.filter(function(t){return!t.declaringField}),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",e&&e.nested||void 0,"comment",i?this.comment:void 0])},m.prototype.resolveAll=function(){for(var t=this.fieldsArray,e=0;e<t.length;)t[e++].resolve();for(var i=this.oneofsArray,e=0;e<i.length;)i[e++].resolve();return l.prototype.resolveAll.call(this)},m.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},m.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof a&&void 0===t.extend){if((this.ke||this.fieldsById)[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),(this.fields[t.name]=t).message=this,t.onAdd(this),e(this)}return t instanceof h?(this.oneofs||(this.oneofs={}),(this.oneofs[t.name]=t).onAdd(this),e(this)):l.prototype.add.call(this,t)},m.prototype.remove=function(t){if(t instanceof a&&void 0===t.extend){if(this.fields&&this.fields[t.name]===t)return delete this.fields[t.name],t.parent=null,t.onRemove(this),e(this);throw Error(t+" is not a member of "+this)}if(t instanceof h){if(this.oneofs&&this.oneofs[t.name]===t)return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),e(this);throw Error(t+" is not a member of "+this)}return l.prototype.remove.call(this,t)},m.prototype.isReservedId=function(t){return l.isReservedId(this.reserved,t)},m.prototype.isReservedName=function(t){return l.isReservedName(this.reserved,t)},m.prototype.create=function(t){return new this.ctor(t)},m.prototype.setup=function(){for(var t=this.fullName,e=[],i=0;i<this.fieldsArray.length;++i)e.push(this.je[i].resolve().resolvedType);this.encode=p(this)({Writer:c,types:e,util:d}),this.decode=v(this)({Reader:s,types:e,util:d}),this.verify=b(this)({types:e,util:d}),this.fromObject=y.fromObject(this)({types:e,util:d}),this.toObject=y.toObject(this)({types:e,util:d});var r,t=g[t];return t&&((r=Object.create(this)).fromObject=this.fromObject,this.fromObject=t.fromObject.bind(r),r.toObject=this.toObject,this.toObject=t.toObject.bind(r)),this},m.prototype.encode=function(t,e){return this.setup().encode(t,e)},m.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim()},m.prototype.decode=function(t,e){return this.setup().decode(t,e)},m.prototype.decodeDelimited=function(t){return t instanceof s||(t=s.create(t)),this.decode(t,t.uint32())},m.prototype.verify=function(t){return this.setup().verify(t)},m.prototype.fromObject=function(t){return this.setup().fromObject(t)},m.prototype.toObject=function(t,e){return this.setup().toObject(t,e)},m.d=function(e){return function(t){d.decorateType(t,e)}}),ir;function m(t,e){l.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this.ke=null,this.je=null,this.Ee=null,this.Me=null}function e(t){return t.ke=t.je=t.Ee=null,delete t.encode,delete t.decode,delete t.verify,t}}function pr(){var r,n,s,l,d,o,p,v,h;return sr||(sr=1,nr=i,r=Vi(),((i.prototype=Object.create(r.prototype)).constructor=i).className="Root",n=Gi(),s=br(),l=Di(),d=_(),i.fromJSON=function(t,e){return e=e||new i,t.options&&e.setOptions(t.options),e.addJSON(t.nested)},i.prototype.resolvePath=d.path.resolve,i.prototype.fetch=d.fetch,i.prototype.load=function t(e,s,n){"function"==typeof s&&(n=s,s=void 0);var l=this;if(!n)return d.asPromise(t,l,e,s);var o=n===b;function h(t,e){if(n){var i=n;if(n=null,o)throw t;i(t,e)}}function a(t){var e=t.lastIndexOf("google/protobuf/");if(-1<e){t=t.substring(e);if(t in v)return t}return null}function u(t,e){try{if(d.isString(e)&&"{"===e.charAt(0)&&(e=JSON.parse(e)),d.isString(e)){p.filename=t;var i,r=p(e,l,s),n=0;if(r.imports)for(;n<r.imports.length;++n)(i=a(r.imports[n])||l.resolvePath(t,r.imports[n]))&&f(i);if(r.weakImports)for(n=0;n<r.weakImports.length;++n)(i=a(r.weakImports[n])||l.resolvePath(t,r.weakImports[n]))&&f(i,!0)}else l.setOptions(e.options).addJSON(e.nested)}catch(t){h(t)}o||c||h(null,l)}function f(i,r){if(!(-1<l.files.indexOf(i)))if(l.files.push(i),i in v)o?u(i,v[i]):(++c,setTimeout(function(){--c,u(i,v[i])}));else if(o){var t;try{t=d.fs.readFileSync(i).toString("utf8")}catch(t){return void(r||h(t))}u(i,t)}else++c,l.fetch(i,function(t,e){--c,n&&(t?r?c||h(null,l):h(t):u(i,e))})}var c=0;d.isString(e)&&(e=[e]);for(var i,r=0;r<e.length;++r)(i=l.resolvePath("",e[r]))&&f(i);if(o)return l;c||h(null,l)},i.prototype.loadSync=function(t,e){if(d.isNode)return this.load(t,e,b);throw Error("not supported")},i.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(t){return"'extend "+t.extend+"' in "+t.parent.fullName}).join(", "));return r.prototype.resolveAll.call(this)},h=/^[A-Z]/,i.prototype.Ne=function(t){if(t instanceof n)void 0===t.extend||t.extensionField||a(0,t)||this.deferred.push(t);else if(t instanceof s)h.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof l)){if(t instanceof o)for(var e=0;e<this.deferred.length;)a(0,this.deferred[e])?this.deferred.splice(e,1):++e;for(var i=0;i<t.nestedArray.length;++i)this.Ne(t.xe[i]);h.test(t.name)&&(t.parent[t.name]=t)}},i.prototype.Te=function(t){var e;if(t instanceof n)void 0!==t.extend&&(t.extensionField?(t.extensionField.parent.remove(t.extensionField),t.extensionField=null):-1<(e=this.deferred.indexOf(t))&&this.deferred.splice(e,1));else if(t instanceof s)h.test(t.name)&&delete t.parent[t.name];else if(t instanceof r){for(var i=0;i<t.nestedArray.length;++i)this.Te(t.xe[i]);h.test(t.name)&&delete t.parent[t.name]}},i.ge=function(t,e,i){o=t,p=e,v=i}),nr;function i(t){r.call(this,"",t),this.deferred=[],this.files=[]}function b(){}function a(t,e){var i,r=e.parent.lookup(e.extend);if(r)return((i=new n(e.fullName,e.id,e.type,e.rule,void 0,e.options)).declaringField=e).extensionField=i,r.add(i),1}}function _(){var i,t,r,n,e,s,l,o;return lr||(lr=1,i=di.exports=Me(),t=ci,i.codegen=pi,i.fetch=bi,i.path=wi,i.fs=i.inquire("fs"),i.toArray=function(t){if(t){for(var e=Object.keys(t),i=new Array(e.length),r=0;r<e.length;)i[r]=t[e[r++]];return i}return[]},i.toObject=function(t){for(var e={},i=0;i<t.length;){var r=t[i++],n=t[i++];void 0!==n&&(e[r]=n)}return e},e=/\\/g,s=/"/g,i.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},i.safeProp=function(t){return!/^[$\w_]+$/.test(t)||i.isReserved(t)?'["'+t.replace(e,"\\\\").replace(s,'\\"')+'"]':"."+t},i.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},l=/_([a-z])/g,i.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(l,function(t,e){return e.toUpperCase()})},i.compareFieldsById=function(t,e){return t.id-e.id},i.decorateType=function(t,e){return t.$type?(e&&t.$type.name!==e&&(i.decorateRoot.remove(t.$type),t.$type.name=e,i.decorateRoot.add(t.$type)),t.$type):(e=new(r=r||dr())(e||t.name),i.decorateRoot.add(e),e.ctor=t,Object.defineProperty(t,"$type",{value:e,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:e,enumerable:!1}),e)},o=0,i.decorateEnum=function(t){var e;return t.$type||(e=new(n=n||br())("Enum"+o++,t),i.decorateRoot.add(e),Object.defineProperty(t,"$type",{value:e,enumerable:!1}),e)},i.setProperty=function(t,e,i){if("object"!=typeof t)throw TypeError("dst must be an object");if(e)return function t(e,i,r){var n=i.shift();return"__proto__"!==n&&"prototype"!==n&&(0<i.length?e[n]=t(e[n]||{},i,r):((i=e[n])&&(r=[].concat(i).concat(r)),e[n]=r)),e}(t,e=e.split("."),i);throw TypeError("path must be specified")},Object.defineProperty(i,"decorateRoot",{get:function(){return t.decorated||(t.decorated=new(pr()))}})),di.exports}function vr(){var l,e;return hr||(hr=1,(or=t).className="ReflectionObject",l=_(),Object.defineProperties(t.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}}),t.prototype.toJSON=function(){throw Error()},t.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;t=t.root;t instanceof e&&t.Ne(this)},t.prototype.onRemove=function(t){t=t.root;t instanceof e&&t.Te(this),this.parent=null,this.resolved=!1},t.prototype.resolve=function(){return this.resolved||this.root instanceof e&&(this.resolved=!0),this},t.prototype.getOption=function(t){if(this.options)return this.options[t]},t.prototype.setOption=function(t,e,i){return i&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=e),this},t.prototype.setParsedOption=function(e,t,i){this.parsedOptions||(this.parsedOptions=[]);var r,n,s=this.parsedOptions;return i?(r=s.find(function(t){return Object.prototype.hasOwnProperty.call(t,e)}))?(n=r[e],l.setProperty(n,i,t)):((r={})[e]=l.setProperty({},i,t),s.push(r)):((n={})[e]=t,s.push(n)),this},t.prototype.setOptions=function(t,e){if(t)for(var i=Object.keys(t),r=0;r<i.length;++r)this.setOption(i[r],t[i[r]],e);return this},t.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t},t.ge=function(t){e=t}),or;function t(t,e){if(!l.isString(t))throw TypeError("name must be a string");if(e&&!l.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}}function br(){var o,e,r;return ur||(ur=1,ar=i,o=vr(),((i.prototype=Object.create(o.prototype)).constructor=i).className="Enum",e=Vi(),r=_(),i.fromJSON=function(t,e){t=new i(t,e.values,e.options,e.comment,e.comments);return t.reserved=e.reserved,t},i.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return r.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},i.prototype.add=function(t,e,i){if(!r.isString(t))throw TypeError("name must be a string");if(!r.isInteger(e))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(e))throw Error("id "+e+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[e]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+e+" in "+this);this.values[t]=e}else this.valuesById[this.values[t]=e]=t;return this.comments[t]=i||null,this},i.prototype.remove=function(t){if(!r.isString(t))throw TypeError("name must be a string");var e=this.values[t];if(null==e)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[e],delete this.values[t],delete this.comments[t],this},i.prototype.isReservedId=function(t){return e.isReservedId(this.reserved,t)},i.prototype.isReservedName=function(t){return e.isReservedName(this.reserved,t)}),ar;function i(t,e,i,r,n){if(o.call(this,t,i),e&&"object"!=typeof e)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=r,this.comments=n||{},this.reserved=void 0,e)for(var s=Object.keys(e),l=0;l<s.length;++l)"number"==typeof e[s[l]]&&(this.valuesById[this.values[s[l]]=e[s[l]]]=s[l])}}function yr(){var a,u,f;return cr||(cr=1,fr=function(t){for(var e,i=f.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),r=t.fieldsArray.slice().sort(f.compareFieldsById),n=0;n<r.length;++n){var s=r[n].resolve(),l=t.je.indexOf(s),o=s.resolvedType instanceof a?"int32":s.type,h=u.basic[o];e="m"+f.safeProp(s.name),s.map?(i("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",e,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",e)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|u.mapKey[s.keyType],s.keyType),void 0===h?i("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,e):i(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,o,e),i("}")("}")):s.repeated?(i("if(%s!=null&&%s.length){",e,e),s.packed&&void 0!==u.packed[o]?i("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",e)("w.%s(%s[i])",o,e)("w.ldelim()"):(i("for(var i=0;i<%s.length;++i)",e),void 0===h?c(i,s,l,e+"[i]"):i("w.uint32(%i).%s(%s[i])",(s.id<<3|h)>>>0,o,e)),i("}")):(s.optional&&i("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",e,s.name),void 0===h?c(i,s,l,e):i("w.uint32(%i).%s(%s)",(s.id<<3|h)>>>0,o,e))}return i("return w")},a=br(),u=Pi(),f=_()),fr;function c(t,e,i,r){e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",i,r,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",i,r,(e.id<<3|2)>>>0)}}(()=>{var l=Wi;er[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e,i=t["@type"].substring(t["@type"].lastIndexOf("/")+1),i=this.lookup(i);if(i)return-1===(e="."===t["@type"].charAt(0)?t["@type"].substr(1):t["@type"]).indexOf("/")&&(e="/"+e),this.create({type_url:e,value:i.encode(i.fromObject(t)).finish()})}return this.fromObject(t)},toObject:function(t,e){var i,r,n="",s="";return!((t=e&&e.json&&t.type_url&&t.value&&(s=t.type_url.substring(t.type_url.lastIndexOf("/")+1),n=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1),i=this.lookup(s))?i.decode(t.value):t)instanceof this.ctor)&&t instanceof l?(i=t.$type.toObject(t,e),r="."===t.$type.fullName[0]?t.$type.fullName.substr(1):t.$type.fullName,i["@type"]=s=(n=""===n?"type.googleapis.com/":n)+r,i):this.toObject(t,e)}}})();var d=$t.exports=te;function gr(t,e,i){return(e="function"==typeof e?(i=e,new d.Root):e||new d.Root).load(t,i)}function mr(t,e){return(e=e||new d.Root).loadSync(t)}d.build="light",d.load=gr,d.loadSync=mr,d.encoder=yr(),d.decoder=Qi(),d.verifier=Ki(),d.converter=tr(),d.ReflectionObject=vr(),d.Namespace=Vi(),d.Root=pr(),d.Enum=br(),d.Type=dr(),d.Field=Gi(),d.OneOf=Di(),d.MapField=Bi(),d.Service=Ci(),d.Method=Zi(),d.Message=Wi,d.wrappers=er,d.types=Pi(),d.util=_(),d.ReflectionObject.ge(d.Root),d.Namespace.ge(d.Type,d.Service,d.Enum),d.Root.ge(d.Type),d.Field.ge(d.Type);var _r=$t.exports,wr=_r,xr=Jt(wr),Or=["TmF2aVNlZ21lbg==","YWNjZXNzaWJsZQ==","Zmlk","bmZv","Rmxvb3JHZW8=","bGlmdFR5cGU=","bGVu","dmVs","ZXh0ZW50TGF5ZQ==","RXh0ZW50Qml6SQ==","cmVhZE9ubHk=","LnByb3RvYnVm","aW50MzI=","ZG9vcnR5cGU=","R0VPUE9JTlRfTQ==","TmF2aVpvbmU=","ZW50cmFuY2VGbA==","bGVuZ3Ro","ZWxCaXpJbmZv","c3RhaXJMYXllcg==","dG9CaWQ=","R2F0ZQ==","b2Zmc2V0WQ==","Zmlkcw==","aXNTZWxlY3RhYg==","ZmxhZw==","ZXh0ZXJuYWxNbw==","bGlmdEVudHJ5","VklTRUdNRU5U","SW5kZXhJbmZv","ZGF0YQ==","ZGVsQml6SW5mbw==","bWlk","cG9pTGF5ZXI=","bW9kZWxpZA==","cGFja2Vk","dGhyb3VnaA==","bmF2aVNlZ21lbg==","bGlmdExheWVy","cmVwZWF0ZWQ=","ZGVmQ2VuWQ==","b29y","bm9kZUlk","TmF2aU1vZGVs","cmFuaw==","c25vZGU=","cHRz","ZGVmR2lk","aGFzaENvZGU=","bmVzdGVk","Ymlk","cmVxdWlyZWQ=","R0VPTElORV9OQQ==","b2Zmc2V0WA==","TmF2aU5vZGU=","bHR5cGU=","T1ZFUkxBWURBVA==","ZGVmQ2VuWA==","b3B0aW9ucw==","YmFzZUxldmVs","YXJlYQ==","TGF5ZXJHcm91cA==","ZmllbGRz","cGFzcw==","Zmxvb3Jz","SUZU","Rmxvb3JOYXZp","amF2YV9vdXRlcg==","UG9seWdvbkxhYg==","ZW50cmFuY2VUeQ==","VHlwZQ==","bmF2aVpvbmVz","ZWxMYXllcg==","YWxpYXM=","d2lkdGg=","YXllcg==","ZW50cnl0eXBlcw==","TGlmdEJpekluZg==","bm9kZXR5cGVz","amF2YV9wYWNrYQ==","bmF2aVR5cGU=","ZGF0ZVZlcg==","bGlmdEZsYWc=","Z2lk","bWF4WA==","bW5hbWU=","bWluU2NhbGVMZQ==","Zmxvb3JJZA==","X2NsYXNzbmFtZQ==","TW9kZWxCaXpJbg==","Zmxvb3I=","bmFtZQ==","c2NhbGVMZXZlbA==","RXh0ZXJuYWxNbw==","cGdpZA==","ZmlsZVZlcg==","VEFJUg==","bWlubGV2ZWw=","Rmxvb3JDb25maQ==","R2VuZXJhbEdlbw==","ZHJpdmU=","Ym9vbA==","a2V5","R0VPUE9MWUdPTg==","dG9HaWQ=","ZGVmQ2VuWg==","YnR5cGU=","R0VPUE9JTlRfUw==","cC5wbGF0Zm9ybQ==","TmF2aUZsb29y","ZmxvYXQ=","bmF2aUV4dGVudA==","UE9JQml6SW5mbw==","TGFiZWxCaXpJbg==","TGF5ZXI=","cnVsZQ==","bGlk","Y29tLmZlbmdtYQ==","c2NhbGU=","c2VnbWVudElk","ZGVzYw==","ZGVsTGF5ZXI=","R0VPUE9JTlRfUA==","cm90YXRlQW5nbA==","X0xBQkVM","cG9seWdvbkxheQ==","ZmlsZURhdGU=","R0VPUE9JTlRfTA==","U3RhaXJCaXpJbg==","ZXNjYWxhdG9yTA==","bGlua1NlZw==","QnVmZmVy","TmF2aUV4dGVudA==","Z2Vv","R0VPTElORQ==","bmF2aU5vZGVz","cmVqZWN0cw==","UG9seWdvbkJpeg==","aXNWaXNpYmxl","b25zaGlw","YnVmZmVycw==","bWF4bGV2ZWw=","ZG91Ymxl","R0VPUE9JTlRfRQ==","bmF2aQ==","Rmxvb3JCaXo=","Z1Byb3RvQnVm","T0RFTA==","ZW5hbWU=","bW9kZWxMYXllcg==","a2V5cw==","ZWlk","bGF5ZXJz","QU5PUkFNQQ==","UkRFUg==","R0VPUE9JTlQ=","QnVpbGRpbmc=","bWluWA==","TWFw","aGVpZ2h0","c3RyaW5n","dHlwZQ==","ZGVmYXVsdA==","cG9seWdvbkxhYg==","TmF2aVJlbGF0aQ==","dWludDY0","aWR4cw==","SW5mbw==","X0VYVEVOVA=="];(t=>{for(var e=218;--e;)t.push(t.shift())})(Or);class jr{constructor(){this.id={nested:{protobuf:{options:{java_package:"com.fengmap.platform.protobuf",java_outer_classname:"FloorConfigProtoBuf"},nested:{Map:{fields:{mid:{rule:"required",type:"string",id:1},fileVer:{rule:"required",type:"int32",id:2},dateVer:{rule:"required",type:"uint64",id:3},mname:{rule:"required",type:"string",id:4},hashCode:{rule:"required",type:"string",id:5},key:{type:"string",id:6},fileDate:{type:"string",id:7},desc:{type:"string",id:8},readOnly:{type:"bool",id:9,options:{default:!1}},buffers:{rule:"repeated",type:"Buffer",id:10},keys:{rule:"repeated",type:"string",id:11}},nested:{Buffer:{fields:{gid:{rule:"required",type:"int32",id:1},fileVer:{rule:"required",type:"int32",id:2},btype:{rule:"required",type:"int32",id:3},len:{rule:"required",type:"uint64",id:4},data:{rule:"required",type:"bytes",id:5}}}}},Scene:{fields:{mid:{rule:"required",type:"string",id:19},fileVer:{rule:"required",type:"int32",id:20},dateVer:{rule:"required",type:"uint64",id:21},mname:{rule:"required",type:"string",id:22},hashCode:{rule:"required",type:"string",id:23},key:{type:"string",id:24},desc:{type:"string",id:25},readOnly:{type:"bool",id:26,options:{default:!1}},x:{type:"float",id:1},y:{type:"float",id:2},z:{type:"float",id:3},minX:{type:"float",id:4},minY:{type:"float",id:5},maxX:{type:"float",id:6},maxY:{type:"float",id:7},defGid:{type:"string",id:8},defCenX:{type:"float",id:9},defCenY:{type:"float",id:10},defCenZ:{type:"float",id:11},height:{type:"float",id:12},rotateAngleX:{type:"float",id:13},rotateAngleY:{type:"float",id:14},rotateAngleZ:{type:"float",id:15},scale:{type:"float",id:16},scaleLevel:{type:"string",id:17},naviType:{type:"int32",id:28},layerGroups:{rule:"repeated",type:"LayerGroup",id:18},buildings:{rule:"repeated",type:"Building",id:27}},nested:{Layer:{fields:{lid:{type:"int32",id:1},lname:{type:"string",id:2},alias:{type:"string",id:3},ltype:{type:"Type",id:4},offsetX:{type:"float",id:5},offsetY:{type:"float",id:6},height:{type:"float",id:7},rotateAngleX:{type:"float",id:8},rotateAngleY:{type:"float",id:9},rotateAngleZ:{type:"float",id:10},minScaleLevel:{type:"float",id:11},maxScaleLevel:{type:"float",id:12},isVisible:{type:"bool",id:13},isSelectable:{type:"bool",id:14},isEditable:{type:"bool",id:15},desc:{type:"string",id:16}},nested:{Type:{values:{GEOPOINT:1,GEOPOINT_ESCALATOR:2,GEOPOINT_LIFT:3,GEOPOINT_STAIR:4,GEOPOINT_PANORAMA:5,GEOPOINT_POI:6,GEOPOINT_STORELABEL:7,GEOPOINT_NAVINODE:8,GEOPOINT_MODEL:9,GEOLINE:20,GEOLINE_NAVISEGMENT:21,GEOLINE_BORDER:22,GEOPOLYGON:30,GEOPOLYGON_EXTENT:31,GEOPOLYGON_STORE:32,GEOPOLYGON_LABEL:33,RASTERATA:40,OVERLAYDATA:50}}}},LayerGroup:{fields:{gid:{type:"int32",id:1},gname:{type:"string",id:2},alias:{type:"string",id:3},height:{type:"float",id:4},desc:{type:"string",id:5},layers:{rule:"repeated",type:"Layer",id:6},floorId:{type:"string",id:7},naviType:{type:"int32",id:8}}},Floor:{fields:{gid:{type:"int32",id:1},x:{type:"float",id:2},y:{type:"float",id:3},offsetX:{type:"float",id:4},offsetY:{type:"float",id:5},angle:{type:"float",id:6},scale:{type:"float",id:7},fids:{rule:"repeated",type:"string",id:8},pgid:{type:"int32",id:9},baseLevel:{type:"bool",id:10},minlevel:{type:"int32",id:11},maxlevel:{type:"int32",id:12},floorId:{type:"string",id:13},idxs:{rule:"repeated",type:"IndexInfo",id:14},pts:{rule:"repeated",type:"double",id:15,options:{packed:!1}}},nested:{IndexInfo:{fields:{idxs:{rule:"repeated",type:"int32",id:1,options:{packed:!1}}}}}},Building:{fields:{bid:{type:"string",id:1},name:{type:"string",id:2},ename:{type:"string",id:3},alias:{type:"string",id:4},x:{type:"float",id:5},y:{type:"float",id:6},mid:{type:"string",id:7},version:{type:"int32",id:8},floors:{rule:"repeated",type:"Floor",id:9},bcode:{type:"int32",id:10}}}}},Gate:{fields:{mid:{rule:"required",type:"string",id:1},floors:{rule:"repeated",type:"NaviFloor",id:2}},nested:{NaviFloor:{fields:{gid:{type:"int32",id:1},floorId:{type:"string",id:2},bid:{type:"string",id:3},mid:{type:"string",id:4},navi:{rule:"repeated",type:"NaviRelationship",id:5},drive:{rule:"repeated",type:"NaviRelationship",id:6},accessible:{rule:"repeated",type:"NaviRelationship",id:7}}},NaviRelationship:{fields:{eid:{rule:"required",type:"int32",id:1},type:{type:"int32",id:2},accessible:{type:"int32",id:3},idxs:{rule:"repeated",type:"IndexInfo",id:4},pts:{rule:"repeated",type:"double",id:5,options:{packed:!1}},flag:{type:"int32",id:6},toBid:{rule:"repeated",type:"string",id:7},toGid:{rule:"repeated",type:"string",id:8}},nested:{IndexInfo:{fields:{idxs:{rule:"repeated",type:"int32",id:1,options:{packed:!1}}}}}}}},FloorGeo:{fields:{mid:{rule:"required",type:"string",id:1},gid:{rule:"required",type:"int32",id:2},height:{type:"float",id:3},extentLayer:{rule:"repeated",type:"GeneralGeoInfo",id:4},modelLayer:{rule:"repeated",type:"GeneralGeoInfo",id:5},labelLayer:{rule:"repeated",type:"GeneralGeoInfo",id:6},poiLayer:{rule:"repeated",type:"GeneralGeoInfo",id:7},polygonLayer:{rule:"repeated",type:"GeneralGeoInfo",id:8},polygonLabelLayer:{rule:"repeated",type:"GeneralGeoInfo",id:9},liftLayer:{rule:"repeated",type:"GeneralGeoInfo",id:10},stairLayer:{rule:"repeated",type:"GeneralGeoInfo",id:11},escalatorLayer:{rule:"repeated",type:"GeneralGeoInfo",id:12},externalModelLayer:{rule:"repeated",type:"GeneralGeoInfo",id:13}},nested:{GeneralGeoInfo:{fields:{eid:{rule:"required",type:"int32",id:1},geo:{type:"string",id:2},height:{type:"float",id:3},area:{type:"float",id:4},idxs:{rule:"repeated",type:"IndexInfo",id:5},pts:{rule:"repeated",type:"double",id:6,options:{packed:!1}},baseheight:{type:"float",id:7}},nested:{IndexInfo:{fields:{idxs:{rule:"repeated",type:"int32",id:1,options:{packed:!1}}}}}}}},FloorBiz:{fields:{mid:{rule:"required",type:"string",id:1},gid:{rule:"required",type:"int32",id:2},extentLayer:{rule:"repeated",type:"ExtentBizInfo",id:3},modelLayer:{rule:"repeated",type:"ModelBizInfo",id:4},labelLayer:{rule:"repeated",type:"LabelBizInfo",id:5},poiLayer:{rule:"repeated",type:"POIBizInfo",id:6},polygonLayer:{rule:"repeated",type:"PolygonBizInfo",id:7},liftLayer:{rule:"repeated",type:"LiftBizInfo",id:8},stairLayer:{rule:"repeated",type:"StairBizInfo",id:9},polygonLabelLayer:{rule:"repeated",type:"PolygonLabelBizInfo",id:10},externalModelLayer:{rule:"repeated",type:"ExternalModelBizInfo",id:11}},nested:{ExtentBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},ModelBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7},pass:{type:"int32",id:8}}},LabelBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},PolygonBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},POIBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},LiftBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},flag:{type:"int32",id:4},floor:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},StairBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},flag:{type:"int32",id:4},minlevel:{type:"int32",id:5},maxlevel:{type:"int32",id:6}}},PolygonLabelBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},width:{type:"float",id:4},name:{type:"string",id:5},ename:{type:"string",id:6},angle:{type:"float",id:7}}},ExternalModelBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}}}},FloorNavi:{fields:{mid:{rule:"required",type:"string",id:1},gid:{rule:"required",type:"int32",id:2},naviNodes:{rule:"repeated",type:"NaviNode",id:3},naviSegments:{rule:"repeated",type:"NaviSegment",id:4},naviZones:{rule:"repeated",type:"NaviZone",id:5},naviModels:{rule:"repeated",type:"NaviModel",id:6},nextFloors:{rule:"repeated",type:"int32",id:7,options:{packed:!1}},naviExtents:{rule:"repeated",type:"NaviExtent",id:8}},nested:{NaviNode:{fields:{nodeId:{type:"int32",id:1},nodeType:{type:"int32",id:2},liftType:{type:"int32",id:3},liftFlag:{type:"int32",id:4},liftEntry:{type:"int32",id:5},liftFloor:{type:"string",id:6},linkSeg:{type:"string",id:7},geo:{type:"string",id:8},entranceType:{type:"int32",id:9},entranceFloor:{type:"string",id:10},doortype:{type:"int32",id:11},idxs:{rule:"repeated",type:"int32",id:12,options:{packed:!1}},pts:{rule:"repeated",type:"double",id:13,options:{packed:!1}},accessible:{type:"int32",id:14,options:{default:0}}}},NaviSegment:{fields:{segmentId:{type:"int32",id:1},snode:{type:"int32",id:2},enode:{type:"int32",id:3},length:{type:"double",id:4},rank:{type:"int32",id:5},name:{type:"string",id:6},entry:{type:"int32",id:7},desc:{type:"string",id:8},geo:{type:"string",id:9},through:{type:"int32",id:10},idxs:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},pts:{rule:"repeated",type:"double",id:12,options:{packed:!1}}}},NaviZone:{fields:{id:{rule:"required",type:"int32",id:1},type:{rule:"required",type:"int32",id:2,options:{default:0}},geo:{type:"string",id:3},rejects:{rule:"repeated",type:"string",id:4},idxs:{rule:"repeated",type:"int32",id:5,options:{packed:!1}},pts:{rule:"repeated",type:"double",id:6,options:{packed:!1}}}},NaviModel:{fields:{modelid:{rule:"required",type:"int32",id:1},doorids:{rule:"repeated",type:"int32",id:2,options:{packed:!1}},nodetypes:{rule:"repeated",type:"int32",id:3,options:{packed:!1}},entrytypes:{rule:"repeated",type:"int32",id:4,options:{packed:!1}}}},NaviExtent:{fields:{id:{rule:"required",type:"int32",id:1},pts:{rule:"repeated",type:"double",id:2,options:{packed:!1}},idxs:{rule:"repeated",type:"IndexInfo",id:3}},nested:{IndexInfo:{fields:{idxs:{rule:"repeated",type:"int32",id:1,options:{packed:!1}}}}}}}}}}}}}}class kr{constructor(){this.Ae=null}}Object.assign(kr.prototype,{Re(){this.Ae||(this.Ae=xr.Root.fromJSON((new("undefined"!=typeof KjWzhWlSj&&KjWzhWlSj.ProtoDef?KjWzhWlSj.ProtoDef:jr)).id))},Ie(t){return this.Re(),this.Ae.lookup("Map").decode(t)},Le(e){for(let t=0;t<e.buffers.length;t++){var i=e.buffers[t];if(1==i.btype)return this.Se(i.data)}return null},Fe(e){for(let t=0;t<e.buffers.length;t++){var i=e.buffers[t];if(7==i.btype)return this.Pe(i.data)}return null},Ge(e,i){for(let t=0;t<e.buffers.length;t++){var r=e.buffers[t];if(2==r.btype&&r.gid==i)return this.De(r.data)}return null},Ve(e,i){for(let t=0;t<e.buffers.length;t++){var r=e.buffers[t];if(3==r.btype&&r.gid==i)return this.Be(r.data)}return null},Ze(e,i){for(let t=0;t<e.buffers.length;t++){var r=e.buffers[t];if(4==r.btype&&r.gid==i)return this.Ce(r.data)}return null},We(e,i){for(let t=0;t<e.buffers.length;t++){var r=e.buffers[t];if(5===r.btype&&r.gid===i)return this.Ce(r.data)}return null},Ue(e,i){for(let t=0;t<e.buffers.length;t++){var r=e.buffers[t];if(6===r.btype&&r.gid===i)return this.Ce(r.data)}return null},Se(t){this.Re();let e=this.Ae.lookup("Scene").decode(t);return e.levels=[],e.layerGroups.forEach(t=>{e.levels.push(t.gid)}),e},Pe(t){return this.Re(),this.Ae.lookup("Gate").decode(t)},De(t){return this.Re(),this.Ae.lookup("FloorGeo").decode(t)},Be(t){return this.Re(),this.Ae.lookup("FloorBiz").decode(t)},Ce(t){return this.Re(),this.Ae.lookup("FloorNavi").decode(t)}});class Er{constructor(){var t;u.environment===Ht.WX?this.qe=new u.ProtoReaderStatic:void 0!==Kt.global().KjWzhWlSj&&Kt.global().KjWzhWlSj.ProtoReaderStatic?(t=Kt.global().KjWzhWlSj.ProtoReaderStatic,this.qe=new t):this.qe=new kr}}Object.assign(Er.prototype,{Ie(t){return this.qe.Ie(t)},Le(t){return this.qe.Le(t)},Fe(t){return this.qe.Fe(t)},Ge(t,e){return this.qe.Ge(t,e)},Ve(t,e){return this.qe.Ve(t,e)},Ze(t,e){return this.qe.Ze(t,e)},We(t,e){return this.qe.We(t,e)},Ue(t,e){return this.qe.Ue(t,e)},Se(t){return this.qe.Se(t)},Pe(t){return this.qe.Pe(t)},De(t){return this.qe.De(t)},Be(t){return this.qe.Be(t)},Ce(t){return this.qe.Ce(t)}});let Mr="https://console.fengmap.com/api-s/",Nr={domain:Mr,online:Mr+"sdk/check",check:Mr+"sdk/auth/web",download:Mr+"sdk/auth/obtainMapRoute",downloadTile:Mr+"sdk/authLayered/obtainMapRoute",collect:Mr+"sdk/collect",themeUrl:Mr+"webtheme/",externalModelURL:Mr+"webmodel/"},Tr=(()=>{function p(t,e){for(var i,r=0,n=0,n=0;n<8;n++)1&e&&(r^=t),i=128&t,t<<=1,i&&(t^=27),e>>=1;return r}function v(t,e,i){for(var r=0;r<4;r++)t[0+r]^=e[16*i+4*r],t[4+r]^=e[16*i+4*r+1],t[8+r]^=e[16*i+4*r+2],t[12+r]^=e[16*i+4*r+3]}function b(t){for(var e,i,r,n=1;n<4;n++)for(i=0;i<n;){for(r=t[4*n+4-1],e=3;0<e;e--)t[4*n+e]=t[4*n+e-1];t[4*n+0]=r,i++}}function y(t){for(var e,i,r=0;r<4;r++)for(e=0;e<4;e++)i=(240&t[4*r+e])>>4,t[4*r+e]=n[16*i+(15&t[4*r+e])]}function g(t){for(var e=0;e<4;e++)t[e]=i[16*((240&t[e])>>4)+(15&t[e])]}function m(t){return parseInt(t,16)}var i=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],n=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],_=0,w=0,x=[2,0,0,0];return{decryption:function(t,e){for(var i=Array(16),r=0;r<16;r++)i[r]=16*m(e.substr(2*r,1))+m(e.substr(2*r+1,1));var n=Array(16);for(r=0;r<16;r++)n[r]=16*m(t.substr(2*r,1))+m(t.substr(2*r+1,1));var s=Array(16);switch(r=[],i.length){default:case 16:_=4,w=10;break;case 24:_=6,w=12;break;case 32:_=8,w=14}for(var l=r=Array(16*(w+1)),o=Array(4),h=4*(w+1),a=0;a<_;a++)l[4*a+0]=i[4*a+0],l[4*a+1]=i[4*a+1],l[4*a+2]=i[4*a+2],l[4*a+3]=i[4*a+3];for(a=_;a<h;a++){if(o[0]=l[4*(a-1)+0],o[1]=l[4*(a-1)+1],o[2]=l[4*(a-1)+2],o[3]=l[4*(a-1)+3],0==a%_){for(var u=void 0,f=void 0,u=(i=o)[0],f=0;f<3;f++)i[f]=i[f+1];if(i[3]=u,g(o),1==(i=a/_))x[0]=1;else if(1<i)for(x[0]=2,i--;0<i-1;)x[0]=p(x[0],2),i--;(f=i=o)[0]=i[0]^(u=x)[0],f[1]=i[1]^u[1],f[2]=i[2]^u[2],f[3]=i[3]^u[3]}else 6<_&&4==a%_&&g(o);l[4*a+0]=l[4*(a-_)+0]^o[0],l[4*a+1]=l[4*(a-_)+1]^o[1],l[4*a+2]=l[4*(a-_)+2]^o[2],l[4*a+3]=l[4*(a-_)+3]^o[3]}for(l=Array(16),o=0;o<4;o++)for(a=0;a<4;a++)l[4*o+a]=n[o+4*a];for(v(l,r,w),n=w-1;1<=n;n--)for(b(l),y(l),v(l,r,n),o=l,a=[14,9,13,11],h=f=void 0,i=Array(4),u=Array(4),h=0;h<4;h++){for(f=0;f<4;f++)i[f]=o[4*f+h];var f=a,c=i,d=u;for(d[0]=p(f[0],c[0])^p(f[3],c[1])^p(f[2],c[2])^p(f[1],c[3]),d[1]=p(f[1],c[0])^p(f[0],c[1])^p(f[3],c[2])^p(f[2],c[3]),d[2]=p(f[2],c[0])^p(f[1],c[1])^p(f[0],c[2])^p(f[3],c[3]),d[3]=p(f[3],c[0])^p(f[2],c[1])^p(f[1],c[2])^p(f[0],c[3]),f=0;f<4;f++)o[4*f+h]=u[f]}for(b(l),y(l),v(l,r,0),o=0;o<4;o++)for(a=0;a<4;a++)s[o+4*a]=l[4*o+a];for(n="",r=0;r<16;++r)n+=l=(l=s[r].toString(16)).length<2?"0"+l:l;return n}}})(),Ar=(()=>{function f(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function o(t,e,i,r,n,s){return f((e=f(f(e,t),f(r,s)))<<n|e>>>32-n,i)}function c(t,e,i,r,n,s,l){return o(e&i|~e&r,t,e,n,s,l)}function d(t,e,i,r,n,s,l){return o(e&r|i&~r,t,e,n,s,l)}function p(t,e,i,r,n,s,l){return o(e^i^r,t,e,n,s,l)}function v(t,e,i,r,n,s,l){return o(i^(e|~r),t,e,n,s,l)}function l(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i,r,n,s,l=1732584193,o=-271733879,h=-1732584194,a=271733878,u=0;u<t.length;u+=16)l=c(i=l,r=o,n=h,s=a,t[u],7,-680876936),a=c(a,l,o,h,t[u+1],12,-389564586),h=c(h,a,l,o,t[u+2],17,606105819),o=c(o,h,a,l,t[u+3],22,-1044525330),l=c(l,o,h,a,t[u+4],7,-176418897),a=c(a,l,o,h,t[u+5],12,1200080426),h=c(h,a,l,o,t[u+6],17,-1473231341),o=c(o,h,a,l,t[u+7],22,-45705983),l=c(l,o,h,a,t[u+8],7,1770035416),a=c(a,l,o,h,t[u+9],12,-1958414417),h=c(h,a,l,o,t[u+10],17,-42063),o=c(o,h,a,l,t[u+11],22,-1990404162),l=c(l,o,h,a,t[u+12],7,1804603682),a=c(a,l,o,h,t[u+13],12,-40341101),h=c(h,a,l,o,t[u+14],17,-1502002290),l=d(l,o=c(o,h,a,l,t[u+15],22,1236535329),h,a,t[u+1],5,-165796510),a=d(a,l,o,h,t[u+6],9,-1069501632),h=d(h,a,l,o,t[u+11],14,643717713),o=d(o,h,a,l,t[u],20,-373897302),l=d(l,o,h,a,t[u+5],5,-701558691),a=d(a,l,o,h,t[u+10],9,38016083),h=d(h,a,l,o,t[u+15],14,-660478335),o=d(o,h,a,l,t[u+4],20,-405537848),l=d(l,o,h,a,t[u+9],5,568446438),a=d(a,l,o,h,t[u+14],9,-1019803690),h=d(h,a,l,o,t[u+3],14,-187363961),o=d(o,h,a,l,t[u+8],20,1163531501),l=d(l,o,h,a,t[u+13],5,-1444681467),a=d(a,l,o,h,t[u+2],9,-51403784),h=d(h,a,l,o,t[u+7],14,1735328473),l=p(l,o=d(o,h,a,l,t[u+12],20,-1926607734),h,a,t[u+5],4,-378558),a=p(a,l,o,h,t[u+8],11,-2022574463),h=p(h,a,l,o,t[u+11],16,1839030562),o=p(o,h,a,l,t[u+14],23,-35309556),l=p(l,o,h,a,t[u+1],4,-1530992060),a=p(a,l,o,h,t[u+4],11,1272893353),h=p(h,a,l,o,t[u+7],16,-155497632),o=p(o,h,a,l,t[u+10],23,-1094730640),l=p(l,o,h,a,t[u+13],4,681279174),a=p(a,l,o,h,t[u],11,-358537222),h=p(h,a,l,o,t[u+3],16,-722521979),o=p(o,h,a,l,t[u+6],23,76029189),l=p(l,o,h,a,t[u+9],4,-640364487),a=p(a,l,o,h,t[u+12],11,-421815835),h=p(h,a,l,o,t[u+15],16,530742520),l=v(l,o=p(o,h,a,l,t[u+2],23,-995338651),h,a,t[u],6,-198630844),a=v(a,l,o,h,t[u+7],10,1126891415),h=v(h,a,l,o,t[u+14],15,-1416354905),o=v(o,h,a,l,t[u+5],21,-57434055),l=v(l,o,h,a,t[u+12],6,1700485571),a=v(a,l,o,h,t[u+3],10,-1894986606),h=v(h,a,l,o,t[u+10],15,-1051523),o=v(o,h,a,l,t[u+1],21,-2054922799),l=v(l,o,h,a,t[u+8],6,1873313359),a=v(a,l,o,h,t[u+15],10,-30611744),h=v(h,a,l,o,t[u+6],15,-1560198380),o=v(o,h,a,l,t[u+13],21,1309151649),l=v(l,o,h,a,t[u+4],6,-145523070),a=v(a,l,o,h,t[u+11],10,-1120210379),h=v(h,a,l,o,t[u+2],15,718787259),o=v(o,h,a,l,t[u+9],21,-343485551),l=f(l,i),o=f(o,r),h=f(h,n),a=f(a,s);return[l,o,h,a]}function h(t){for(var e="",i=32*t.length,r=0;r<i;r+=8)e+=String.fromCharCode(t[r>>5]>>>r%32&255);return e}function a(t){var e=[];for(e[(t.length>>2)-1]=void 0,r=0;r<e.length;r+=1)e[r]=0;for(var i=8*t.length,r=0;r<i;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e}function r(t){for(var e,i="0123456789abcdef",r="",n=0;n<t.length;n+=1)e=t.charCodeAt(n),r+=i.charAt(e>>>4&15)+i.charAt(15&e);return r}function u(t){return unescape(encodeURIComponent(t))}function n(t){return h(l(a(t=u(t)),8*t.length))}function s(t,e){var i,t=u(t),e=u(e),r=a(t),n=[],s=[];for(n[15]=s[15]=void 0,16<r.length&&(r=l(r,8*t.length)),i=0;i<16;i+=1)n[i]=909522486^r[i],s[i]=1549556828^r[i];return t=l(n.concat(a(e)),512+8*e.length),h(l(s.concat(t),640))}function e(t,e,i){return e?i?s(e,t):r(s(e,t)):i?n(t):r(n(t))}return{encryption:function(t){return e(t)}}})(),Rr="026685bf295f587b5dffc1f18d5dc27c",Ir="fengmap.localhost:",Lr="0.0.0.0";class Sr{constructor(){}}Object.assign(Sr.prototype,{Ye(t,e,i,r,n){void 0===u.KjWzhWlSj||!u.KjWzhWlSj.license||!u.KjWzhWlSj.license||"string"==typeof e&&0!=e.length&&(e=Tr.decryption(e,Rr),i=Ar.encryption(i),e=Tr.decryption(e,i),-1!==t.indexOf(e))?r&&r():n&&n()},Xe(t,e,i,r){var n;-1!==e.indexOf("")||-1!==e.indexOf("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa")||void 0===t.mapURL||(n=Ar.encryption(Ir+t.appName),n=Tr.decryption(t.key,n),-1!==e.indexOf(n))?this.Ye(e,t.license,t.buildingID,()=>{i&&i()},()=>{r&&r(c.LICENSE_ERROR)}):r&&r(c.NAME_KEY_ERROR)},ze(t,e,i){void 0!==t.mapURL?e&&e():this.He(()=>{new l({method:"POST",url:Nr.check,header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:this.Qe(t)}).de(()=>{e&&e()},t=>{i&&i(t)},()=>{e&&e()})},()=>{e&&e()})},He(t,e){new l({method:"GET",url:Nr.online}).de(()=>{t&&t()},()=>{e&&e()},()=>{e&&e()})},Qe(t,e){let i;u.environment===Ht.BROWSER&&(r=Kt.global(),-1!==(r=(i=r.location.host).indexOf(":")))&&(i=i.slice(0,r));var r={mapId:t.buildingID,appName:t.appName};return e?r.keyValue=t.key:r.appKey=t.key,e?r.webUrl=i||Lr:r.webURL=i||Lr,r},Ke(t){if("undefined"!=typeof navigator&&"undefined"!=typeof document){var i={},r=(-1!==navigator.userAgent.indexOf("Opera")?i.userAgent="Opera":-1!==navigator.userAgent.indexOf("Firefox")?i.userAgent="FF":-1!==navigator.userAgent.indexOf("Chrome")?i.userAgent="Chrome":-1!==navigator.userAgent.indexOf("Safari")&&0===navigator.userAgent.indexOf("Chrome")?i.userAgent="Safari":-1!==navigator.userAgent.indexOf("compatible")&&-1!==navigator.userAgent.indexOf("MSIE")?i.userAgent="IE":-1!==navigator.userAgent.indexOf("Trident")&&(i.userAgent="Edge"),i.product="JS",i.sdkVersion=N.VERSION+"."+N.BUILD,i.appName=t.appName,i.appkey=t.key,t.gl.getExtension("WEBGL_debug_renderer_info"));i.gpu=r?t.gl.getParameter(r.UNMASKED_RENDERER_WEBGL):null,i.os=navigator.platform;let e=!0;var n=navigator.userAgent,s=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];for(let t=0;t<s.length;t++)if(0<n.indexOf(s[t])){e=!1;break}e?i.device="pc":i.device="mobile",new l({method:"POST",url:Nr.collect,header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:i}).de()}}});let Fr=new Sr;class Pr{constructor(t={}){this.Je=t.disposeCallback,this.$e=!1,this.ti=!1,this.ei=void 0!==t.enable&&t.enable,this.name=void 0!==t.name?t.name:"",this.ii=new Map,this.ri=t.mapCreateTime}}Object.assign(Pr.prototype,{ni(){!this.ei||this.ti||this.$e&&0===this.ii.size&&(this.Je({mapCreateTime:this.ri}),this.ti=!0)},si(t){this.ei&&(this.$e=t,this.ni())},li(t){this.ei&&(this.ii.has(t),this.ii.set(t,0))},oi(t){this.ei&&this.ii.has(t)&&(this.ii.delete(t),this.ni())}});let Gr="2",Dr=3;class Vr{constructor(){this.qe=new Er,this.ai=[],this.ui=new Pr({enable:!0,name:"DataManager"})}}function Br(s){var l=[],t=s.length;for(let n=0;n<t;n++){let t=s[n],e={x:this.fi(t.x),y:this.fi(t.y)},i=l.length,r=!1;for(let t=0;t<i;t++){var o=l[t];if(o.x==e.x&&o.y==e.y){r=!0;break}}r||l.push(e)}return l}function Zr(t){return+t.toFixed(2)}Object.assign(Vr.prototype,{pe(t){this.ui.Je=t,this.ai.forEach(t=>{200!==t.ce.status&&this.ui.oi(t.fe.url),t.pe()}),this.ai.length=0,this.ui.si(!0)},ci(e,i,r,n){if(e.mapURL){let t;t=e.isPreview?e.isOutdoor?e.tile?e.mapURL+e.buildingID+"/separate/"+e.buildingID+i+".fmap":e.mapURL+e.buildingID+"/"+e.buildingID+i+".fmap":e.tile?e.mapURL+e.mapID+"/"+e.bid+"/"+e.buildingID+"/separate/"+e.buildingID+i+".fmap":e.mapURL+e.mapID+"/"+e.bid+"/"+e.buildingID+"/"+e.buildingID+i+".fmap":e.mapURLAbsolute?e.mapURL+e.buildingID+i+".fmap":e.isOutdoor?e.mapURL+e.buildingID+"/"+e.buildingID+i+".fmap":e.mapURL+e.mapID+"/"+e.bid+"/"+e.buildingID+"/"+e.buildingID+i+".fmap",void(r&&r(t))}else{var t={newFlag:Gr,keyType:Dr,isSeparate:!1},i=(e.isOutdoor||(t.bId=e.bid,t.rootMid=e.mapID),new l({method:"POST",url:""===i?Nr.download:Nr.downloadTile+"/"+e.buildingID+i+".fmap",header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:Object.assign(t,Fr.Qe(e,!0))}));this.ai.push(i),i.de(t=>{r&&r(t.replace('"',"").replace('"',""))},t=>{n&&n(t)},t=>{n&&n(t)})}},di(r,n,s){Fr.ze(r,()=>{this.ci(r,"",i=>{var t=new l({method:"GET",responseType:"arraybuffer",url:i});this.ai.push(t),this.ui.li(i),t.de(t=>{this.ui.oi(i);var t=new Uint8Array(t);let e=this.qe.Ie(t);!r.isOutdoor||(t=[],e.keys&&0!==e.keys.length?t.push(...e.keys):t.push(e.key),r.isPreview)?n&&n(e):Fr.Xe(r,t,()=>{n&&n(e)},t=>{s&&s(t)})},t=>{s&&(t===c.PATH_ERROR?s(c.MAP_ID_URL_ERROR):s(t)),this.ui.oi(i)},t=>{s&&s(t),this.ui.oi(i)})},t=>{s&&s(t)})},t=>{s&&s(t)})},pi(r,n,s){Fr.ze(r,()=>{this.ci(r,".scene",i=>{this.ui.li(i);var t=new l({method:"GET",responseType:"arraybuffer",url:i});this.ai.push(t),t.de(t=>{var t=new Uint8Array(t);let e=this.qe.Se(t);this.ui.oi(i),!r.isOutdoor||(t=[],e.keys&&0!==e.keys.length?t.push(...e.keys):t.push(e.key),r.isPreview)?n&&n(e):Fr.Xe(r,t,()=>{n&&n(e)},t=>{s&&s(t)})},t=>{s&&s(t),this.ui.oi(i)},t=>{s&&s(t),this.ui.oi(i)})},t=>{s&&s(t)})},t=>{s&&s(t)})},vi(t,i,r){this.ci(t,".gate",e=>{this.ui.li(e);var t=new l({method:"GET",responseType:"arraybuffer",url:e});this.ai.push(t),t.de(t=>{t=new Uint8Array(t),t=this.qe.Pe(t);i&&i(t),this.ui.oi(e)},t=>{r&&r(t),this.ui.oi(e)},t=>{r&&r(t),this.ui.oi(e)})},t=>{r&&r(t)})},bi(t,e,i,r){this.ci(t,".floor."+e+".geo",e=>{var t=new l({method:"GET",responseType:"arraybuffer",url:e});this.ui.li(e),this.ai.push(t),t.de(t=>{t=new Uint8Array(t),t=this.qe.De(t);i&&i(t),this.ui.oi(e)},t=>{r&&r(t),this.ui.oi(e)},t=>{r&&r(t),this.ui.oi(e)})},t=>{r&&r(t)})},yi(t,e,i,r){this.ci(t,".floor."+e+".biz",e=>{var t=new l({method:"GET",responseType:"arraybuffer",url:e});this.ui.li(e),this.ai.push(t),t.de(t=>{t=new Uint8Array(t),t=this.qe.Be(t);i&&i(t),this.ui.oi(e)},t=>{r&&r(t),this.ui.oi(e)},t=>{r&&r(t),this.ui.oi(e)})},t=>{r&&r(t)})},gi(t,e,i,r){this.ci(t,e,e=>{var t=new l({method:"GET",responseType:"arraybuffer",url:e});this.ui.li(e),this.ai.push(t),t.de(t=>{t=new Uint8Array(t),t=this.qe.Ce(t);i&&i(t),this.ui.oi(e)},t=>{r&&r(t),this.ui.oi(e)})},t=>{r&&r(t)},t=>{r&&r(t)})},mi(t,e,i,r){this.gi(t,".floor."+e+".navi",i,r)},_i(t,e,i,r){this.gi(t,".floor."+e+".drive.navi",i,r)},wi(t,e,i,r){this.gi(t,".floor."+e+".accessible.navi",i,r)}});class Cr{constructor(){}}Object.assign(Cr.prototype,{xi(i,r){var n=[];let s=0;for(let t=0;t<i.length;t++){let e=i[t].idxs;if("number"==typeof(e=e||i[t]))for(;s<e;)n.push({x:r[s],y:r[s+1]}),s+=2;else for(let t=0;t<e.length;t++)for(var l=e[t];s<l;)n.push({x:r[s],y:r[s+1]}),s+=2}return n},Oi(i,r){var n=[];let s=0;for(let t=0;t<i.length;t++){let e=i[t].idxs;if("number"==typeof(e=e||i[t])){for(var l=[];s<e;)l.push({x:r[s],y:r[s+1]}),s+=2;n.push(l)}else for(let t=0;t<e.length;t++){for(var o=e[t],h=[];s<o;)h.push({x:r[s],y:r[s+1]}),s+=2;n.push(h)}}return n},ji(i,r){var n=[],s=[];let l=0;for(let t=0;t<i.length;t++){let e=i[t].idxs;if("number"==typeof(e=e||i[t]))for(;l<e;)n.push({x:r[l],y:r[l+1]}),l+=2;else for(let t=0;t<e.length;t++)if(0===t)for(var o=e[t];l<o;)n.push({x:r[l],y:r[l+1]}),l+=2;else{for(var h=[],a=e[t];l<a;)h.push({x:r[l],y:r[l+1]}),l+=2;s.push(h)}}var t=[];return t.push(n),t.push(...s),t},ki(t){return Br(t)},fi(t){return Zr(t)}});let Wr=new Cr,Ur={G1:"MULTIPOLYGON(((",G2:"POINT(",G3:"MULTILINESTRING(("};Ur.GLEN1="MULTIPOLYGON(((".length,Ur.GLEN2="POINT(".length,Ur.GLEN3="MULTILINESTRING((".length;class qr{constructor(){}}Object.assign(qr.prototype,{xi(t){var e=[];return 0!=t.indexOf(Ur.G2)?[]:(t=t.substring(Ur.GLEN2,t.length-1).split(" "),e.push({x:parseFloat(t[0]),y:parseFloat(t[1])}),e)},Ei(e,i){for(let t=0;t<e.length;t++){var r=e[t].split(" ");i.push({x:parseFloat(r[0]),y:parseFloat(r[1])})}},Oi(t){return 0!=t.indexOf(Ur.G3)?[]:(t=t.substring(Ur.GLEN3,t.length-2).split(","),this.Ei(t,t=[]),[t])},ji(t){var e=[],i=[];if(0!=t.indexOf(Ur.G1))return[];var r=t.substring(Ur.GLEN1,t.length-3).split(/\),\(/);for(let t=0;t<r.length;t++){var n=r[t].split(/,/);if(0==t)this.Ei(n,e);else{var s=[];for(let t=0;t<n.length;t++){var l=n[t].split(" ");s.push({x:parseFloat(l[0]),y:parseFloat(l[1])})}i.push(s)}}t=[];return t.push(e),t.push(...i),t},ki(t){return Br(t)},fi(t){return Zr(t)}});let Yr=new qr,Xr={STOP:0,PASS:1,PUSH:2};Object.freeze(Xr);class zr{constructor(t){this.se=b.GROUP,this.Mi=new Map,this.Ni=-1,this.Ct=null,Object.assign(this,t)}getType(){return this.se}getBound(){return this.Ct||this.Ti(),this.Ct}getChildren(){return this.Mi}}Object.assign(zr.prototype,{pe(){for(var t of this.Mi.values())t.pe&&t.pe();this.Mi.clear()},Ai(e){var t=e._support(this);t==Xr.PASS?this.Mi.forEach(t=>{t.Ai(e)}):t==Xr.PUSH&&e.Ri.push(this)},Ti(){this.Ct=new Vt,0!=this.Mi.size&&this.Mi.forEach(t=>{this.Ct.Vt(t.getBound())})}});class Hr{constructor(){this.Ni=-1,this.se=b.NONE,this.Ii=null,this.Ct=null}getType(){return this.se}getCoordinates(){return this.Ii}getBound(){return this.Ct||this.Ti(),this.Ct}}Object.assign(Hr.prototype,{pe(){},Ai(t){t._support(this)==Xr.PUSH&&t.Ri.push(this)}});class Qr extends Hr{constructor(t){super(),this.Ni=t.eid,this.se=b.POINT,Object.assign(this,t)}}Object.assign(Qr.prototype,{Ti(){this.Ct=new Vt,this.Ii&&this.Ct.Bt(this.Ii)},Ai(t){t._support(this)==Xr.PUSH&&t.Ri.push(this)}});class Kr extends Hr{constructor(t){super(),this.Ni=t.eid,this.se=b.POLYGON,Object.assign(this,t)}getCenter(){return this.Xt}}Object.assign(Kr.prototype,{Ti(){this.Ct=new Vt,this.Ii&&this.Ii.forEach(t=>{this.Ct.Bt(t)})},Ai(t){t._support(this)==Xr.PUSH&&t.Ri.push(this)}});class Jr{constructor(){this.Li=[1,2,3,4],this.Si=[6,7,9],this.Fi=[31,32],this.Pi=new Map,this.Pi.set(31,b.EXTENTGROUP),this.Pi.set(32,b.MODELGROUP),this.Pi.set(6,b.FACILITYGROUP),this.Pi.set(7,b.LABELGROUP),this.Pi.set(9,b.EXTERNALMODELGROUP),this.Gi=new Map,this.Gi.set(31,["extentLayer",null]),this.Gi.set(32,["modelLayer","labelLayer"]),this.Gi.set(6,["poiLayer",null]),this.Gi.set(7,["labelLayer",null]),this.Gi.set(9,["externalModelLayer",null]),this.qe=new Er}}Object.assign(Jr.prototype,{Di(t){var e;return t?(e=t.scene,this.Vi(e,t)):null},Vi(t,i){let{layerGroups:e,...r}=t,n=t.fileVer,s=new zr(r);return e.forEach(t=>{var e=this.Bi(t,i,n);s.Mi.set(t.gid,e)}),s},Bi(t,e,i){let{layers:r,...n}=t,s=new zr(n),l=e&&e.floors?e.floors.get(t.gid).geo[0]:null,o=e&&e.floors?e.floors.get(t.gid).biz[0]:null;return r.forEach(t=>{6===t.ltype&&-1!==t.lname.indexOf("storelabel")&&(t.ltype=7);var e=this.Zi(t,l,o,i);null!==e&&s.Mi.set(this.Pi.get(t.ltype),e)}),this.Ci(s),s},Ci(t){var e=Array.from(t.Mi);e.sort((t,e)=>t[0]-e[0]),t.Mi=new Map(e)},Zi(t,e,i,r){var n;return-1===this.Li.indexOf(t.ltype)&&this.Gi.get(t.ltype)?(n=new zr(t),this.Wi(n,e,i,r),n&&(n.se=this.Pi.get(t.ltype)),n):null},Wi(t,e,i,r){if(t){var n=this.Gi.get(t.ltype);if(n){var s=e?e[n[0]]:[],l=i?i[n[0]]:[];switch(t.ltype){case 6:this.Ui(t,s,l,r,b.FACILITY);break;case 7:this.Ui(t,s,l,r,b.LABEL);break;case 9:this.Ui(t,s,l,r,b.EXTERNALMODEL);break;case 31:this.qi(t,s,l,r,b.EXTENT,null);break;case 32:this.qi(t,s,l,r,b.MODEL,e?e[n[1]]:null)}}}},Ui(e,i,r,n,s){for(let t=0;t<i.length;t++){var l=this.Yi(i[t],r[t],n);l.se=s,e.Mi.set(i[t].eid,l)}},Yi(t,e,i){e=Object.assign({},e,{area:t.area,eid:t.eid,height:t.height}),e=new Qr(e);return t.coordinates?e.Ii=t.coordinates:(e.Ii=1==i?Yr.xi(t.geo):Wr.xi(t.idxs,t.pts),t.coordinates=e.Ii),e},qi(e,i,r,n,s,l){for(let t=0;t<i.length;t++){var o=this.Xi(i[t],r[t],n,l?l[t]:null);o.se=s,e.Mi.set(i[t].eid,o)}},Xi(t,e,i,r){e=Object.assign({},e,{area:t.area,eid:t.eid,height:t.height,baseheight:t.baseheight}),e=new Kr(e);return e.Ii=1===i?Yr.ji(t.geo):Wr.ji(t.idxs,t.pts),r&&(r.coordinates||(r.coordinates=1===i?Yr.xi(r.geo):Wr.xi(r.idxs,r.pts)),e.Xt=r.coordinates[0]),e}});let $r={NONE_RODE_NETWORK:1,WALK_RODE_NETWORK:2,DRIVE_RODE_NETWORK:4,ACCESSIBLE_RODE_NETWORK:8};class tn{constructor(){this.zi=new Map,this.Hi=new Map,this.fe=new Map,this.Qi=new Map,this.Ki=new Map,this.Ji=new Map,this.$i=[2,3],this.tr=!1,this.qe=new Er,this.er=new Jr,this.ir=new Vr}load(t,e){this.rr(t,e)}loadWhole(t,e){this.nr(t,e)}getDecode(t){t=void 0!==t.buildingID?t.buildingID:t.mapID;return this.sr({buildingID:t})}getData(t){t=void 0!==t.buildingID?t.buildingID:t.mapID;return this.zi.get(t)}setCache(t){this.zi=t[0],this.Hi=t[1]}getCache(){return[this.zi,this.Hi]}}Object.assign(tn.prototype,{pe(t){this.ir.pe(t),this.lr()},lr(){this.zi.clear(),this.zi=null,this.Hi.clear(),this.Hi=null,this.fe.clear(),this.fe=null,this.Qi.clear(),this.Qi=null,this.Ki.clear(),this.Ki=null,this.Ji.clear(),this.Ji=null,this._delayDisposeCallback&&this._delayDisposeCallback({name:"DataManager"})},hr(t){this.Qi.set(t.buildingID+t.uuid,null),this.Ki.set(t.buildingID+t.uuid,null),this.Ji.set(t.buildingID+t.uuid,0)},rr(s,l){this.hr(s),this.pi(s,(e,t)=>{l&&l(e,t);let n=this.ar(s);t=s.loadNavi&&n.buildings&&0<n.buildings.length;this.vi(s,t,(t,e)=>{l&&l(t,e);var i=void 0!==s.level?s.level:parseInt(n.defGid),r=(this.ur(s,i,l),s.visibleLevels||n.levels);for(let t=0;t<r.length;t++)r[t]===i||n.levels.indexOf(r[t])<0||this.ur(s,r[t],l);if(s.preLoad)for(let t=0;t<n.levels.length;t++)n.levels[t]!==i&&-1===r.indexOf(n.levels[t])&&this.ur(s,n.levels[t],l)},t=>{l&&l(e,t)})},(t,e)=>{l&&l(t,e)})},vi(i,t,r,n){t?(t=this.cr(i))?r&&r("gate",t):this.ir.vi(i,t=>{this.Hi.get(i.buildingID).gate=t,r&&r("gate",t)},t=>{var e;i.navigationData?((e=this.Hi.get(i.buildingID)).gate=i.navigationData,r&&r("gate",e.gate)):n("error",t)}):r&&r("gate",null)},pi(e,i,r){var t=this.ar(e);t?(i&&i("scene",t),e.justDecode||(t=this.zi.get(e.buildingID),i&&i("building",t))):this.ir.pi(e,t=>{e.isOutdoor&&this.dr(t),this.Hi.set(e.buildingID,{scene:t}),i&&i("scene",t),e.justDecode||(t=this.er.Vi(t),this.zi.set(e.buildingID,t),i&&i("building",t))},t=>{r&&(t===c.PATH_ERROR?r("error",c.MAP_ID_URL_ERROR):r("error",t))})},dr(t){var e=t.fileVer;t.buildings&&1<e&&t.buildings.forEach(e=>{e.floors&&(e.levelChart=[],e.fids=[],e.floors.forEach(t=>{t.Ii=Wr.ji(t.idxs,t.pts),t.pgid&&e.levelChart.push(t.pgid,t.gid),t.baseLevel&&(e.minlevel=t.minlevel,e.maxlevel=t.maxlevel),t.fids&&e.fids.push.apply(e.fids,t.fids)}))})},ur(t,e,i,r){let n=this.Qi.get(t.buildingID+t.uuid);n||(n=[],this.Qi.set(t.buildingID+t.uuid,n)),r?n.unshift(e):n.push(e),this.tr&&1!==n.length||this.pr(t,i)},pr(s,l){let o=this.ar(s);if(o){let n=this.Qi.get(s.buildingID+s.uuid);if(n&&0!==n.length){let t=this.Ki.get(s.buildingID+s.uuid),r=(t||(t=[],this.Ki.set(s.buildingID+s.uuid,t)),n[0]);-1!==t.indexOf(r)?(n.splice(n.indexOf(r),1),this.pr(s,l)):(t.push(r),this.vr(s,r,(t,e)=>{let i=this.Ji.get(s.buildingID+s.uuid);"layerGroup"===t&&(l&&l(t,e),i++,this.Ji.set(s.buildingID+s.uuid,i),i===o.layerGroups.length&&l&&l("decode",this.sr(s)),n.splice(n.indexOf(r),1),this.pr(s,l)),"layer"===t&&l&&l(t,e),"floor"===t&&(l&&l(t,e),i===o.layerGroups.length)&&l&&l("complete",this.br(s))},(t,e)=>{l&&l(t,e)}))}}},vr(l,o,h,a){let u=this.ar(l);var t=this.yr(u,o);if(t){var f=t.gname,t=t.naviType||0;let e=this.$i[0],i=0,n=new Map,s=l.merge,r=function(r){if(i++,e===i){let e=n.get("geo"),i=n.get("biz");var t;s&&s.merge(o,e,i,u.fileVer),h&&h("layerGroup",n),l.justDecode||((t=r.gr(l,o)).Mi.forEach(t=>{r.er.Wi(t,e,i,u.fileVer),h&&h("layer",t)}),h&&h("floor",t))}};l.loadNavi&&((0!=(t&$r.WALK_RODE_NETWORK)||u.fileVer<3)&&(e++,this.mi(l,o,f,(t,e)=>{n.set(t,e),h&&h(t,e),r(this)},t=>{a&&a(t)})),0!=(t&$r.DRIVE_RODE_NETWORK)&&(e++,this._i(l,o,f,(t,e)=>{n.set(t,e),h&&h(t,e),r(this)},t=>{a&&a(t)})),0!=(t&$r.ACCESSIBLE_RODE_NETWORK))&&(e++,this.wi(l,o,f,(t,e)=>{n.set(t,e),h&&h(t,e),r(this)},t=>{a&&a(t)})),this.bi(l,o,f,(t,e)=>{n.set(t,e),h&&h(t,e),r(this)},t=>{a&&a(t)}),this.yi(l,o,f,(t,e)=>{n.set(t,e),h&&h(t,e),r(this)},t=>{a&&a(t)})}else a&&a("error",c.DEFAULT_LEVEL_ERROR)},bi(e,i,t,r,n){var s=this.mr(e,i,"geo");s?r&&r("geo",s):this.ir.bi(e,t,t=>{this._r(e,i,"geo",t),r&&r("geo",t)},t=>{n&&n("error",t)})},yi(e,i,t,r,n){var s=this.mr(e,i,"biz");s?r&&r("biz",s):this.ir.yi(e,t,t=>{this._r(e,i,"biz",t),r&&r("biz",t)},t=>{n&&n("error",t)})},mi(e,i,t,r,n){var s=this.mr(e,i,"navi");s?r&&r("navi",s):this.ir.mi(e,t,t=>{this._r(e,i,"navi",t),r&&r("navi",t)},t=>{n&&n("error",t)})},_i(e,i,t,r,n){var s=this.mr(e,i,"drive_navi");s?r&&r("drive_navi",s):this.ir._i(e,t,t=>{this._r(e,i,"drive_navi",t),r&&r("drive_navi",t)},t=>{n&&n("error",t)})},wi(e,i,t,r,n){var s=this.mr(e,i,"accessible_navi");s?r&&r("drive_navi",s):this.ir.wi(e,t,t=>{this._r(e,i,"accessible_navi",t),r&&r("accessible_navi",t)},t=>{n&&n("error",t)})},nr(t,i){this.di(t,(t,e)=>{i&&i(t,e)},(t,e)=>{i&&i(t,e)})},di(e,i,r){let n=this.sr(e);n?i&&i("decode",n):this.ir.di(e,t=>{this.wr(e,t),n=this.sr(e),i&&i("decode",n),e.justDecode||(t=this.er.Di(n),this.zi.set(e.buildingID,t),i&&i("complete",t))},t=>{r&&r("error",t)})},br(t){if(this.zi)return this.zi.get(t.buildingID)||null},gr(t,e){t=this.zi.get(t.buildingID);return t?t.Mi.get(e):null},wr(e,i){var r={scene:null,floors:new Map},n=this.qe.Le(i);e.isOutdoor&&this.dr(n),r.scene=n,r.gate=this.qe.Fe(i);for(let t=0;t<n.layerGroups.length;t++){var s=n.layerGroups[t],l=this.qe.Ge(i,s.gid),o=this.qe.Ve(i,s.gid),h=this.qe.Ze(i,s.gid),a=this.qe.We(i,s.gid),u=this.qe.Ue(i,s.gid),f=(e.merge&&e.merge.merge(s.gid,l,o,n.fileVer),new Map);f.set("geo",l),f.set("biz",o),f.set("navi",h),f.set("drive_navi",a),f.set("accessible_navi",u),r.floors.set(s.gid,f)}this.Hi.set(e.buildingID,r)},sr(e){var t=this.Hi.get(e.buildingID);if(!t)return null;var i=t.scene,r=new Map,t={scene:i,floors:r,gate:t.gate};for(let t=0;t<i.layerGroups.length;t++){var n=i.layerGroups[t],s=n.gid,l={gid:s,gname:n.gname,level:s,geo:[],biz:[],navi:[],naviDrive:[],naviAccessible:[]},o=(l.geo.push(this.mr(e,s,"geo")),l.biz.push(this.mr(e,s,"biz")),this.mr(e,s,"navi")),o=(o&&l.navi.push(o),this.mr(e,s,"drive_navi")),o=(o&&l.naviDrive.push(o),this.mr(e,s,"accessible_navi"));o&&l.naviAccessible.push(o),r.set(n.gid,l)}return t},ar(t){t=this.Hi.get(t.buildingID);return t?t.scene:null},cr(t){t=this.Hi.get(t.buildingID);return t?t.gate:null},_r(i,r,n,s){i=this.Hi.get(i.buildingID);if(i){let t=i.floors,e=(t||(t=new Map,i.floors=t),t.get(r));e||(e=new Map,t.set(r,e)),e.set(n,s)}},mr(t,e,i){var t=this.Hi.get(t.buildingID);return(t=t&&t.floors)&&(t=t.get(e))?t.get(i):null},yr(t,e){if(null!=t){var i=t.layerGroups;for(let t=0;t<i.length;t++)if(i[t].gid==e)return i[t]}return null}});var en={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},p={h:0,s:0,l:0},rn={h:0,s:0,l:0};function nn(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function sn(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function ln(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function on(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}Object.assign(nn.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(t,e,i){return t=Tt.euclideanModulo(t,1),e=Tt.clamp(e,0,1),i=Tt.clamp(i,0,1),0===e?this.r=this.g=this.b=i:(this.r=sn(e=2*i-(i=i<=.5?i*(1+e):i+e-i*e),i,t+1/3),this.g=sn(e,i,t),this.b=sn(e,i,t-1/3)),this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(h=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r,n,s,l=h[1],o=h[2];switch(l){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return r=parseFloat(i[1])/360,n=parseInt(i[2],10)/100,s=parseInt(i[3],10)/100,t(i[5]),this.setHSL(r,n,s)}}else if(h=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=h[1],h=l.length;if(3===h)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return e&&0<e.length?this.setColorName(e):this},setColorName:function(t){var e=en[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){e=0<(e=void 0===e?2:e)?1/e:1;return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=ln(t.r),this.g=ln(t.g),this.b=ln(t.b),this},copyLinearToSRGB:function(t){return this.r=on(t.r),this.g=on(t.g),this.b=on(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,i=this.r,r=this.g,n=this.b,s=Math.max(i,r,n),l=Math.min(i,r,n),o=(l+s)/2;if(l===s)a=e=0;else{var h=s-l,a=o<=.5?h/(s+l):h/(2-s-l);switch(s){case i:e=(r-n)/h+(r<n?6:0);break;case r:e=(n-i)/h+2;break;case n:e=(i-r)/h+4}e/=6}return t.h=e,t.s=a,t.l=o,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){return this.getHSL(p),p.h+=t,p.s+=e,p.l+=i,this.setHSL(p.h,p.s,p.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(p),t.getHSL(rn);var t=Tt.lerp(p.h,rn.h,e),i=Tt.lerp(p.s,rn.s,e),e=Tt.lerp(p.l,rn.l,e);return this.setHSL(t,i,e),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return this.r=t[e=void 0===e?0:e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}}),nn.NAMES=en;class hn{constructor(){}static round(t){return 0<t.toFixed(2)?Math.ceil(t.toFixed(2)):Math.floor(t.toFixed(2))}static generateUUID(){var e=[];for(let t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,t=e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&i]+e[i>>8&255]+"-"+e[i>>16&15|64]+e[i>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&n]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255];return e.length=0,t.toUpperCase()}static findNearNthPowerOfTwo(t){t-=1;return(t=(t=(t=(t=(t|=t>>1)|t>>2)|t>>4)|t>>8)|t>>16)<0?1:1+t}static rgbToArray(t){var e=new nn;return e.setStyle(t),[e.r,e.g,e.b]}static toRgba(t){var e;return void 0===t?t:"number"!=typeof t?3<=(e=t.split(",")).length?"rgba("+parseInt(e[0])+","+parseInt(e[1])+","+parseInt(e[2])+",1)":t:"rgba("+parseInt(255*new nn(t).r)+","+parseInt(255*new nn(t).g)+","+parseInt(255*new nn(t).b)+",1)"}static toColor(t){var e;return"number"==typeof t?t:3<=(e=t.split(",")).length?parseInt(e[0])<<16|parseInt(e[1])<<8|parseInt(e[2]):(console.error("color format error",t),0)}static cov(n){var t=[],e=[0,0],s=[];for(let t=0;t<n.length;t++)e[0]+=n[t].x,e[1]+=n[t].y;e[0]=e[0]/n.length,e[1]=e[1]/n.length;for(let t=0;t<n.length;t++)s.push([n[t].x-e[0],n[t].y-e[1]]);var l=[];for(let e=0;e<s[0].length;e++){var i=[];for(let t=0;t<s.length;t++)i.push(s[t][e]);l.push(i)}for(let r=0;r<l.length;r++){var o=[];for(let i=0;i<s[0].length;i++){let e=0;for(let t=0;t<l[r].length;t++)e+=l[r][t]*s[t][i];e/=n.length-1,o.push(e)}t.push(o)}return t}static eig(t){var e=(t[0][0]+t[1][1])/2,i=t[0][0]*t[1][1]-t[1][0]*t[0][1],r=e+Math.sqrt(e*e-i),e=e-Math.sqrt(e*e-i);return 0==t[0][1]&&0==t[1][0]?{eigValue:[r,e],eigVect:[[1,0],[0,1]]}:(i=(r-t[0][0])/t[0][1],t=(e-t[0][0])/t[0][1],{eigValue:[r,e],eigVect:[[1/Math.sqrt(1+i*i),i/Math.sqrt(1+i*i)],[1/Math.sqrt(1+t*t),t/Math.sqrt(1+t*t)]]})}}class an{constructor(t,e,i){this.fe=Object.assign({tile:!0,isPreview:!1},t),this.fe.buildingID=t.mapID,this.Or=!!t.map,this.jr=t.map?t.map.getDataManager():new tn,this.ue=[],this.kr={},this.Er=t.statistics||null,this.Mr=e,this.Nr=i,this.Tr=hn.generateUUID(),this.Ar()}dispose(){this.fe=null,this.Or||this.jr.pe(()=>{}),this.jr=null,this.Mr=null,this.Nr=null}query(t,e){if(this.Rr(),null===t.buildings){var i=[];for(let t=0;t<this.ue.length;t++)i.push({buildingID:this.ue[t].bid});t.buildings=i}var r=[];if(!t.onlyInBuilding){t.buildingID=this.fe.mapID,null===t.buildingID&&(t.buildingID=this.fe.mapID);var n=this.Ir(t);for(let t=0;t<n.length;t++)n[t].buildingID=null,r.push(n[t])}var s=t.buildings;for(let e=0;e<s.length;e++){var l=this.Lr(s[e].buildingID),o=(t.buildingID=l,t.levels=s[e].levels,this.Ir(t));for(let t=0;t<o.length;t++)o[t].buildingID=s[e].buildingID,r.push(o[t])}e&&e(r)}}Object.assign(an.prototype,{Ar(){this.ue=[],this.Or&&(t=this.fe.map.getMapOptions(),this.fe.mapID=t.mapID,this.fe.buildingID=t.mapID,this.fe.appName=t.appName,this.fe.key=t.key,this.fe.license=t.license,this.fe.mapURL=t.mapURL,this.fe.mapURLAbsolute=t.mapURLAbsolute,this.fe.buildings=t.buildings,this.fe.buildingOptions=t.buildingOptions,this.fe.isPreview="undefined"!=typeof KjWzhWlSj&&!!KjWzhWlSj.ProtoDef,this.fe.tile=t.tile);var t={mapID:this.fe.mapID,buildingID:this.fe.mapID,appName:this.fe.appName,key:this.fe.key,buildings:this.fe.buildings,license:this.fe.license,mapURL:this.fe.mapURL,mapURLAbsolute:this.fe.mapURLAbsolute,merge:this.fe.merge,tile:this.fe.tile,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj&&!!KjWzhWlSj.ProtoDef,uuid:this.Tr,bid:this.fe.buildingID||null,isOutdoor:!0};this.Sr(t)},Sr(i){setTimeout(()=>{this.fe.tile?this.jr.load(i,(t,e)=>{this.Fr(t,e,i.isOutdoor),this.Er&&this.Er._analyse(t,e,i)}):this.jr.loadWhole(i,(t,e)=>{this.Fr(t,e,i.isOutdoor),this.Er&&this.Er._analyse(t,e,i)})},0)},Rr(){if(!(0<this.ue.length)){var t=this.fe.mapID,e=this.jr.getData({buildingID:t});if(e&&e.buildings)for(let t=0;t<e.buildings.length;t++)this.ue.push(e.buildings[t])}},Fr(t,e,i){if("error"==t&&this.Nr&&this.Nr(e),"decode"===t){if(i&&(this.kr[""+e.scene.mid]=!1,e.scene.buildings)&&0<e.scene.buildings.length)for(let t=0;t<e.scene.buildings.length;t++){var r=e.scene.buildings[t],n={mapID:this.fe.mapID,buildingID:null,appName:this.fe.appName,key:this.fe.key,license:this.fe.license,mapURL:this.fe.mapURL,mapURLAbsolute:this.fe.mapURLAbsolute,merge:this.fe.merge,loadNavi:!0,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj,tile:this.fe.tile,type:this.fe.type,bid:null,isOutdoor:!1,uuid:this.Tr},n=(n.buildingID=r.mid,n.bid=r.bid,Object.assign({},n));this.kr[""+r.mid]=!1,this.Sr(n)}if(this.Or&&!this.fe.tile){let t=this.kr[""+e.scene.mid]=!0;for(var s in this.kr)this.kr[s]||(t=!1);t&&this.Mr&&this.Mr()}}if("complete"==t){let t=this.kr[""+e.mid]=!0;for(var l in this.kr)this.kr[l]||(t=!1);t&&this.Mr&&this.Mr()}},Pr(t){let e=b.NONE;return 0!=(t.se&b.MODEL)&&(e|=b.MODELGROUP),0!=(t.se&b.LABEL)&&(e|=b.LABELGROUP),0!=(t.se&b.FACILITY)&&(e|=b.FACILITYGROUP),0!=(t.se&b.EXTERNALMODEL)&&(e|=b.EXTERNALMODELGROUP),e},Gr(t){if(Array.isArray(t.ne))return t.ne;let e=this.fe;null!==t.buildingID&&(e={buildingID:t.buildingID,mapID:t.buildingID});t=this.jr.getData(e);if(!t)return[];var i,r=[];for(i of t.getChildren())r.push(i[1].gid);return r},Dr(e,i,r,n){if(0!=i)for(let t=0;t<i;t++){if(!e[t].p(r))return!1;e[t].v(r,n)}return!0},Vr(t,e,i){return{level:t,type:e.getType(),FID:e.fid,name:e.name,ename:e.ename,eid:e.eid,typeID:e.type,center:void 0!==e.getCenter?Object.assign({z:e.height},e.getCenter()):Object.assign({z:e.height},e.getCoordinates()[0]),distance:i.K}},Br(t){t.sort((t,e)=>t.level==e.level&&t.type==e.type&&t.distance&&e.distance?t.distance-e.distance:0)},Ir(t,e,i){let r=this.fe;null!==t.buildingID&&(r={buildingID:t.buildingID,mapID:t.buildingID});var n=this.jr.getData(r);if(!n)return[];var s=this.Gr(t),l=this.Pr(t);if(l===b.NONE)return[];var o,h=t.he,a=h.length,u=[];for(o of n.getChildren()){var f,c=o[0];if(-1!==s.indexOf(c))for(f of o[1].getChildren()){var d=f[1];if(0!=(d.getType()&l))for(var p of d.getChildren()){var p=p[1],v={K:void 0};this.Dr(h,a,p,v)&&u.push(this.Vr(c,p,v))}}}return u},Lr(e){let i=null;var r=this.ue;for(let t=0;t<r.length;t++)if(r[t].bid===e){i=r[t].mid;break}return i}});let V={NaviNodeType_NULL:-1,NaviNodeType_COMMON:0,NaviNodeType_SIDE:1,NaviNodeType_FLOOR:2,NaviNodeType_EXTENT:3,NaviLiftType_NULL:0,NaviLiftType_Lift:1,NaviLiftType_Stair:2,NaviLiftType_Escalator:3,NaviLiftType_Accessible:4,NaviLiftType_Ramp:5,NaviLiftEntry_BOTH:0,NaviLiftEntry_UP:1,NaviLiftEntry_DOWN:2,NaviLiftEntry_FORBID:3,NaviEntranceType_NULL:0,NaviEntranceType_EXIT:1,NaviEntranceType_ENTRANCE:2,NaviEntranceType_ACCESS:3,NaviRoadRank_MAIN:1,NaviRoadRank_MINOR:2,NaviRoadRank_NARROW:3,NaviRoadEntry_BOTH:0,NaviRoadEntry_FORWARD:1,NaviRoadEntry_BACK:2,NaviRoadEntry_FORBID:3,NaviRoadPass_NULL:-1,NaviRoadPass_NOT_THROUGH:0,NaviRoadPass_THROUGH:1,NaviZoneType_NULL:-1,NaviZoneType_PASS_UNRESTRAINT:0,NaviZoneType_PASS_THROUGH:1,NaviZoneType_PASS_NOT_THROUGH:2,NaviZoneType_NO_ENTRY:3,NaviZoneType_CORRIDOR:4,NaviModelPassType_PASS_THROUGH:0,NaviModelPassType_PASS_NOT_THROUGH:1,NaviModelPassType_NOT_PASS:2,NaviModelPassType_DECORATE:3,NaviRoadHinderType_HINDER_GENERAL:0,NaviRoadHinderType_HINDER_HIGH:1,NaviObstructType_MODEL:0,NaviObstructType_EXTENT:1},w={Drive:1,Walk:0},un={Entry_BOTH:0,Entry_FORWARD:1,Entry_BACK:2,Entry_FORBID:3};class fn{constructor(t,e,i,r){this.Zr=t,this.Cr=e,this.Wr=i||[],this.Ur=r||[]}get level(){return this.Zr}get length(){return this.Cr}get pointList(){var i=[];for(let t=0,e=this.Wr.length;t<e;t++)i.push({x:this.Wr[t].x,y:this.Wr[t].y,level:this.Zr});return i}}Object.assign(fn.prototype,{pe(){this.Wr=[],this.Ur=[]}});class j{constructor(t=0,e=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){var i=t.x,r=t.y,t=t.z,n=e.x,s=e.y,e=e.z;return this.x=r*e-t*s,this.y=t*n-i*e,this.z=i*s-r*n,this}angleTo(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(t=this.dot(t)/e,e=Math.max(-1,Math.min(1,t)),Math.acos(e))}normalize(){return this.divideScalar(this.length()||1)}divideScalar(t){return this.multiplyScalar(1/t)}}class R{constructor(){this.Ni=0,this.Jt={},this.se=0,this.qr=[],this.Yr=[],this.Xr=0,this.zr=[],this.Hr=!1,this.Qr=!1,this.Kr=0,this.Jr=!1,this.$r=[]}}Object.assign(R.prototype,{set tn(t){-1!=t&&(this.se|=t)},get tn(){return 3&this.se},set rn(t){this.se|=t<<2},get rn(){return this.se>>2&7},set nn(t){this.se|=t<<5},get nn(){return this.se>>5&3},Ar(t){this.Ni=t,this.Jt={x:0,y:0},this.se=0,this.Xr=0,this.Hr=!1,this.Qr=!1},sn(t){return this.Ni==t.Ni},ln(e){this.Ni=e.Ni,this.Jt=Object.assign({},e.Jt),this.se=e.se,this.qr=[];for(let t=0;t<e.qr.length;t++)this.qr[t]=e.qr[t];this.Yr=[];for(let t=0;t<e.Yr.length;t++)this.Yr[t]=e.Yr[t];this.Xr=e.Xr,this.zr=[];for(let t=0;t<e.zr.length;t++)this.zr[t]=e.zr[t];this.Hr=e.Hr,this.Qr=e.Qr}});class cn extends R{constructor(){super(),this.hn=0,this.Zr=0,this.an=null,this.Kr=0,this.un=null,this.rn=null}}class E{constructor(){this.Ni=0,this.cn=-1,this.Rt={},this.dn=-1,this.It={},this.Cr=0,this.se=0,this.pn=[],this.vn=-1,this.bn=!1,this.yn=0}}Object.assign(E.prototype,{set gn(t){this.se|=t},get gn(){return 3&this.se},set mn(t){this.se|=t<<2},get mn(){return this.se>>2&3},set _n(t){this.se|=t<<4},get _n(){return this.se>>4&3},set wn(t){t?this.se|=16:this.se&=-17},get wn(){return 16&this.se?1:0},xn(e){this.Ni=e.Ni,this.cn=e.cn,this.Rt=Object.assign({},e.Rt),this.dn=e.dn,this.It=Object.assign({},e.It),this.Cr=e.Cr,this.se=e.se,this.pn=[],this.vn=e.vn;for(let t=0;t<e.pn.Cr;t++)this.pn[t]=e.pn[t]},On(){this.Cr=D.distanceOfTwoPoints(this.Rt,this.It)},jn(){var t=this.Rt.x-this.It.x,e=this.Rt.y-this.It.y;this.Cr=Math.abs(t)+Math.abs(e)},kn(){var t={};return t.x=(this.Rt.x+this.It.x)/2,t.y=(this.Rt.y+this.It.y)/2,t}});class dn{constructor(t,e,i,r){this.Ni=t,this.Zr=e||-1,this.se=i,this.$t=r,this.En=r&&r.length?r.length-1:0,this.Mn=0,this.Nn=null,this.Tn=null,this.An=[],this.Rn=[],this.In=null,this.Ct=new Vt,this.Ct.Bt(this.$t)}get Ln(){return 3&this.se}set Ln(t){this.se|=t}get In(){return null==this.In&&(this.In=D.rt(this.$t,this.En)),this.In}get bound(){return this.Ct}}Object.assign(dn.prototype,{Sn(t){return!!D.W(t,this.Ct.Gt,this.Ct.Dt)&&D.X(this.$t,t,this.En)},nt(e,i){var r={};for(let t=0;t<this.En;t++){var n=this.$t[t],s=this.$t[(t+1)%this.En];if(1==D.nt(n,s,e,i,r))break}return r}});class pn{constructor(t,e,i,r,n,s){this.Ni=t,this.Fn="",this.$t=r,this.En=r&&r.length?r.length-1:0,this.Xt=n,this.Pn=s,this.se=i,this.Zr=e,this.Gn=[],this.Dn=[],this.Vn=[],this.Nn=null,this.Tn=null,this.An=[],this.Bn=0,this.Mn=0,this.In=null,this.Zn=!1,this.Ct=new Vt,this.Ct.Bt(this.$t)}set pass(t){this.se|=t}get pass(){return 3&this.se}get area(){return null==this.In&&(this.In=D.rt(this.$t,this.En)),this.In}get bound(){return this.Ct}}Object.assign(pn.prototype,{Sn(e){if(this.Pn)for(let t=0;t<this.Pn.length;t++)if(D.X(e,this.Pn[t],this.Pn[t].length-1))return!1;return D.X(e,this.$t,this.En)},toZone(){return new dn(this.Ni,this.Zr,this.se,this.$t)}});class vn extends R{constructor(){super(),this.Zr=0,this.vn=-1,this.Cn=[],this.an=null}}Object.assign(vn.prototype,{Wn(t,e,i){if(!t)return[];var r=[];i=i||this.Cn;for(var n=0;n<i.length;n++){var s=i[n];t==s.rn&&(e&&(s.Kr=s.Kr+e),r.push(s))}return r}});class M{constructor(t,e,i,r){this.Zr=0,this.se=r,this.Un=t,this.qn=e,this.Yn=[],this.Xn=[],this.zn=[],this.Hn=[],this.Qn=new Map,this.Kn=new Map,this.Jn=[],this.$n=new Map,this.ts=new Map,this.es=0,this.rs=0,this.ns()}queryContainIdOfExtent(t){return this.ss(t)}queryContainExtentID(t){return this.ls(t)}}Object.assign(M.prototype,{pe(){this.Un=null,this.qn=null,this.Yn=null,this.Xn=null,this.zn=null,(this.Hn=null)!=this.Qn&&(this.Qn.clear(),this.Qn=null),null!=this.Kn&&(this.Kn.clear(),this.Kn=null),(this.Jn=null)!=this.$n&&(this.$n.clear(),this.$n=null),null!=this.ts&&(this.ts.clear(),this.ts=null)},hs(){this.Hn=[];for(let t=0;t<this.Xn.length;t++){var e=this.Xn[t].toZone();this.Hn.push(e)}for(let t=0;t<this.Yn.length;t++){var i=this.Xn[t].toZone();this.Hn.push(i)}},us(e){for(let t=0;t<this.Hn.length;t++){var i=this.Hn[t];if(i&&i.Ni==e)return i}return null},cs(e){for(let t=0;t<this.Hn.length;t++){var i=this.Hn[t];if(i&&1==i.contain(e))return i}return null},ss(i){if(0!==this.Xn.length&&i)for(let t=0,e=this.Xn.length;t<e;t++){var r=this.Xn[t];if(r.Sn(i))return r.Ni}return 0},ls(i){if(0!==this.Xn.length&&i)for(let t=0,e=this.Xn.length;t<e;t++){var r=this.Xn[t];if(r.Sn(i))return r.vn}return 0},ds(e,i){if(0!=this.zn.length&&e&&i)for(let t=0;t<this.zn.length;t++)if(this.zn[t].isCross(e,i))return!0;return!1},ns(){this.es=0;for(let t=this.rs=0;t<this.qn.length;)null==this.qn[t]?this.qn.splice(t,1):(this.qn[t].Ni>this.rs&&(this.rs=this.qn[t].Ni),t++);for(let t=0;t<this.Un.length;)null==this.Un[t]?this.Un.splice(t,1):(this.Un[t].Ni>this.es&&(this.es=this.Un[t].Ni),t++)},ps(t){t=this.$n.get(t);return void 0===t?null:t},vs(t){t=this.ts.get(t);return void 0===t?null:t},bs(e){let i=Number.MAX_VALUE,r=null;for(let t=0;t<this.Xn.length;++t){var n=this.Xn[t];n.contain(e)&&n.area<i&&(i=cur_area,r=n)}for(let t=0;t<this.Yn.size();++t){var s=this.Yn[t];s.contain(e)&&s.area<i&&(i=cur_area,r=s)}return r||null},ys(e){let i=Number.MAX_VALUE,r=null;for(let t=0;t<this.Yn.length;++t){var n=this.Yn[t];n.Sn(e)&&n.area<i&&(i=n.area,r=n)}return r||null},gs(){return++this.es},_s(){return++this.rs},ws(t){this.es=t},xs(t){this.rs=t},Os(){for(let t=0;t<this.Un.length;t++){var e=this.Un[t];e&&(e instanceof vn?this.$n.set(e.vn,t):this.$n.set(e.Ni,t))}},js(){for(let t=0;t<this.qn.length;t++){var e=this.qn[t];e&&this.ts.set(e.Ni,t)}},ks(){this.Kn.clear();for(let t=0;t<this.qn.length;t++){let e=this.qn[t];if(null!=e){var i=e.mn;if(V.NaviRoadEntry_BOTH==i||V.NaviRoadEntry_FORWARD==i){var r=e.cn;let t=this.Kn.get(r);t||(t=[],this.Kn.set(r,t)),null==t.find(function(t){return t.Es==e.dn})&&t.push({Es:e.dn,Cr:e.Cr})}if(V.NaviRoadEntry_BOTH==i||V.NaviRoadEntry_BACK==i){r=e.dn;let t=this.Kn.get(r);t||(t=[],this.Kn.set(r,t)),null==t.find(function(t){return t.Es==e.cn})&&t.push({Es:e.cn,Cr:e.Cr})}}}},Ms(e){for(let t=0;t<this.Un.length;t++)if(this.Un[t].Ni==e)return t;return-1},Ns(e){for(let t=0;t<this.qn.length;t++)if(this.qn[t].Ni==e)return t;return-1},Ts(e){var i=[],r=this.qn;for(let t=0;t<r.length;t++){var n=r[t],s=n.Rt,l=[];e.As([s,n.It],l)?i.push({road:n,crss:l,index:t}):e.Rs(s)&&i.push({road:n,crss:[],index:t})}return i},Is(e){let i=null,r=Number.MAX_VALUE;for(let t=0;t<this.Yn.length;t++){var n=this.Yn[t];D.X(e,n.$t,n.En)&&r>n.area&&(i=n,r=n.area)}return i},Ls(e){let i=-1;for(let t=0;t<this.Hn.length;t++){var r=this.Hn[t];if(D.X(e,r.$t,r.En)){i=r.Ni;break}}return i},Ss(){var t=this.Yn.length,t=parseInt(Math.random()*t);return this.Yn[t]},Fs(){for(let t=0;t<this.Jn.length;t++)this.Jn[t]=!1},Ps(){var e=[];for(let t=0;t<this.Un.length;t++){var i=this.Un[t];i.rn!=V.NaviLiftType_NULL&&e.push(i)}return e},Gs(e){let i=null;for(let t=0;t<this.Xn.length;t++)if(e==this.Xn[t].Ni){i=this.Xn[t];break}if(!i)return null;var r=[];for(let t=0;t<this.Un.length;t++){var n=this.Un[t];D.X(n.Jt,i.$t,i.En)&&r.push(n)}var s=[];for(let t=0;t<this.qn.length;t++){var l=this.qn[t];D.X(l.Rt,i.$t,i.En)&&s.push(l)}var o=[];for(let t=0;t<this.Yn.length;t++){var h=this.Yn[t];D.X(h.Xt,i.$t,i.En)&&o.push(h)}var t=new M(r,s,!0,1);return t.Yn=o,t.Xn=[i],t}});class bn{constructor(){this.Ds=null}}Object.assign(bn.prototype,{pe(){this.Ds=null},Vs(t){this.Ds=t},Bs(t,e){let i=null;return 0==e?i=Yr.xi(t):1==e?i=Yr.Oi(t):2==e&&(i=Yr.ji(t)),{points:i[0],holes:i.slice(1)}},Zs(t,e,i){let r=null;return 0==i?r=Wr.xi(t,e):1==i?r=Wr.Oi(t,e):2==i&&(r=Wr.ji(t,e)),{points:r[0],holes:r.slice(1)}},Cs(t){if(t&&"string"!=typeof t)for(var e in t){var i=t[e];if("vertices"==e||"vertex"==e)for(var r in i)r%2==0&&(i[r]=-i[r]);else"scene_data"==e?(i.x=-i.x,i.defCenX=-i.defCenX):this.Cs(i)}},Ws(t){var e,i;return""!=t&&t?(e=[],i=[],0<=(t=t).indexOf("|")||0<=t.indexOf("-")||0<=t.indexOf(",")?(i=t.split(/[|,-]/),e.push.apply(e,i)):e.push(t),e):[]},Us(t,i,r,n){var s={},l=[],o=[],h=[],a=[],u=[],f=this.Ds.fileVer,c=n.naviExtents&&0<n.naviExtents.length?n.naviExtents:i.extentLayer;for(let e=0,t=c.length;e<t;e++){var d=c[e];let t=null;t=1===f?this.Bs(d.geo,2):this.Zs(d.idxs,d.pts,2);d={eid:d.id||d.eid,geoArr:t.points,holes:t.holes};o.push(d)}for(let t=0,e=i.labelLayer.length;t<e;t++)s[i.labelLayer[t].eid]=i.labelLayer[t];for(let e=0,t=i.modelLayer.length;e<t;e++){var p=i.modelLayer[e],v=r.modelLayer[e],b={};b.fid=v.fid,b.eid=p.eid,b.pass=v.pass,b.Xt=(1===f?this.Bs(s[p.eid].geo,0):this.Zs(s[p.eid].idxs,s[p.eid].pts,0)).points;let t=null;t=1===f?this.Bs(p.geo,2):this.Zs(p.idxs,p.pts,2),b.geoArr=t.points,b.holes=t.holes,l.push(b)}if(n&&n.naviNodes)for(let t=0,e=n.naviNodes.length;t<e;t++){var y=n.naviNodes[t];y.geoArr=(1===f?this.Bs(y.geo,0):this.Zs(y.idxs,y.pts,0)).points,y.linkSegArr=this.Ws(y.linkSeg),y.liftFloorArr=this.Ws(y.liftFloor),h.push(y)}if(n&&n.naviSegments)for(let t=0,e=n.naviSegments.length;t<e;t++){var g=n.naviSegments[t];g.geoArr=(1===f?this.Bs(g.geo,1):this.Zs(g.idxs,g.pts,1)).points,g.m_Id=n.mid,a.push(g)}if(n&&n.naviZones)for(let e=0,t=n.naviZones.length;e<t;e++){var m=n.naviZones[e];let t=null;t=1===f?this.Bs(m.geo,2):this.Zs(m.idxs,m.pts,2),m.geoArr=t.points,m.holes=t.holes,m.m_Id=n.mid,u.push(m)}return{level:t,extentLayer:o,modelLayer:l,naviSegments:a,naviNodes:h,naviZones:u}}});class yn{constructor(t){this.qs=t,this.Ys=null,this.Xs=null,this.zs=-1,this.Hs=-1,this.Qs=f.MODULE_SHORTEST,this.Ks=[],this.qs.Os(),this.qs.js(),this.qs.ks(),this.Js=5e-4,this.$s=0,this.tl=0}}Object.assign(yn.prototype,{el(e,i){if(null!=this.qs.Un&&0!=this.qs.Un.length&&this.qs.Un[0]instanceof vn){this.$s=10;var r={};for(let t=0;t<this.qs.Un.length;t++){var n=this.qs.Un[t],s=n.il.$t,l=s.length-1,o=this.qs.Un[t].vn,l=(r[o]=[1,1,Number.MAX_VALUE],D.X(e,s,l)&&(r[o][0]=0,e.level==n.Zr)&&n.vn,D.X(i,s,l)&&(r[o][1]=0,i.level==n.Zr)&&n.vn,D._t(s)),n=D.K(e,l)+D.K(i,l);r[o][2]=n}var t,h=this.qs.Kn;for(t of h.keys())h.get(t).sort(function(t,e){var i=r[t.Es][0]+r[t.Es][1]-(r[e.Es][0]+r[e.Es][1]);return 0==i?r[t.Es][2]-r[e.Es][2]:i})}},rl(t,e,i){this.nl(i),this.Ys=t,this.Xs=e,this.zs=t.Ni,this.Hs=e.Ni;i=this.qs.ps(this.zs);return null!=i&&null!=(t=this.qs.ps(e.Ni))&&((e=[]).push(t),this.sl(this.qs,i,e))?G.ROUTE_SUCCESS:G.ROUTE_FAILED_CANNOT_ARRIVE},ll(t,e,i){this.nl(i),this.Ys=t,this.zs=t.Ni;i=this.qs.ps(this.zs);if(null==i)return G.ROUTE_FAILED_CANNOT_ARRIVE;var r,n=[];for(r of e)if(r&&t.Ni!=r.Ni){var s=this.qs.ps(r.Ni);if(null==s)return G.ROUTE_FAILED_CANNOT_ARRIVE;n.push(s)}return this.sl(this.qs,i,n)?G.ROUTE_SUCCESS:G.ROUTE_FAILED_CANNOT_ARRIVE},ol(t,e,i,r){i&&r&&this.el(i,r),this.zs=t,this.Hs=e;i=this.qs.ps(t);return null!=i&&null!=(r=this.qs.ps(e))&&((t=[]).push(r),this.sl(this.qs,i,t))?G.ROUTE_SUCCESS:G.ROUTE_FAILED_CANNOT_ARRIVE},hl(){var t=[],e=this.qs.ps(this.Hs),i=[],e=(i.push(e),[]);return this.al(i,this.qs.Un,e,[]),t.push(...e),t},ul(t){var e,i=new Map;for(e of t){var r=[],n=this.qs.ps(e.Ni),s=[],n=(s.push(n),[]);this.al(s,this.qs.Un,n,[]),r.push(...n),i.set(e,r)}return i},pe(){this.qs.pe(),this.qs=null,this.Ys=null,this.Xs=null},sl(i,t,e){if(null==i)return!1;var r=i.Un.length;if(t<0||r<=t)return!1;this.fl(e,t);for(let t=0;t<r;++t)i.Un[t].Kr=Number.MAX_VALUE,i.Un[t].Jr=!1,i.Un[t].$r=[];i.Un[t].Kr=0;var n=e.length;let s=0;for(var l=[],o=(l.push(i.Un[t]),this.cl.bind(this));0<l.length;){let t=null;t=l[0]instanceof vn?l[0].vn:l[0].Ni,l.splice(0,1);var h=i.ps(t);if(null!=h){var a=i.Un[h];if(!a.Jr){a.Jr=!0;var u=e.indexOf(h);if(-1!=u&&++s==n)return!0;if(0!=i.Kn.size){var f=i.Kn.get(t);if(f)for(let t=0;t<f.length;t++){var c=f[t],d=c.Es,d=i.ps(d);if(null!=d){var p,v,c=c.Cr,b=i.Un[d];let t=0,e=(a.$r&&0<a.$r.length&&(v=i.Un[a.$r],p=i.Un[d],v)&&p&&(v={x:v.Jt.x-a.Jt.x,y:v.Jt.y-a.Jt.y,z:0},p={x:p.Jt.x-a.Jt.x,y:p.Jt.y-a.Jt.y,z:0},v=D.bt(v,p),Math.abs(v-90)<5||Math.abs(v-270)<5)&&(t=.5+this.tl),this.$s+c+a.Kr+t);e=Number(e.toFixed(3)),b.Jr||(b.Kr>e?(b.Kr=e,b.$r=[],b.$r.push(h),l.push(i.Un[d]),l.sort(o)):Math.abs(b.Kr-(c+a.Kr+t))<1e-12&&-1==b.$r.indexOf(h)&&b.$r.push(h))}}}}}}return!(s<n)},cl(t,e){return t.Kr-e.Kr},fl(t,e){let i=t.indexOf(e);for(;-1!=i;)t.splice(i,1),i=t.indexOf(e)},nl(t){if(this.Qs!=t){var e,i,r={};for(let t=0;t<this.qs.qn.length;t++){var n=this.qs.qn[t],s=n.cn,l=n.dn,n=n.gn;r.hasOwnProperty(s)||(r[s]={}),r[s][l]=n,r.hasOwnProperty(l)||(r[l]={}),r[l][s]=n}if(f.MODULE_SHORTEST==t)for(var o of this.qs.Kn.keys())for(e of this.qs.Kn.get(o)){var h=e.Es,h=r[o][h];e.Cr=e.Cr/h}else if(f.MODULE_BEST==t)for(var a of this.qs.Kn.keys())for(i of this.qs.Kn.get(a)){var u=i.Es,u=r[a][u];i.Cr=i.Cr*u}this.Qs=t}},dl(t,e,i,r){0!=e[t].$r.length&&(t=e[t].$r[0],i.push(e[t]),r.count++,this.dl(t,e,i,r))},al(e,i,r,n){for(let t=0;t<e.length;t++){var s=e[t],l=(r.push(i[s]),{count:1});this.dl(s,i,r,l),n.push(l.count)}}});class gn extends pn{constructor(){super(),this.Ni=-1,this.pl=[]}}class mn{constructor(){this.D=null,this.St=null,this.vl=null,this.K=0,this.bl=!1,this.yl=V.NaviObstructType_MODEL}}class _n{constructor(t){this.Ni=null,this.gl=null,this.ml=null,this.qs=t,this._l=new Map,this.wl=new Map,this.xl=new Map,this.Ol=new Map,this.jl=new Map,this.kl=[],this.El=Number.INT_MIN,this.Ml=Number.INT_MIN,this.Nl=-1,this.Ys=null,this.Xs=null,this.Tl=[],this.Qs=f.MODULE_SHORTEST,this.Al=new Map,this.Rl=new Map,this.Il=new Map,this.Ll=[],this.Sl=[],this.Fl=[],this.Pl=[],this.Gl=100,this.Dl=-1,this.Vl=15,this.Bl=.1,this.Zl=[],this.Cl=[],this.Wl=[],this.Ul=[],this.ql=!1,this.Yl=[],this.se=null,this.Xl(),this.zl(),this.Hl(),this.Ql(),this.Kl(),this.Jr=!1,this.Jl=[],this.se=null,this.tl=0}set assignedPts(t){this.Cl=t}get assignedPts(){return this.Cl}get obstruct(){return this.ql}set obstruct(t){this.ql=t}get level(){return this.Zr}set level(t){this.Zr=t}}Object.assign(_n.prototype,{$l(t){var e,i=null==t.eo?null:t.eo;t instanceof R?this.Ys=t:(e=new R,this.io(t,e,i)||this._failedInsertPts.push(t),this.Ys=e)},ro(t){var e,i=null==t.eo?null:t.eo;t instanceof R?this.Xs=t:(e=new R,this.io(t,e,i)||this._failedInsertPts.push(t),this.Xs=e)},no(t){var e=this.qs.Xn[0].$t;return!!D.X(t,e,e.length-1)},rl(t,e,i){var r=[],i=(this.El=t instanceof R?this.so(t.Jt):this.so(t),this.Ml=e instanceof R?this.so(e.Jt):this.so(e),i&&(this.Qs=i),t.process||t instanceof R||(this.oo(this.El),r.push(this.El),this.Pl=[]),e.process||e instanceof R||r.includes(this.Ml)||(this.oo(this.Ml),this.Pl=[]),this.ho(this.El)),r=this.ho(this.Ml);if(t instanceof R)this.Ys=t;else if(t.process)this.Ys=t.tmpNode;else if(G.ROUTE_FAILED_NO_START_ARRIVAL==this.ao(t,i))return G.ROUTE_FAILED_NO_START_ARRIVAL;if(e instanceof R)this.Xs=e;else if(e.process)this.Xs=e.tmpNode;else if(G.ROUTE_FAILED_NO_DEST_ARRIVAL==this.uo(e,r))return G.ROUTE_FAILED_NO_DEST_ARRIVAL;return null==this.Ys?G.ROUTE_FAILED_NO_DATA_START:null==this.Xs?G.ROUTE_FAILED_NO_DATA_DEST:this.fo()},ll(t,e,i){var r,n=[],i=(this.Tl=[],this.El=null==t.Jt?this.so(t):this.so(t.Jt),i&&(this.Qs=i),t.process||t instanceof R||(this.oo(this.El),n.push(this.El),this.Pl=[]),this.ho(this.El));if(t instanceof R)t.co=this.El,this.Ys=t;else{if(!t.process){if(G.ROUTE_FAILED_NO_START_ARRIVAL==this.ao(t,i))return G.ROUTE_FAILED_NO_START_ARRIVAL;t.tmpNode.co=this.El}this.Ys=t.tmpNode}if(null==this.Ys)return G.ROUTE_FAILED_NO_DATA_START;for(r of e){var s=null==r.Jt?this.so(r):this.so(r.Jt),l=(this.Ml=s,this.ml=r.ml,r.process||r instanceof R||n.includes(s)||(this.oo(s),this.Pl=[],n.push(s)),this.ho(s));r instanceof R?(r.co=s,this.Tl.push(r)):r.process?this.Tl.push(r.tmpNode):G.ROUTE_FAILED_NO_DEST_ARRIVAL==this.uo(r,l)?this.Tl.push(null):(!0===r.eo?r.tmpNode.eo=!0:r.tmpNode.do=!0,r.tmpNode.co=s,this.Tl.push(r.tmpNode)),null==this.Xs&&this.Tl.push(null)}var o,h=new Map,a=this.Tl,i=this.po(this.Ys,a);h.set(this.Ys,i);for(o of a){let t=[];o.eo&&(t=this.po(o,a)),h.set(o,t)}return h},vo(){this.Ul=[];for(let t=0;t<this.Cl.length;t++){var e={x:(e=this.Cl[t])[0],y:e[1]},i=this.so(e),i=this.bo(i,e);this.Ul.push(i)}this.kl.push(...this.Ul)},hl(){return this.kl},ul(){return this._resultVectorMap},pe(){this.gl=null,this.ml=null,this.qs.pe(),this.qs=null,this._l.clear(),this._l=null;for(var t of this.wl)t[1].pe();this.wl.clear(),this.wl=null;for(var e of this.Ol)e[1].pe();this.Ol.clear(),this.Ol=null;for(var i of this.xl)i[1].pe();this.xl.clear(),this.xl=null;for(var r of this.jl)r[1].pe();this.jl.clear(),this.jl=null,this.kl=[],this.Ys=null,this.Xs=null,this.Al.clear(),this.Al=null,this.Rl.clear(),this.Rl=null,this.Il.clear(),this.Ll=[],this.Sl=[],this.Fl=[],this.Pl=[],this.Yl=[],this.ql=!1},hr(){this.kl=[],this.yo(-1),this.yo(this.El),this.El=Number.INT_MIN,this.yo(this.Ml),this.Ml=Number.INT_MIN,this.mo(),this.Zl=[];var t=this.qs.qn.length;this.Nl<-2*t&&(this.Nl=-1);for(let t=0;t<this.Ll.length;t++){var e=this.Ll[t];this._o(e.co,e.vl,V.NaviRoadHinderType_HINDER_HIGH)}this.Ll=[],this.Sl=[],this.Fl=[],this.Pl=[]},wo(t){if(0<t.length&&(this.ql=!0),this.Yl=t,this.xl.clear(),this.jl.clear(),this.Yl){for(let t=0;t<this.Yl.length;t++){var i=this.Yl[t],r=this.xo(i);for(let e=0;e<r.length;e++){var n=r[e];let t=this.xl.get(n);t||(t=this.Oo(this.wl.get(n)),this.xl.set(n,t),this.oo(n),t=this.xl.get(n)),this.jo(t,i)}}for(var e of this.xl)this.jl.set(e[0],new yn(e[1]))}},jo(e,i){var r=e.Ts(i);for(let t=0;t<r.length;t++){var n,s,l=r[t],o=new E,h=(o.xn(l.road),o.mn),a=(o.mn=V.NaviRoadEntry_FORBID,o.ko=!0,(e.qn[l.index]=o).vn);1==l.crss.length&&(n=this.gs(),i.Rs(o.Rt)?this.Eo(l.crss[0],n,o.It,o.dn,h,a,e):this.Eo(o.Rt,o.cn,l.crss[0],n,h,a,e)),2<=l.crss.length&&(n=this.gs(),s=this.gs(),this.Eo(o.Rt,o.cn,l.crss[0],n,h,a,e),this.Eo(l.crss[l.crss.length-1],s,o.It,o.dn,h,a,e))}var t=new gn;t.Ni=this.Mo(),t.$t=i.$t,t.pass=V.NaviModelPassType_NOT_PASS,e.Yn.push(t)},Eo(t,e,i,r,n,s,l){let o,h;t instanceof R?o=t:((o=new R).Ni=e,o.Jt=t,l.Un.push(o)),i instanceof R?h=i:((h=new R).Ni=r,h.Jt=i,l.Un.push(h));e=new E;e.Ni=this._s(),e.cn=o.Ni,e.Rt=o.Jt,e.dn=h.Ni,e.It=h.Jt,e.mn=n,e.Cr=e.On(),e.vn=s,l.qn.push(e)},Mo(){return this.Nl--},No(t){var i={vl:null};if(1!==this.se){var r=this.so(t),n=this.ho(r).ys(t,-0);if(n&&(i.vl=n).pass!=V.NaviModelPassType_NOT_PASS&&(n.pass===V.NaviModelPassType_PASS_THROUGH||n.pass===V.NaviModelPassType_PASS_NOT_THROUGH)){if(0<n.Gn.length)return i;var s={},l=[],o=[],h=this.ho(r).qn;let e=!0;for(let t=0;t<n.En;t++){var a=n.$t[t],u=n.$t[t+1];for(let t=0;t<h.length;t++){var f=h[t];1===D.nt(a,u,f.Rt,f.It,s)&&V.NaviRoadEntry_FORBID!==f.mn&&(e=!1,(f={}).x=s.x,f.y=s.y,l.push(f),o.push(h[t]))}}if(!e){n.Gn=[],n.Vn=[],n.Dn=[];for(let t=0;t<l.length;t++){var c=l[t],d=o[t],c=this.To(r,c,d);c.Ao.push(d.Ni),c.tn=V.NaviNodeType_COMMON,d.mn===V.NaviRoadEntry_BOTH?c.entranceType=V.NaviEntranceType_ACCESS:D.X(d.Rt,n.$t,n.En)?(d.mn===V.NaviRoadEntry_FORWARD&&(c.entranceType=V.NaviEntranceType_EXIT),d.mn===V.NaviRoadEntry_BACK&&(c.entranceType=V.NaviEntranceType_ENTRANCE)):(d.mn===V.NaviRoadEntry_FORWARD&&(c.entranceType=V.NaviEntranceType_ENTRANCE),d.mn===V.NaviRoadEntry_BACK&&(c.entranceType=V.NaviEntranceType_EXIT)),n.Gn.push(c),n.Vn.push(c.entranceType),n.Dn.push(c.tn)}}}}return i},Ro(t){let e=null,i=Number.MAX_VALUE;for(var r of t.values())0<r.length&&r[0].K<i&&(e=r[0],i=r[0].K);return e},Io(e,i){var r=[];for(let t=0;t<i.length;t++){var n={},n=(Number.MAX_VALUE,D.tt(e,i[t].Rt,i[t].It,n));r.push({Lt:i[t].Ni,Rt:i[t].Rt,It:i[t].It,K:n,St:i[t]})}return r.sort(function(t,e){return t.K-e.K}),r},Lo(e,i,r){var n,s,l,o,h,a,u,f=[],c=[],d=[],p=[],v=[],b=[],y=(b.push(e),b.push(i.Rt),b.push(i.It),[]),t=(y.push(e),1e7/Math.sqrt((i.Rt.x-e.x)*(i.Rt.x-e.x)+(i.Rt.y-e.y)*(i.Rt.y-e.y))),t=(y.push({x:e.x+(i.Rt.x-e.x)*t,y:e.y+(i.Rt.y-e.y)*t}),1e7/Math.sqrt((i.It.x-e.x)*(i.It.x-e.x)+(i.It.y-e.y)*(i.It.y-e.y)));y.push({x:e.x+(i.It.x-e.x)*t,y:e.y+(i.It.y-e.y)*t});for(let t=0;t<r.length;t++)r[t].Lt==i.Lt?(n={},r[t].K=D.tt(e,r[t].Rt,r[t].It,n),d.push({Lt:r[t].Lt,Rt:r[t].Rt,It:r[t].It,K:r[t].K,St:r[t].St})):(n=D.Mt(r[t].Rt,r[t].It,b)).isintersect?1==n.type?.01<D.distanceOfTwoPoints(n.start,n.end)&&d.push({Lt:r[t].Lt,Rt:n.start,It:n.end,K:r[t].K,St:r[t].St}):2==n.type?("start"==n.outer?(r[t].It=n.start,r[t].K=D.K(n.start,e)):"end"==n.outer&&(r[t].Rt=n.end,r[t].K=D.K(n.end,e)),.01<D.distanceOfTwoPoints(n.start,n.end)&&d.push({Lt:r[t].Lt,Rt:n.start,It:n.end,K:r[t].K,St:r[t].St}),f.push({Lt:r[t].Lt,Rt:r[t].Rt,It:r[t].It,K:r[t].K,St:r[t].St})):3==n.type?("start"==n.outer?(r[t].It=n.start,r[t].K=D.K(n.start,e)):"end"==n.outer&&(r[t].Rt=n.end,r[t].K=D.K(n.end,e)),.01<D.distanceOfTwoPoints(n.end,n.start)&&d.push({Lt:r[t].Lt,Rt:n.start,It:n.end,K:r[t].K,St:r[t].St}),c.push({Lt:r[t].Lt,Rt:r[t].Rt,It:r[t].It,K:r[t].K,St:r[t].St})):4==n.type&&(.01<D.distanceOfTwoPoints(n.start,n.end)&&d.push({Lt:r[t].Lt,Rt:n.start,It:n.end,K:r[t].K,St:r[t].St}),D.distanceOfTwoPoints(r[t].Rt,n.start)<D.distanceOfTwoPoints(r[t].Rt,n.end)?(l={x:n.start.x-e.x,y:n.start.y-e.y},s={x:r[t].Rt.x-e.x,y:r[t].Rt.y-e.y},0<(l=(l=D.bt(l,s))<180?l:l-360)?(.01<D.distanceOfTwoPoints(r[t].Rt,n.start)&&f.push({Lt:r[t].Lt,Rt:r[t].Rt,It:n.start,K:D.K(n.start,e),St:r[t].St}),.01<D.distanceOfTwoPoints(r[t].It,n.end)&&c.push({Lt:r[t].Lt,Rt:n.end,It:r[t].It,K:D.K(n.end,e),St:r[t].St})):(.01<D.distanceOfTwoPoints(r[t].Rt,n.start)&&c.push({Lt:r[t].Lt,Rt:r[t].Rt,It:n.start,K:D.K(n.start,e),St:r[t].St}),.01<D.distanceOfTwoPoints(r[t].It,n.end)&&f.push({Lt:r[t].Lt,Rt:n.end,It:r[t].It,K:D.K(n.end,e),St:r[t].St}))):(s={x:n.end.x-e.x,y:n.end.y-e.y},l={x:r[t].Rt.x-e.x,y:r[t].Rt.y-e.y},0<(o=(o=D.bt(s,l))<180?o:o-360)?(.01<D.distanceOfTwoPoints(r[t].Rt,n.end)&&f.push({Lt:r[t].Lt,Rt:r[t].Rt,It:n.end,K:D.K(n.end,e),St:r[t].St}),.01<D.distanceOfTwoPoints(r[t].It,n.start)&&c.push({Lt:r[t].Lt,Rt:n.start,It:r[t].It,K:D.K(n.start,e),St:r[t].St})):(.01<D.distanceOfTwoPoints(r[t].Rt,n.end)&&c.push({Lt:r[t].Lt,Rt:r[t].Rt,It:n.end,K:D.K(n.end,e),St:r[t].St}),.01<D.distanceOfTwoPoints(r[t].It,n.start)&&f.push({Lt:r[t].Lt,Rt:n.start,It:r[t].It,K:D.K(n.start,e),St:r[t].St})))):(o=D.Mt(r[t].Rt,r[t].It,y)).isintersect?1==o.type?.01<D.distanceOfTwoPoints(o.start,o.end)&&v.push({Lt:r[t].Lt,Rt:o.start,It:o.end,K:r[t].K,St:r[t].St}):2==o.type?("start"==o.outer?(r[t].It=o.start,r[t].K=D.K(o.start,e)):"end"==o.outer&&(r[t].Rt=o.end,r[t].K=D.K(o.end,e)),.01<D.distanceOfTwoPoints(o.start,o.end)&&v.push({Lt:r[t].Lt,Rt:o.start,It:o.end,K:r[t].K,St:r[t].St}),f.push({Lt:r[t].Lt,Rt:r[t].Rt,It:r[t].It,K:r[t].K,St:r[t].St})):3==o.type?("start"==o.outer?(r[t].It=o.start,r[t].K=D.K(o.start,e)):"end"==o.outer&&(r[t].Rt=o.end,r[t].K=D.K(o.end,e)),.01<D.distanceOfTwoPoints(o.start,o.end)&&v.push({Lt:r[t].Lt,Rt:o.start,It:o.end,K:r[t].K,St:r[t].St}),c.push({Lt:r[t].Lt,Rt:r[t].Rt,It:r[t].It,K:r[t].K,St:r[t].St})):4==o.type&&(.01<D.distanceOfTwoPoints(o.start,o.end)&&v.push({Lt:r[t].Lt,Rt:o.start,It:o.end,K:r[t].K,St:r[t].St}),D.distanceOfTwoPoints(r[t].Rt,o.start)<D.distanceOfTwoPoints(r[t].Rt,o.end)?(a={x:o.start.x-e.x,y:o.start.y-e.y},h={x:r[t].Rt.x-e.x,y:r[t].Rt.y-e.y},0<(a=(a=D.bt(a,h))<180?a:a-360)?(.01<D.distanceOfTwoPoints(r[t].Rt,o.start)&&f.push({Lt:r[t].Lt,Rt:r[t].Rt,It:o.start,K:D.K(o.start,e),St:r[t].St}),.01<D.distanceOfTwoPoints(r[t].It,o.end)&&c.push({Lt:r[t].Lt,Rt:o.end,It:r[t].It,K:D.K(o.end,e),St:r[t].St})):(.01<D.distanceOfTwoPoints(r[t].Rt,o.start)&&c.push({Lt:r[t].Lt,Rt:r[t].Rt,It:o.start,K:D.K(o.start,e),St:r[t].St}),.01<D.distanceOfTwoPoints(r[t].It,o.end)&&f.push({Lt:r[t].Lt,Rt:o.end,It:r[t].It,K:D.K(o.end,e),St:r[t].St}))):(h={x:o.end.x-e.x,y:o.end.y-e.y},a={x:r[t].Rt.x-e.x,y:r[t].Rt.y-e.y},0<(u=(u=D.bt(h,a))<180?u:u-360)?(.01<D.distanceOfTwoPoints(r[t].Rt,o.end)&&f.push({Lt:r[t].Lt,Rt:r[t].Rt,It:o.end,K:D.K(o.end,e),St:r[t].St}),.01<D.distanceOfTwoPoints(r[t].It,o.start)&&c.push({Lt:r[t].Lt,Rt:o.start,It:r[t].It,K:D.K(o.start,e),St:r[t].St})):(.01<D.distanceOfTwoPoints(r[t].Rt,o.end)&&c.push({Lt:r[t].Lt,Rt:r[t].Rt,It:o.end,K:D.K(o.end,e),St:r[t].St}),.01<D.distanceOfTwoPoints(r[t].It,o.start)&&f.push({Lt:r[t].Lt,Rt:o.start,It:r[t].It,K:D.K(o.start,e),St:r[t].St})))):p.push({Lt:r[t].Lt,Rt:r[t].Rt,It:r[t].It,K:r[t].K,St:r[t].St});return{left:f,right:c,inside:d,invalid:v,other:p}},oo(t){let e=null;if(this.ql){if(void 0===(e=this.xl.get(t)))return}else e=this.wl.get(t);for(var i of e.Kn.keys())i<0&&e.Kn.delete(i);for(var r of e.$n.keys())r<0&&e.$n.delete(r);for(var n of e.ts.keys())n<0&&e.ts.delete(n);var s=[];for(let t=0;t<e.Un.length&&0<e.Un[t].Ni;t++)s.push(e.Un[t]);e.Un=s;var l=[];for(let t=0;t<e.qn.length&&0<e.qn[t].Ni;t++)l.push(e.qn[t]);e.qn=l,(this.ql?(this.xl.delete(t),this.xl):(this.wl.delete(t),this.wl)).set(t,e)},So(i,t){var e=this.Io(i,t.qn);let r=[],n=[],s=e[0];var l,o,h=[];for(let t=0;t<e.length;t++){if(e[t].K<.01)return h.push(e[t]),h;if(!(e[t].Lt<0)){s=e[t],e.splice(0,t);break}}let a=0,u=0,f={x:null,y:null};D.ot(i,s.Rt,s.It,f)||(f=D.K(i,s.Rt)<=D.K(i,s.It)?s.Rt:s.It);for(let t=0;t<e.length;t++)e[t].Lt<0||(l=e[t].Rt,o=e[t].It,l=(l=D.bt({x:f.x-i.x,y:f.y-i.y},{x:l.x-i.x,y:l.y-i.y}))<180?l:l-360,o=(o=D.bt({x:f.x-i.x,y:f.y-i.y},{x:o.x-i.x,y:o.y-i.y}))<180?o:o-360,(0<l&&0<o?r:(l<0&&o<0||r.push(e[t]),n)).push(e[t]));for(var c=[],d=[];;){var p=this.Lo(i,s,r);if(p.inside&&0<p.inside.length){p.inside.sort(function(t,e){return t.K-e.K});for(let e=0;e<p.inside.length;e++){var v,b,y,g,m=[];for(let t=0;t<p.inside.length;t++)e==t||p.inside[t].remain&&0===p.inside[t].remain.length||((y=[]).push(i),y.push(p.inside[e].Rt),y.push(p.inside[e].It),D.Mt(p.inside[t].Rt,p.inside[t].It,y).isintersect&&p.inside[t].K<p.inside[e].K&&(y=(p.inside[t].Rt.x-i.x)/Math.sqrt((p.inside[t].Rt.x-i.x)*(p.inside[t].Rt.x-i.x)+(p.inside[t].Rt.y-i.y)*(p.inside[t].Rt.y-i.y))*1e7,g=(p.inside[t].Rt.y-i.y)/Math.sqrt((p.inside[t].Rt.x-i.x)*(p.inside[t].Rt.x-i.x)+(p.inside[t].Rt.y-i.y)*(p.inside[t].Rt.y-i.y))*1e7,y={x:i.x+y,y:i.y+g},g=(p.inside[t].It.x-i.x)/Math.sqrt((p.inside[t].It.x-i.x)*(p.inside[t].It.x-i.x)+(p.inside[t].It.y-i.y)*(p.inside[t].It.y-i.y))*1e7,v=(p.inside[t].It.y-i.y)/Math.sqrt((p.inside[t].It.x-i.x)*(p.inside[t].It.x-i.x)+(p.inside[t].It.y-i.y)*(p.inside[t].It.y-i.y))*1e7,g={x:i.x+g,y:i.y+v},v={x:null,y:null},b={x:null,y:null},D.nt(i,y,p.inside[e].Rt,p.inside[e].It,v),D.nt(i,g,p.inside[e].Rt,p.inside[e].It,b),v.x)&&v.y&&b.x&&b.y&&(y=D.distanceOfTwoPoints(v,p.inside[e].Rt),g=D.distanceOfTwoPoints(b,p.inside[e].Rt),m.push({Lt:p.inside[e].Lt,Rt:y<g?v:b,It:y<g?b:v,K:p.inside[e].K,St:p.inside[e].St})));var _=D.Tt(p.inside[e],m);p.inside[e].remain=_,c.push(..._)}}if(r=[],s=null,!(p.left&&0<p.left.length))break;p.left.sort(function(t,e){return t.K-e.K});for(let t=0;t<p.left.length;t++){var w={x:p.left[t].Rt.x-i.x,y:p.left[t].Rt.y-i.y},x={x:p.left[t].It.x-i.x,y:p.left[t].It.y-i.y},O={x:f.x-i.x,y:f.y-i.y},w=D.bt(O,w),O=D.bt(O,x),x=(O=O<180?O:O-360)<(w=w<180?w:w-360)?w:O;if(x>a){s=p.left[t],a=x;break}}if(!s)break;r.push(...p.left),r.push(...p.other)}for(s=e[0];;){var j=this.Lo(i,s,n);if(j.inside&&0<j.inside.length){j.inside.sort(function(t,e){return t.K-e.K});for(let e=0;e<j.inside.length;e++){var k,E,M,N,T=[];for(let t=0;t<j.inside.length;t++)e==t||j.inside[t].remain&&0===j.inside[t].remain.length||((M=[]).push(i),M.push(j.inside[e].Rt),M.push(j.inside[e].It),D.Mt(j.inside[t].Rt,j.inside[t].It,M).isintersect&&j.inside[t].K<j.inside[e].K&&(M=(j.inside[t].Rt.x-i.x)/Math.sqrt((j.inside[t].Rt.x-i.x)*(j.inside[t].Rt.x-i.x)+(j.inside[t].Rt.y-i.y)*(j.inside[t].Rt.y-i.y))*1e7,N=(j.inside[t].Rt.y-i.y)/Math.sqrt((j.inside[t].Rt.x-i.x)*(j.inside[t].Rt.x-i.x)+(j.inside[t].Rt.y-i.y)*(j.inside[t].Rt.y-i.y))*1e7,M={x:i.x+M,y:i.y+N},N=(j.inside[t].It.x-i.x)/Math.sqrt((j.inside[t].It.x-i.x)*(j.inside[t].It.x-i.x)+(j.inside[t].It.y-i.y)*(j.inside[t].It.y-i.y))*1e7,k=(j.inside[t].It.y-i.y)/Math.sqrt((j.inside[t].It.x-i.x)*(j.inside[t].It.x-i.x)+(j.inside[t].It.y-i.y)*(j.inside[t].It.y-i.y))*1e7,N={x:i.x+N,y:i.y+k},k={x:null,y:null},E={x:null,y:null},D.nt(i,M,j.inside[e].Rt,j.inside[e].It,k),D.nt(i,N,j.inside[e].Rt,j.inside[e].It,E),k.x)&&k.y&&E.x&&E.y&&(M=D.distanceOfTwoPoints(k,j.inside[e].Rt),N=D.distanceOfTwoPoints(E,j.inside[e].Rt),T.push({Lt:j.inside[e].Lt,Rt:M<N?k:E,It:M<N?E:k,K:j.inside[e].K,St:j.inside[e].St})));var A=D.Tt(j.inside[e],T);j.inside[e].remain=A,d.push(...A)}}if(n=[],s=null,!(j.right&&0<j.right.length))break;j.right.sort(function(t,e){return t.K-e.K});for(let t=0;t<j.right.length;t++){var R={x:j.right[t].Rt.x-i.x,y:j.right[t].Rt.y-i.y},I={x:j.right[t].It.x-i.x,y:j.right[t].It.y-i.y},L={x:f.x-i.x,y:f.y-i.y},R=D.bt(L,R),L=D.bt(L,I),I=(R=R<180?R:R-360)<(L=L<180?L:L-360)?R:L;if(I<u){s=j.right[t],u=I;break}}if(!s)break;n.push(...j.right),n.push(...j.other)}return c.push(...d),h.push(...c),h},Fo(e,i,r,n,s){for(let t=0;t<r.qn.length;t++){var l=r.qn[t];if(!(l.Ni==n.Ni||l.Ni<0)){var o={},o=D.nt(e,i,l.Rt,l.It,o);if(o&&.01<D.distanceOfTwoPoints(i,l.Rt)&&.01<D.distanceOfTwoPoints(i,l.It))return{isValid:!1,model:null,extent:null,road:l}}}if(1!=this.se){var h={};for(let t=0;t<r.Yn.length;t++){var a=r.Yn[t];if(null!=a&&a!=s&&(V.NaviModelPassType_DECORATE!=a.pass&&(null==s||s.pass==V.NaviModelPassType_DECORATE||!D.X(s.Xt,a.$t,a.$t.length-1)))){var u=a.$t.length;for(let t=0;t<u-1;t++){var f=D.nt(e,i,a.$t[t],a.$t[t+1],h);if(f&&!(D.distanceOfTwoPoints(e,h)<.01))return{isValid:!1,model:a,extent:null,road:null}}}}}var c={},d=r.Xn;for(let t=0;t<d.length;t++){var p=d[t],v=d[t].Pn;for(let t=0;t<v.length;t++){var b=v[t];for(let t=0;t<b.length-1;t++)if(D.nt(e,i,b[t],b[t+1],c))return{isValid:!1,model:null,extent:p,road:null}}var y=d[t].$t;for(let t=0;t<y.length-1;t++)if(D.nt(e,i,y[t],y[t+1],c))return{isValid:!1,model:null,extent:p,road:null}}return{isValid:!0,model:null,extent:null,road:null}},Po(l,r,n,t,o,s,h,a){let u={Rt:o.St.Rt,It:o.St.It,Ni:o.St.Ni},f={Rt:o.St.Rt,It:o.St.It,Ni:o.St.Ni};var c=Object.assign({},n),d=Object.assign({},n);let p=!1,v=!1,b=t.model,y=t.model;for(;;){var g=[{x:b.Ct.Gt.x,y:b.Ct.Gt.y},{x:b.Ct.Gt.x,y:b.Ct.Dt.y},{x:b.Ct.Dt.x,y:b.Ct.Dt.y},{x:b.Ct.Dt.x,y:b.Ct.Gt.y}],g=(g.sort(function(t,e){var i=D.Ft(l,t,1e4),r={x:null,y:null},n=D.Ft(l,e,1e4),s={x:null,y:null};return D.nt(i,l,u.Rt,u.It,r)&&D.nt(n,l,u.Rt,u.It,s)?D.J(r,o.St.Rt)-D.J(s,o.St.Rt):D.$(t,o.St.Rt,o.St.It)-D.$(e,o.St.Rt,o.St.It)}),{x:g[0].x-l.x,y:g[0].y-l.y}),m=Math.sqrt(g.x*g.x+g.y*g.y),_=[{x:y.Ct.Gt.x,y:y.Ct.Gt.y},{x:y.Ct.Gt.x,y:y.Ct.Dt.y},{x:y.Ct.Dt.x,y:y.Ct.Dt.y},{x:y.Ct.Dt.x,y:y.Ct.Gt.y}],_=(_.sort(function(t,e){var i=D.Ft(l,t,1e4),r={x:null,y:null},n=D.Ft(l,e,1e4),s={x:null,y:null};return D.nt(i,l,f.Rt,f.It,r)&&D.nt(n,l,f.Rt,f.It,s)?D.J(r,o.St.It)-D.J(s,o.St.It):D.$(t,o.St.Rt,o.St.It)-D.$(e,o.St.Rt,o.St.It)}),{x:_[0].x-l.x,y:_[0].y-l.y}),w=Math.sqrt(_.x*_.x+_.y*_.y),g={x:l.x+g.x/m*1e4,y:l.y+g.y/m*1e4},m={x:l.x+_.x/w*1e4,y:l.y+_.y/w*1e4};let e=!0,i=!0;if(!p)if(D.nt(g,l,u.Rt,u.It,c)){_={x:u.Rt.x-c.x,y:u.Rt.y-c.y},w=Math.sqrt(_.x*_.x+_.y*_.y);c.x=c.x+_.x/w*.5,c.y=c.y+_.y/w*.5;let t={isValid:!1,model:null,extent:null,road:null};if((t=null!=r&&r.pass==V.NaviModelPassType_PASS_THROUGH&&0==r.Gn.length?this.Fo(l,c,s,o.St,r):this.Fo(l,c,s,o.St)).isValid){c.K=Number.MAX_VALUE;g={D:c,St:o.St,K:h.K};if(a.has(o.Lt)){var x=a.get(o.Lt);let e=!1;for(let t=0;t<x.length;t++)if(D.distanceOfTwoPoints(x[t].D,n)<.01){e=!0;break}e||a.get(o.Lt).push(g)}else a.set(o.Lt,[g]);p=!0}else t.model&&1<D.K(c,u.Rt)?(u.It=Object.assign({},c),b=t.model):e=!1}else e=!1;if(!v)if(D.nt(m,l,f.Rt,f.It,d)){_={x:f.It.x-d.x,y:f.It.y-d.y},w=Math.sqrt(_.x*_.x+_.y*_.y);d.x=d.x+_.x/w*.5,d.y=d.y+_.y/w*.5;let t={isValid:!1,model:null,extent:null,road:null};if((t=null!=r&&r.pass==V.NaviModelPassType_PASS_THROUGH&&0==r.Gn.length?this.Fo(l,d,s,o.St,r):this.Fo(l,d,s,o.St)).isValid){d.K=Number.MAX_VALUE;g={D:d,St:o.St,K:h.K};if(a.has(o.Lt)){var O=a.get(o.Lt);let e=!1;for(let t=0;t<O.length;t++)if(D.distanceOfTwoPoints(O[t].D,n)<.01){e=!0;break}e||a.get(o.Lt).push(g)}else a.set(o.Lt,[g]);v=!0}else t.model&&1<D.K(d,f.It)?(f.Rt=Object.assign({},d),y=t.model):i=!1}else i=!1;if(p&&v)break;if(!e&&!i)break;if(p&&!i)break;if(v&&!e)break}},Go(n,s){var l=this.ho(this.El),o=new Map;for(let t=0;t<s.length;t++){let e=!0;var h=new mn;let i=D.Ot(s[t].Rt,s[t].It,n),r=(D.V(n,i,s[t].Rt,s[t].It).isintersect||(i=D.K(n,s[t].Rt)<=D.K(n,s[t].It)?s[t].Rt:s[t].It),h.D=Object.assign({},i),h.St=Object.assign({},l.qn[l.Ns(s[t].Ni)]),D.K(n,i));if(1!=this.se)for(let t=0;t<l.Yn.length;t++){var a=l.Yn[t];if(null!=a&&a!=obstruct&&(V.NaviModelPassType_DECORATE!=a.pass&&(null==obstruct||obstruct.pass==V.NaviModelPassType_DECORATE||!D.X(obstruct.Xt,a.$t,a.$t.length-1)))){var u=a.$t.length;for(let t=0;t<u-1;t++){var f=D.V(n,i,a.$t[t],a.$t[t+1]);f.isintersect&&(f=D.K(n,f.point))<r&&(r=f,h.vl=a,h.K=Number.MAX_VALUE,h.bl=!1,h.yl=V.NaviObstructType_MODEL,e=!1)}}}var c=l.Xn;for(let t=0;t<c.length;t++){var d=c[t],p=c[t].Pn;for(let t=0;t<p.length;t++){var v=p[t];for(let t=0;t<v.length-1;t++){var b=D.st(n,i,v[t],v[t+1]);b.isintersect&&(b=D.K(n,b.point))<r&&(r=b,h.vl=d,h.K=Number.MAX_VALUE,h.bl=!1,h.yl=V.NaviObstructType_EXTENT,e=!1)}}var y=c[t].$t;for(let t=0;t<y.length-1;t++){var g=D.st(n,i,y[t],y[t+1]);g.isintersect&&(g=D.K(n,g.point))<r&&(r=g,h.vl=d,h.K=Number.MAX_VALUE,h.bl=!1,h.yl=V.NaviObstructType_EXTENT,e=!1)}}if(e){let t=o.get(h.St.Ni);t?t.push(h):((t=[]).push(h),o.set(h.St.Ni,t))}}},ao(i,r){for(let t=0;t<this.Yl.length;t++)if(D.X(i,this.Yl[t].$t,this.Yl[t].Do))return G.ROUTE_FAILED_NO_DEST_ARRIVAL;var t;if(1===this.se)return(t=this.Vo(i,r)).road?(t=this.Bo(this.El,t.coords,t.road),this.Ys=t,void(i.process||(i.process=!0,i.tmpNode=this.Ys))):G.ROUTE_FAILED_NO_START_ARRIVAL;var n=this.So(i,r);let s=new Map;for(let e=0;e<n.length;e++){var l,o={x:null,y:null},h=n[e];D.ot(i,h.Rt,h.It,o)?o.K=0:(D.distanceOfTwoPoints(i,h.Rt)<D.distanceOfTwoPoints(i,h.It)?(o.x=h.Rt.x,o.y=h.Rt.y):(o.x=h.It.x,o.y=h.It.y),l={x:null,y:null},a=D.ot(i,h.St.Rt,h.St.It,l),o.K=a?D.K(o,l):Number.MAX_VALUE),D.distanceOfTwoPoints(o,h.St.Rt)<.001?(o.id=h.St.cn,o.newNode=!1):D.distanceOfTwoPoints(o,h.St.It)<.001?(o.id=h.St.dn,o.newNode=!1):o.newNode=!0;let t={isValid:!1,model:null,extent:null,road:null};if((t=null!=this.gl&&this.gl.pass==V.NaviModelPassType_PASS_THROUGH&&0==this.gl.Gn.length?this.Fo(i,o,r,h.St,this.gl):this.Fo(i,o,r,h.St)).isValid){var a={D:o,St:h.St,K:n[e].K};if(s.has(h.Lt)){var u=s.get(h.Lt);let e=!1;for(let t=0;t<u.length;t++)if(D.distanceOfTwoPoints(u[t].D,o)<.01){e=!0;break}e||s.get(h.Lt).push(a)}else s.set(h.Lt,[a])}else t.model&&this.Po(i,this.gl,o,t,h,r,n[e],s)}let e=!0;this.Ys=this.bo(this.El,i),null==this.gl&&(e=!1);var f,c=new Map,d=new Map;for(f of s){let t=!1;for(var p of f[1])if(p.D.newNode&&p.D.K<.01){c.set(f[0],[p]),t=!0;break}t||d.set(f[0],f[1])}if(null!=(s=0<c.size?c:d)&&0<s.size){e=!1;for(var v of s){var b=v[1];for(let t=0;t<b.length;t++)0!=b[t].St.mn&&(e=!0)}for(var y of s){y=y[1];if(y.sort(function(t,e){return t.D.K-e.D.K}),y[0].St,y[0].D.K==Number.MAX_VALUE)for(var g of y){var m=this.Bo(this.El,g.D,g.St);this.Zo(this.El,this.Ys,m,g.St.mn)}else{var _=this.Bo(this.El,y[0].D,y[0].St);this.Zo(this.El,this.Ys,_,y[0].St.mn)}}}if(e&&null!=this.gl&&this.gl.Gn&&0<this.gl.Gn.length){var w=null,x=this.ho(this.El);for(let t=0;t<this.gl.Gn.length;t++){var w=this.gl.Gn[t],O=this.gl.Vn[t];if(O==V.NaviEntranceType_EXIT||O==V.NaviEntranceType_ACCESS){var j=this.gl.Pn;let e=!0;for(let t=0;t<j.length;t++){var k=j[t];for(let t=0;t<k.length-1;t++)if(D.C(i,w.Jt,k[t],k[t+1])){e=!1;break}if(0==e)break}var E=[];this.Rl&&this.Rl.get(this.El)&&E.push(...this.Rl.get(this.El)),this.Al&&this.Al.get(this.El)&&E.push(...this.Al.get(this.El));for(let t=0;t<E.length;t++){var M=E[t],N=M.$t.length,T={};for(let t=0;t<N-1;t++){var A=D.nt(i,w.Jt,M.$t[t],M.$t[t+1],T);if(A&&!(D.distanceOfTwoPoints(w.Jt,T)<.01)){e=!1;break}}if(!e)break}for(let t=0;t<x.Yn.length;t++){var R={},I=x.Yn[t],L=this.gl;if(null!=I&&I!=L&&!(V.NaviModelPassType_DECORATE==I.pass||null!=L&&L.pass!=V.NaviModelPassType_DECORATE&&D.X(L.Xt,I.$t,I.$t.length-1)&&D.X(w.Jt,I.$t,I.$t.length-1))){var S=I.$t.length;for(let t=0;t<S-1;t++){var P=D.nt(i,w.Jt,I.$t[t],I.$t[t+1],R);if(P&&!(D.distanceOfTwoPoints(w.Jt,R)<.01)){e=!1;break}}}}if(0!=e){for(let t=0;t<x.qn.length;t++){var F=x.qn[t];if(0!=F.mn)if(D.C(i,w.Jt,F.Rt,F.It)&&0<F.Ni&&0==w.Ao.includes(F.Ni)){e=!1;break}}0!=e&&this.Zo(this.El,this.Ys,w)}}}}i.process||(i.process=!0,i.tmpNode=this.Ys)},uo(i,r){for(let t=0;t<this.Yl.length;t++)if(D.X(i,this.Yl[t].$t,this.Yl[t].Do))return G.ROUTE_FAILED_NO_DEST_ARRIVAL;var t;if(1===this.se)return(t=this.Vo(i,r)).road?(t=this.Bo(this.Ml,t.coords,t.road),i.eo&&(t.eo=i.eo,t.Co=Object.assign({},i)),this.Xs=t,void(i.process||(i.process=!0,i.tmpNode=this.Xs))):G.ROUTE_FAILED_NO_DEST_ARRIVAL;var n=this.So(i,r);let s=new Map;for(let e=0;e<n.length;e++){var l,o={x:null,y:null},h=n[e];D.ot(i,h.Rt,h.It,o)?o.K=0:(D.distanceOfTwoPoints(i,h.Rt)<D.distanceOfTwoPoints(i,h.It)?(o.x=h.Rt.x,o.y=h.Rt.y):(o.x=h.It.x,o.y=h.It.y),l={x:null,y:null},a=D.ot(i,h.St.Rt,h.St.It,l),o.K=a?D.K(o,l):Number.MAX_VALUE),D.distanceOfTwoPoints(o,h.St.Rt)<.001?(o.id=h.St.cn,o.newNode=!1):D.distanceOfTwoPoints(o,h.St.It)<.001?(o.id=h.St.dn,o.newNode=!1):o.newNode=!0;let t={isValid:!1,model:null,extent:null,road:null};if((t=null!=this.ml&&this.ml.pass==V.NaviModelPassType_PASS_THROUGH&&0==this.ml.Gn.length?this.Fo(i,o,r,h.St,this.ml):this.Fo(i,o,r,h.St)).isValid){var a={D:o,St:h.St};if(s.has(h.Lt)){var u=s.get(h.Lt);let e=!1;for(let t=0;t<u.length;t++)if(D.distanceOfTwoPoints(u[t].D,o)<.01){e=!0;break}e||s.get(h.Lt).push(a)}else s.set(h.Lt,[a])}else t.model&&this.Po(i,this.ml,o,t,h,r,n[e],s)}let e=!0;this.Xs=this.bo(this.Ml,i),i.eo&&(this.Xs.eo=i.eo,this.Xs.Co=Object.assign({},i)),null==this.ml&&(e=!1);var f,c=new Map,d=new Map;for(f of s){let t=!1;for(var p of f[1])if(p.D.newNode&&p.D.K<.01){c.set(f[0],[p]),t=!0;break}t||d.set(f[0],f[1])}if(null!=(s=0<c.size?c:d)&&0<s.size){e=!1;for(var v of s){var b=v[1];for(let t=0;t<b.length;t++)0!=b[t].St.mn&&(e=!0)}for(var y of s){y=y[1];if(y.sort(function(t,e){return t.D.K-e.D.K}),y[0].St,y[0].D.K==Number.MAX_VALUE)for(var g of y){var m=this.Bo(this.Ml,g.D,g.St);this.Zo(this.Ml,this.Xs,m,g.St.mn)}else{var _=this.Bo(this.Ml,y[0].D,y[0].St);this.Zo(this.Ml,this.Xs,_,y[0].St.mn)}}}if(e&&null!=this.ml&&this.ml.Gn&&0<this.ml.Gn.length){var w=null,x=this.ho(this.Ml);for(let t=0;t<this.ml.Gn.length;t++){var w=this.ml.Gn[t],O=this.ml.Vn[t];if(O==V.NaviEntranceType_ENTRANCE||O==V.NaviEntranceType_ACCESS){var j=this.ml.Pn;let e=!0;for(let t=0;t<j.length;t++){var k=j[t];for(let t=0;t<k.length-1;t++)if(D.C(i,w.Jt,k[t],k[t+1])){e=!1;break}if(0==e)break}var E=[];this.Rl&&this.Rl.get(this.Ml)&&E.push(...this.Rl.get(this.Ml)),this.Al&&this.Al.get(this.Ml)&&E.push(...this.Al.get(this.Ml));for(let t=0;t<E.length;t++){var M=E[t],N=M.$t.length,T={};for(let t=0;t<N-1;t++){var A=D.nt(i,w.Jt,M.$t[t],M.$t[t+1],T);if(A&&!(D.distanceOfTwoPoints(w.Jt,T)<.01)){e=!1;break}}if(!e)break}if(0!=e){for(let t=0;t<x.qn.length;t++){var R=x.qn[t];if(0!=R.mn)if(D.C(i,w.Jt,R.Rt,R.It)&&0<R.Ni&&0==w.Ao.includes(R.Ni)){e=!1;break}}for(let t=0;t<x.Yn.length;t++){var I={},L=x.Yn[t],S=this.ml;if(null!=L&&L!=S&&!(V.NaviModelPassType_DECORATE==L.pass||null!=S&&S.pass!=V.NaviModelPassType_DECORATE&&D.X(S.Xt,L.$t,L.$t.length-1)&&D.X(w.Jt,L.$t,L.$t.length-1))){var F=L.$t.length;for(let t=0;t<F-1;t++){var P=D.nt(i,w.Jt,L.$t[t],L.$t[t+1],I);if(P&&!(D.distanceOfTwoPoints(w.Jt,I)<.01)){e=!1;break}}}}0!=e&&this.Zo(this.Ml,this.Xs,w)}}}}i.process||(i.process=!0,i.tmpNode=this.Xs)},io(e,i,r){e instanceof Array&&2==e.length&&(e={x:e[0],y:e[1]});let n=null,s=!0;var l=this.so(e),o=this.qs.Is(e);let h=this.qs.Ls(e);if(n=null!=o&&o.pass==V.NaviModelPassType_PASS_THROUGH&&0==o.Gn.length?this.Wo(h,e,30,o):this.Wo(h,e),1===this.se){var a=this.Ro(n);if(!a)return;var u=a.St;let t=null;u=this.Uo(h,e,u,[a],o);return(t=0==u.length?this.Bo(h,a.D,a.St):this.Bo(h,u[0].D,u[0].St)).eo=void 0!==r&&r,r&&(Object.assign(e,t.Jt),t.Jt=e),Object.assign(i,t),!0}a=this.bo(h,e);if(a.eo=void 0!==r&&r,Object.assign(i,a),null==o&&(s=!1),0<n.size){s=!1;for(var f of n){var c=f[1];for(let t=0;t<c.length;t++)0!=c[t].St.mn&&(s=!0)}let t=!1;var d,p=[];for(d of n){var v=d[1],b=v[0].St,b=this.Uo(h,e,b,v,o);if(0==b.length)for(var y of v){y=this.Bo(h,y.D,y.St);this.Zo(h,i,y)}else Math.abs(b[0].qo)>D.I()?p.push(...b):(t=!0,v=this.Bo(h,b[0].D,b[0].St),this.Zo(h,i,v))}t||p.forEach(t=>{t=this.Bo(h,t.D,t.St);this.Zo(h,i,t)})}if(o&&o.pass!=V.NaviModelPassType_NOT_PASS){if(o.pass===V.NaviModelPassType_PASS_THROUGH||o.pass===V.NaviModelPassType_PASS_NOT_THROUGH){var g={},m=[],_=[],w=this.qs.qn;let e=!0;for(let t=0;t<o.En;t++){var x=o.$t[t],O=o.$t[t+1];for(let t=0;t<w.length;t++){var j=w[t];1===D.nt(x,O,j.Rt,j.It,g)&&V.NaviRoadEntry_FORBID!==j.mn&&(e=!1,(j={}).x=g.x,j.y=g.y,m.push(j),_.push(w[t]))}}if(!e){o.Gn=[],o.Vn=[],o.Dn=[];for(let t=0;t<m.length;t++){var k=m[t],E=_[t],k=this.To(l,k,E);k.Ao.push(E.Ni),k.tn=V.NaviNodeType_COMMON,E.mn===V.NaviRoadEntry_BOTH?k.entranceType=V.NaviEntranceType_ACCESS:D.X(E.Rt,o.$t,o.En)?(E.mn===V.NaviRoadEntry_FORWARD&&(k.entranceType=V.NaviEntranceType_EXIT),E.mn===V.NaviRoadEntry_BACK&&(k.entranceType=V.NaviEntranceType_ENTRANCE)):(E.mn===V.NaviRoadEntry_FORWARD&&(k.entranceType=V.NaviEntranceType_ENTRANCE),E.mn===V.NaviRoadEntry_BACK&&(k.entranceType=V.NaviEntranceType_EXIT)),o.Gn.push(k),o.Vn.push(k.entranceType),o.Dn.push(k.tn)}}}if(s&&null!=o&&o.Gn&&0<o.Gn.length){let e=!1;for(let t=0;t<o.Gn.length;t++){var M=o.Gn[t],N=o.Vn[t];N!=V.NaviEntranceType_EXIT&&N!=V.NaviEntranceType_ACCESS||(this.Zo(h,i,M),e=!0)}if(!e)return!1}return!0}},fo(){var i=this.Yo(this.Ys.Jt),i=(i&&(this._o(this.El,i,V.NaviRoadHinderType_HINDER_GENERAL),this.Ll.push({co:this.El,vl:i})),this.Yo(this.Xs.Jt));if(i&&(this._o(this.Ml,i,V.NaviRoadHinderType_HINDER_GENERAL),this.Ll.push({co:this.Ml,vl:i})),this.kl=[],this.El===this.Ml){var i=this.Xo(this.El),r=(i.tl=this.tl,i.rl(this.Ys,this.Xs,this.Qs));if(r!==G.ROUTE_SUCCESS)return r;r=i.hl();this.kl=[],r.reverse(),this.kl.push(...r)}else{if(-1!==this.El&&-1===this.Ml){var i=this.zo(this.Ys.Jt,this.El,V.NaviEntranceType_EXIT),r=this.Ol.get(this.El),n=(r.tl=this.tl,r.rl(this.Ys,i,this.Qs));if(n!=G.ROUTE_SUCCESS)return n;let t=r.hl(t);r=this._contain_zoneIdDijkstras.get(-1);if(r.tl=this.tl,(n=r.rl(i,this.Xs,this.Qs))!=G.ROUTE_SUCCESS)return n;i=r.hl();t.reverse(),i.reverse(),this.kl.push(...t),this.kl.push(...i)}if(-1===this.El&&-1!==this.Ml){n=this.zo(this.Xs.Jt,this.Ml,V.NaviEntranceType_ENTRANCE),r=this.Ol.get(this.Ml),i=(r.tl=this.tl,r.rl(n,this.Xs,this.Qs));if(i!=G.ROUTE_SUCCESS)return i;var r=r.hl(),s=this.Ol.get(-1);if(s.tl=this.tl,(i=s.rl(this.Ys,n,this.Qs))!=G.ROUTE_SUCCESS)return i;n=s.hl();n.reverse(),r.reverse(),this.kl.push(...n),this.kl.push(...r)}if(-1!==this.El&&-1!==this.Ml){i=this.zo(this.Ys.Jt,this.El,V.NaviEntranceType_EXIT),s=this.Ol.get(this.El),n=(s.tl=this.tl,s.rl(this.Ys,i,this.Qs));if(n!=G.ROUTE_SUCCESS)return n;let t=s.hl(t);r=this.zo(this.Xs.Jt,this.Ml,V.NaviEntranceType_ENTRANCE),s=this.Ol(this.Ml);if(s.tl=this.tl,(n=s.rl(r,this.Xs,this.Qs))!=G.ROUTE_SUCCESS)return n;let e=s.hl(e);s=this.Ol(-1);if(s.tl=this.tl,(n=s.rl(i,r,this.Qs))!=G.ROUTE_SUCCESS)return n;i=s.hl();t.reverse(),i.reverse(),e.reverse(),this.kl.push(...t),this.kl.push(...i),this.kl.push(...e)}}return G.ROUTE_SUCCESS},po(t,e){var i,r,n=this.Yo(t.Jt),s=t.co;n&&(this._o(s,n,V.NaviRoadHinderType_HINDER_GENERAL),this.Ll.push({co:this.El,vl:n}));for(i of e)i&&(r=this.Yo(i.Jt))&&(this._o(i.co,r,V.NaviRoadHinderType_HINDER_GENERAL),this.Ll.push({co:i.co,vl:r}));this.kl=[];n=this.Xo(s),n.tl=this.tl,s=n.ll(t,e,this.Qs);if(s!==G.ROUTE_SUCCESS)return s;var l,t=n.ul(e);for(l of t)l[1].reverse();return t},Ho(e,i,r){for(let t=0;t<i;t++)if(null!=e[t]&&e[t].Ni==r)return t;return-1},so(e){e instanceof cn?e={x:e.Jt.x,y:e.Jt.y,level:e.Zr}:e instanceof R&&(e=e.Jt);var i=this.qs.Hn;for(let t=0;t<i.length;t++){var r=i[t];if(r.Sn(e))return r.Ni}return-1},Xl(){var t,e=this.qs.Hn;for(let t=0;t<e.length;t++){var i=e[t],r=this.Qo(this.qs,i);this.wl.set(i.Ni,r)}this.wl.set(-1,this.qs);for(t of this.wl)t[1].ns(),this.Ol.set(t[0],new yn(t[1]))},Qo(t,c){if(t&&c){let e,i,r=t.qn.length,n=t.Un.length,s=t.qn,l=t.Un,o=0;var d,p=new Int8Array(r);for(let t=0;t<r;t++)s[t]&&s[t].mn!=V.NaviRoadEntry_FORBID&&(d=s[t],e=c.contain(d.Rt),i=c.contain(d.It),0==e&&0==i||(o=!0),1==e&&1==i&&(p[t]=1),1==e&&0==i&&(p[t]=2),0==e&&1==i&&(p[t]=3),0==e&&0==i&&(p[t]=4),2==e&&0==i&&(p[t]=6),2==e&&1==i&&(p[t]=7),0==e&&2==i&&(p[t]=8),1==e)&&2==i&&(p[t]=9);if(0==o)return null;let h=new Array(n),a=new Array(r),u=0,f=new Int8Array(n);var v,b=p.length;for(let e=0,t=b;e<t;e++)if(0!=p[e]&&6!=p[e]&&8!=p[e]&&1!=p[e]&&s[e]){var y=s[e],g=y.mn,m=[y.Ni];if(2==p[e]||9==p[e]){let t=null;t=2==p[e]?c.nt(y.Rt,y.It):Object.assign({},y.It);var _=new R,w=(_.Ni=this.gs(),_.tn=V.NaviNodeType_COMMON,_.rn=V.NaviLiftType_NULL,_.entranceType=V.NaviEntranceType_ACCESS,_.Jt=Object.assign({},t),new E),x=(w.setRoad(y),w.Ni=this._s(),m.push(w.Ni),_.segLinks=m,new R),x=(x.setNode(_),g==V.NaviRoadEntry_FORWARD?x.entranceType=V.NaviEntranceType_EXIT:g==V.NaviRoadEntry_BACK&&(x.entranceType=V.NaviEntranceType_ENTRANCE),c.Rn.push(x),u=this.Ho(l,n,w.dn),w.It=Object.assign({},x.Jt),w.pn[1]=Object.assign({},x.Jt),w.dn=x.Ni,w.On(),a[e]=w,h[u]=x,u=this.Ho(l,n,w.cn),h[u]=l[u],h[u].segLinks.splice(h[u].segLinks.indexOf(y.Ni),1,w.Ni),new R);x.setNode(_),y.cn=x.Ni,y.Rt=Object.assign({},x.Jt),y.pn[0]=Object.assign({},x.Jt),y.On(),l[u].segLinks.splice(l[u].segLinks.indexOf(y.Ni),1),l.push(x),f[u]=2}else if(3==p[e]||7==p[e]){let t=null;t=3==p[e]?c.nt(y.Rt,y.It):Object.assign({},y.Rt);w=new R,_=(w.Ni=this.gs(),w.tn=V.NaviNodeType_COMMON,w.rn=V.NaviLiftType_NULL,w.entranceType=V.NaviEntranceType_ACCESS,w.Jt=Object.assign({},t),new E),x=(_.setRoad(y),_.Ni=this._s(),m.push(_.Ni),w.segLinks=m,new R),m=(x.setNode(w),g==V.NaviRoadEntry_FORWARD?x.entranceType=V.NaviEntranceType_ENTRANCE:g==V.NaviRoadEntry_BACK&&(x.entranceType=V.NaviEntranceType_EXIT),c.Rn.push(x),u=this.Ho(l,n,_.cn),_.Rt=Object.assign({},x.Jt),_.pn[0]=Object.assign({},x.Jt),_.cn=x.Ni,_.On(),a[e]=_,h[u]=x,u=this.Ho(l,n,_.dn),h[u]=l[u],h[u].segLinks.splice(h[u].segLinks.indexOf(y.Ni),1,_.Ni),new R);m.setNode(w),y.dn=m.Ni,y.It=Object.assign({},m.Jt),y.pn[1]=Object.assign({},m.Jt),y.On(),l[u].segLinks.splice(l[u].segLinks.indexOf(y.Ni),1),l.push(m),f[u]=2}}for(let t=0,e=b;t<e;t++)1==p[t]&&(v=s[t])&&(a[t]=v,u=this.Ho(l,n,v.cn),2!=f[u]&&(h[u]=l[u],f[u]=1),u=this.Ho(l,n,v.dn),2!=f[u]&&(h[u]=l[u],f[u]=1),s[t]=null);for(let t=0;t<n;t++)1==f[t]&&(l[t]=null);var b=new M(h,a,!0,1),O=[],j=t.Yn;for(let t=0;t<j.length;t++){var k=j[t];k&&this.Ko(k,c)&&O.push(k)}return b.Yn.push(...O),b}},zl(){for(var t of this.wl){var e=t[0],i=t[1].Yn;for(let t=0;t<i.length;t++){var r=i[t];if(V.NaviModelPassType_PASS_NOT_THROUGH==r.pass){let t=this.Al.get(e);t||(t=[],this.Al.set(e,t)),t.push(r)}}}},Hl(){for(var t of this.wl){var e=t[0],i=t[1].Yn;for(let t=0;t<i.length;t++){var r=i[t];if(V.NaviModelPassType_NOT_PASS==r.pass){let t=this.Rl.get(e);t||(t=[],this.Rl.set(e,t)),t.push(r)}}}},Ql(){for(var t of this.Al){var e=t[0],i=t[1],r=this.ho(e).qn;for(let t=0;t<i.length;t++){var n=i[t];for(let e=0;e<r.length;e++){var s=r[e].kn();if(D.X(s,n.$t,n.En)){r[e].Cr=r[e].Cr*this.Gl;let t=this.Il.get(n.Ni);t||(t=[],this.Il.set(n.Ni,t)),t.push(r[e])}}this._o(e,n,V.NaviRoadHinderType_HINDER_HIGH)}}},Kl(){for(var t of this.Rl){var e=t[0],i=t[1],r=this.ho(e).qn;for(let t=0;t<i.length;t++){var n=i[t];for(let t=0;t<r.length;t++){var s=r[t],l=s.mn,o=s.kn();if(D.X(o,n.$t,n.En)){if(s.Cr=Number.MAX_VALUE,l==V.NaviRoadEntry_BOTH||l==V.NaviRoadEntry_FORWARD){var h=this.ho(e).Kn.get(s.cn);if(h)for(let t=0;t<h.length;t++)h[t].Es==s.dn&&(h[t].Cr=s.Cr)}if(s.mn==V.NaviRoadEntry_BOTH||s.mn==V.NaviRoadEntry_BACK){var a=this.ho(e).Kn.get(s.dn);if(a)for(let t=0;t<a.length;t++)a[t].Es==s.cn&&(a[t].Cr=s.Cr)}}}}}},_o(e,t,i){var r=this.Il.get(t.Ni);if(r){if(V.NaviRoadHinderType_HINDER_HIGH==i)for(let t=0;t<r.length;t++){var n=r[t];if(n.On(),n.Cr=n.Cr*this.Gl,n.mn==V.NaviRoadEntry_BOTH||n.mn==V.NaviRoadEntry_FORWARD){var s=this.ho(e).Kn.get(n.cn);if(s)for(let t=0;t<s.length;t++)s[t].Es==n.dn&&(s[t].Cr=n.Cr)}if(n.mn==V.NaviRoadEntry_BOTH||n.mn==V.NaviRoadEntry_BACK){var l=this.ho(e).Kn.get(n.dn);if(l)for(let t=0;t<l.length;t++)l[t].Es==n.cn&&(l[t].Cr=n.Cr)}}if(V.NaviRoadHinderType_HINDER_GENERAL==i)for(let t=0;t<r.length;t++){var o=r[t];if(o.On(),o.mn==V.NaviRoadEntry_BOTH||o.mn==V.NaviRoadEntry_FORWARD){var h=this.ho(e).Kn.get(o.cn);if(h)for(let t=0;t<h.length;t++)h[t].Es==o.dn&&(h[t].Cr=o.Cr)}if(o.mn==V.NaviRoadEntry_BOTH||o.mn==V.NaviRoadEntry_BACK){var a=this.ho(e).Kn.get(o.dn);if(a)for(let t=0;t<a.length;t++)a[t].Es==o.cn&&(a[t].Cr=o.Cr)}}}},zo(e,i,r){var n=this.qs.us(i);if(null==n)return null;var s=this.ho(i).ys(e,t);let t=s.area,l=Number.MAX_VALUE,o=null;for(let t=0;t<n.Rn.length;t++){var h,a=n.Rn[t],u=D.K(a.Jt,e);a.entranceType!=V.NaviEntranceType_ACCESS&&a.entranceType!=r||l>u&&((h=this.Jo(i,a.Jt))==s||h.pass!=V.NaviModelPassType_PASS_NOT_THROUGH)&&(l=u,o=a)}return o},Jo(t,e){let i=null;t=this.ho(t);let r=Number.MAX_VALUE,n=Number.MAX_VALUE,s=null;var l=t.Yn;for(let t=0;t<l.length;t++){var o=l[t],h=D._pointToPolygon2d(o.$t,e,o.$t.length-1);n>h&&(n=h,s=o),this.Bl>h&&(h=o.area,r>h)&&(r=h,i=o)}return null==i?s:i},Ko(t,e){return!!t.bound.isCross(e.bound)&&(t=t.Xt,!!D.X(t,e.$t,e.En))},Bo(t,e,i){var r=this.Zl.find(function(t){return t==i.cn}),n=this.Zl.find(function(t){return t==i.dn}),s=(null==r&&this.Zl.push(i.cn),null==n&&this.Zl.push(i.dn),this.Pl);let l=null;for(let t=0;t<s.length;t++)if(s[t].$o==i){l=s[t];break}if(null==l)(l={}).$o=i,s.push(l);else for(;null!=l.th;){var o=l.th.$o;l=D.U(e,o.Rt,o.It)?l.th:l.eh}i=l.$o;r=new R;if(e.id?r.Ni=e.id:r.Ni=this.Mo(),r.Jt.x=e.x,r.Jt.y=e.y,r.Zr=e.level,r.ih=!1!==e.newNode,r.ih||1===this.se){var n=new E,h=(n.Ni=this.Mo(),n.cn=i.cn,n.Rt=i.Rt,n.dn=r.Ni,n.It=r.Jt,n.pn=[i.Rt,r.Jt],n.gn=i.gn,new E),a=(h.Ni=this.Mo(),h.cn=r.Ni,h.Rt=r.Jt,h.dn=i.dn,h.It=i.It,h.pn=[r.Jt,i.It],h.gn=i.gn,this.Sl.push(n),this.Sl.push(h),{}),u=(a.$o=n,{}),a=(u.$o=h,l.th=a,l.eh=u,r.tempType=1,n.tempType=1,h.tempType=1,n.On(),h.On(),n.mn=i.mn,h.mn=i.mn,this.ho(t)),u=(a.Un.push(r),a.qn.push(n),a.qn.push(h),this.Xo(t).qs);if(u.$n.set(r.Ni,a.Un.length-1),i.mn==V.NaviRoadEntry_BOTH){let t=[];t.push({Es:i.cn,Cr:n.Cr}),t.push({Es:i.dn,Cr:h.Cr}),u.Kn.set(r.Ni,t),(t=u.Kn.get(i.cn))||(t=[],u.Kn.set(i.cn,t)),t.push({Es:r.Ni,Cr:n.Cr}),(t=u.Kn.get(i.dn))||(t=[],u.Kn.set(i.dn,t)),t.push({Es:r.Ni,Cr:h.Cr})}if(i.mn==V.NaviRoadEntry_FORWARD){let t=[];t.push({Es:i.dn,Cr:h.Cr}),u.Kn.set(r.Ni,t),(t=u.Kn.get(i.cn))||(t=[],u.Kn.set(i.cn,t)),t.push({Es:r.Ni,Cr:n.Cr})}if(i.mn==V.NaviRoadEntry_BACK){let t=[];t.push({Es:i.cn,Cr:n.Cr}),u.Kn.set(r.Ni,t),(t=u.Kn.get(i.dn))||(t=[],u.Kn.set(i.dn,t)),t.push({Es:r.Ni,Cr:h.Cr})}}return r},rh(e,i){for(let t=i.length-1;0<=t;t--)if(i[t].Ni&&0<i[t].Ni)return i.splice(t+1,0,e),t+1;return-1},To(e,i,r,n){if(n)return this.Bo(e,i,r);var n=this.ho(e),e=new R,i=(e.Ni=this.gs(),e.Jt=i,new E),s=(i.Ni=this._s(),i.cn=r.cn,i.Rt=r.Rt,i.dn=e.Ni,i.It=e.Jt,i.gn=r.gn,i.pn=[r.Rt,e.Jt],new E),t=(s.Ni=this._s(),s.cn=e.Ni,s.Rt=e.Jt,s.dn=r.dn,s.It=r.It,s.gn=r.gn,s.pn=[e.Jt,r.It],[]),t=(t.push(i.Ni),t.push(s.Ni),e.segLinks=t,i.On(),s.On(),i.mn=r.mn,s.mn=r.mn,n.Un),l=n.qn,t=this.rh(e,t);if(this.rh(i,l),this.rh(s,l),n.$n.set(e.Ni,t),r.mn==V.NaviRoadEntry_BOTH){let t=[];t.push({Es:r.cn,Cr:i.Cr}),t.push({Es:r.dn,Cr:s.Cr}),n.Kn.set(e.Ni,t),(t=n.Kn.get(r.cn))||(t=[],n.Kn.set(r.cn,t)),t.push({Es:e.Ni,Cr:i.Cr}),(t=n.Kn.get(r.dn))||(t=[],n.Kn.set(r.dn,t)),t.push({Es:e.Ni,Cr:s.Cr})}if(r.mn==V.NaviRoadEntry_FORWARD){let t=[];t.push({Es:r.dn,Cr:s.Cr}),n.Kn.set(e.Ni,t),(t=n.Kn.get(r.cn))||(t=[],n.Kn.set(r.cn,t)),t.push({Es:e.Ni,Cr:i.Cr})}if(r.mn==V.NaviRoadEntry_BACK){let t=[];t.push({Es:r.cn,Cr:i.Cr}),n.Kn.set(e.Ni,t),(t=n.Kn.get(r.dn))||(t=[],n.Kn.set(r.dn,t)),t.push({Es:e.Ni,Cr:s.Cr})}return e.Ao=[],e.Ao.push(i.Ni),e.Ao.push(s.Ni),e},nh(t){if(null!=t){var e=this.ho(t);for(let t=e.Un.length-1;0<=t;t--){var i=e.Un[t];if(null==i||0<=i.Ni)break;e.Un.splice(t,1)}for(let t=e.qn.length-1;0<=t;t--){var r=e.qn[t];if(null==r||0<=r.Ni)break;e.qn.splice(t,1)}}},sh(t,e){var i=t.get(e);if(i)for(let t=0;t<i.length;t++)i[t].Es<0&&(i.splice(t,1),t--)},lh(e,t){var i=e.get(t);for(let t=0;t<i.length;t++)this.sh(e,i[t].Es);e.delete(t)},oh(t,e,i,r,n){r.K=Number.MAX_VALUE,r.bl=!1,r.qo=i;let s=Number.MAX_VALUE;var l={},o=this.ho(t);let h=Number.MAX_VALUE;for(let t=0;t<o.qn.length;t++){var a,u=o.qn[t];null==u||u.Ni<0||(u.mn==V.NaviRoadEntry_FORBID?D.st(e,i,u.Rt,u.It,l)&&(a=D.K(e,l))<=h&&(h=a):D.st(e,i,u.Rt,u.It,l)&&(a=D.K(e,l))<s&&(s=a,r.D=Object.assign({},l),r.K=s,r.St=u,r.bl=!0))}if(r.K>=h)return r.K=Number.MAX_VALUE,r.bl=!1;if(!r.bl)return!1;if(1!=this.se){var f={};for(let t=0;t<o.Yn.length;t++){var c=o.Yn[t];if(null!=c&&c!=n&&(V.NaviModelPassType_DECORATE!=c.pass&&(null==n||n.pass==V.NaviModelPassType_DECORATE||!D.X(n.Xt,c.$t,c.$t.length-1)))){var d=c.$t.length;for(let t=0;t<d-1;t++)if(D.st(e,i,c.$t[t],c.$t[t+1],f)){var p=D.K(e,f);if(p<s)return s=p,r.vl=c,r.K=Number.MAX_VALUE,r.bl=!1,r.yl=V.NaviObstructType_MODEL,!1}}}}var v={},b=o.Xn;for(let t=0;t<b.length;t++){var y=b[t],g=b[t].Pn;for(let t=0;t<g.length;t++){var m=g[t];for(let t=0;t<m.length-1;t++)if(D.st(e,i,m[t],m[t+1],v)){var _=D.K(e,v);if(_<s)return s=_,r.vl=y,r.K=Number.MAX_VALUE,r.bl=!1,r.yl=V.NaviObstructType_EXTENT,!1}}var w=b[t].$t;for(let t=0;t<w.length-1;t++)if(D.st(e,i,w[t],w[t+1],v)){var x=D.K(e,v);if(x<s)return s=x,r.vl=y,r.K=Number.MAX_VALUE,r.bl=!1,r.yl=V.NaviObstructType_EXTENT,!1}}return!0},hh(t,e){return t.K-e.K},ah(t,e){return e.qo-t.qo},yo(t){t=this.ho(t);if(t){var e=t.Un,i=t.$n;for(let t=e.length-1;0<=t;t--){var r=e[t];if(null==r||0<=r.Ni)break;i.delete(r.Ni),e.splice(t,1)}var n=t.qn,s=t.ts;for(let t=n.length-1;0<=t;t--){var l=n[t];if(null==l||0<=l.Ni)break;s.delete(l.Ni),n.splice(t,1)}}},mo(){this.uh(this.jl),this.uh(this.Ol)},uh(t){for(var e of t){var i,r=e[1],n=[],s=r.qs.Kn;for(i of s)i[0]<0&&n.push(i[0]);for(let t=0;t<n.length;t++)this.lh(r.qs.Kn,n[t]);for(let t=0;t<this.Zl.length;t++)this.sh(s,this.Zl[t])}},Uo(t,i,r,n,e){var s=[],l={x:0,y:0};if(D.ot(i,r.Rt,r.It,l)&&this.fh(i,l,{},e))(e={}).D=l,e.bl=!0,e.St=r,e.qo=0,e.K=D.K(i,l),s.push(e);else{var o={x:l.x-i.x,y:l.y-i.y};for(let t=0;t<n.length;t++){var h=n[t],a={x:h.D.x-i.x,y:h.D.y-i.y},a=D.bt(a,o);h.qo=270<a?a-360:a}n.sort(this.ah);let e=null;var u;if(n[n.length-1].qo<0)return e=n[n.length-1],s.push(e),s;for(let t=0;t<n.length;t++)if(0<n[t].qo)return e=n[t],0==t?s.push(e):(u=n[t-1],D.K(e.D,r.Rt)>D.K(u.D,r.Rt)?(s.push(u),s.push(e)):(s.push(e),s.push(u))),s}return s},dh(e,i,r,t,n){var s=t||30;for(let t=0;t<360;t+=s){var l=new mn;this.oh(e,i,t,l,n),1==l.bl&&r.push(l)}r.sort(this.hh)},Wo(t,e,i,r){var n=new Map,s=[];for(this.dh(t,e,s,i,r);0!=s.length;){var l=s[0];let t=n.get(l.St.Ni);t?t.push(l):((t=[]).push(l),n.set(l.St.Ni,t)),s.splice(0,1)}return n},bo(t,e){var i=new R,e=(i.Ni=this.Mo(),i.Jt=Object.assign({},e),this.ho(t));return e.Un.push(i),e.$n.set(i.Ni,e.Un.length-1),this.Xo(t).qs=e,i},ph(t,e,i){return i?this.bo(t,e):((i=new R).Ni=this.gs(),i.Jt=Object.assign({},e),t=(e=this.ho(t)).Un,t=this.rh(i,t),e.$n.set(i.Ni,t),i)},fh(e,i,r,n){var s,l=this.ho(-1);for(let t=0;t<l.Yn.length;t++)if(null!=(s=l.Yn[t])&&s!=n&&V.NaviModelPassType_DECORATE!=s.pass){var o=s.$t;for(let t=0;t<o.length-1;t++)if(D.nt(e,i,o[t],o[t+1],r)){var h=D.K(e,r),a=D.K(i,r);if(!(h<=D.I()||a<=D.I()))return!1}}var u=l.Xn;for(let t=0;t<u.length;t++){var f=u[t],c=f.Pn;for(let t=0;t<c.length;t++){var d=c[t];for(let t=0;t<d.length-1;t++)if(D.nt(e,i,d[t],d[t+1],r))return!1}var p=f.$t;for(let t=0;t<p.length-1;t++)if(D.nt(e,i,p[t],p[t+1],r))return!1}return!0},Zo(e,i,r,t,n,s){for(let t=0;t<this.Fl.length;t++){var l,o,h=this.Fl[t],a={};if(1==D.nt(h.Rt,h.It,i.Jt,r.Jt,a)&&.001<D.K(i.Jt,a)&&.001<D.K(r.Jt,a)){let t=!0;if(!this.Xs||i.Ni!=this.Xs.Ni||h.cn!=this.Ys.Ni&&h.dn!=this.Ys.Ni||(l={x:h.It.x-h.Rt.x,y:h.It.y-h.Rt.y},o={x:r.Jt.x-i.Jt.x,y:r.Jt.y-i.Jt.y},Math.abs(D.ct(l,o))<1e-4&&(t=!1)),t)return null;r=this.Bo(this.El,a,h);break}}void 0===t&&(t=V.NaviRoadEntry_BOTH),void 0===n&&(n=!0),void 0===s&&(s=!0);var u=new E;u.cn=i.Ni,u.Rt=i.Jt,u.dn=r.Ni,u.It=r.Jt,u.pn=[i.Jt,r.Jt],u.gn=1,this.Zl.push(i.Ni),this.Zl.push(r.Ni),u.Ni=n?this.Mo():this._s(),u.mn=t,u.On(),s&&this.Fl.push(u);this.ho(e).qn.push(u);n=this.Xo(e);if(V.NaviRoadEntry_BOTH==t){s={Es:r.Ni,Cr:u.Cr};let t=n.qs.Kn.get(i.Ni);t?t.push(s):((t=[]).push(s),n.qs.Kn.set(i.Ni,t)),s={Es:i.Ni,Cr:u.Cr},(t=n.qs.Kn.get(r.Ni))?t.push(s):((t=[]).push(s),n.qs.Kn.set(r.Ni,t))}if(V.NaviRoadEntry_FORWARD==t){e={Es:r.Ni,Cr:u.Cr};let t=n.qs.Kn.get(i.Ni);t?t.push(e):((t=[]).push(e),n.qs.Kn.set(i.Ni,t))}if(V.NaviRoadEntry_BACK==t){s={Es:i.Ni,Cr:u.Cr};let t=n.qs.Kn.get(r.Ni);t?t.push(s):((t=[]).push(s),n.qs.Kn.set(r.Ni,t))}return u},Yo(e){var t=this.so(e),i=this.Al.get(t);if(i)for(let t=0;t<i.length;t++){var r=i[t];if(D.X(e,r.$t,r.En))return r}return null},ho(t){let e=null;return e=(e=this.ql?this.xl.get(t):e)||this.wl.get(t)},Xo(t){let e=null;return e=(e=this.ql?this.jl.get(t):e)||this.Ol.get(t)},bh(){return this.ql?this.jl:this.Ol},gs(){return this.qs.gs()},_s(){return this.qs._s()},Oo(t){var e=[],i=(e.push(...t.Un),[]),e=(i.push(...t.qn),new M(e,i,!0,1));return e.Yn.push(...t.Yn),e.Xn.push(...t.Xn),e},xo(e){var i=[-1],r=this.qs.Hn;for(let t=0;t<r.length;t++){var n=r[t];e.yh(n.Ct.Gt,n.Ct.Dt)&&i.push(n.Ni)}return i},Vo(e,t,i){var r=null,n=t.qn;if(!n||n.length<=0)return null;var s=t.ss(e);if(s<=0)return null;var l={};let o;var h,a,r={distance:Number.MAX_VALUE,road:null,coords:{level:e.level}},u=[];for(h of n)h.mn===V.NaviRoadEntry_FORBID&&s===h.vn&&1!=h.ko&&u.push(h);for(a of n)if(a.mn!==V.NaviRoadEntry_FORBID&&s===a.vn){let t=!1;if(i){if(!(i.indexOf(a.gn)<0)){o=D.tt(e,a.Rt,a.It,l);for(var f of u)if(D.nt(e,l,f.Rt,f.It,{x:0,y:0})){t=!0;break}t||o<r.distance&&(r.distance=o,r.road=a,Object.assign(r.coords,l))}}else{o=D.tt(e,a.Rt,a.It,l);for(var c of u)if(D.nt(e,l,c.Rt,a.It,{x:0,y:0})){t=!0;break}t||o<r.distance&&(r.distance=o,r.road=a,Object.assign(r.coords,l))}}return r}});class wn{constructor(t,e){this.gh=[],this.mh=new Map,this.se=e||null,this._h(t)}}Object.assign(wn.prototype,{_h(t){for(var e of t){var i=e[1],r=i.Xn;for(let t=0;t<r.length;t++){var n=r[t].Ni,n=i.Gs(n),s=r[t].vn,n=new _n(n);n.Ni=s,n.se=this.se,n.Zr=e[0],this.gh.push(n),this.mh.set(s,n)}}},Cr(){return this.gh.length},wh(e){if(e instanceof cn?e={x:e.Jt.x,y:e.Jt.y,level:e.Zr}:e instanceof R&&(e=void 0===e.Zr?e.Jt:{...e.Jt,level:e.Zr}),this.gh){var i=this.gh;for(let t=0;t<i.length;t++){var r=i[t];if(e.level==r.Zr&&r.no(e))return r}}return null},xh(t){var e;for(e of this.gh)if(e.Ni==t)return e;return null}});class xn{constructor(t){this.fe=t,this.Rt=null,this.It=null,this.Qs=f.MODULE_SHORTEST,this.Oh=v.PRIORITY_DEFAULT,this.jh=new Map,this.kh=new Map,this.Eh=null,this.Mh=null,this.Nh=[],this.Th=[],this.Ah=[],this.Rh=[],this.Ih=[],this.Lh=[],this.Ri=[],this.Sh=.1,this.Fh=1,this.Ph=10,this.Gh=.1,this.Dh=1,this.Vh=10,this.Bh=.1,this.Zh=1,this.Ch=10,this.Wh=1,this.Uh=10,this.Ds=null,this.qh=null,this.Yh=null,this.Xh=null,this.gl=null,this.ml=null,this.Hh=null,this.Qh=!1,this.Kh=[],this.ql=!1,this.Yl=new Map,this.Jh=null,this.se=t.type,this.barrierFree=!1,this.$h=!1,this.ta=0,this.ea=0,this.ia=[],this.tl=0,this.ra=Number.MAX_VALUE,this.na=[]}set assginedInfos(t){this.Kh=t}get assginedInfos(){return this.Kh}set passPts(t){this.sa=t}get failedInsertedPts(){return this._failedInsertedPts}get toDoors(){return this.Qh}set toDoors(t){this.Qh=t}get obstruct(){return this.ql}set obstruct(t){this.ql=t}}Object.assign(xn.prototype,{Ar(t){if(t&&t.scene&&t.floors){this.Ds=t.scene,this.qh=new bn;t=t.floors;if(0!=t.size){this.la(t),this.oa(),this.Yh=new wn(this.jh,this.se),this.Yh.se=this.se;for(var e of t){var i=e[1].gid;if(null!=i){i=e[1].naviAccessible;if(i&&i[0]&&0<i[0].naviNodes.length){this.$h=!0;break}}}this.$h&&(this.la(t),this.oa(),this.Xh=new wn(this.kh,this.se),this.Xh.se=this.se)}}},pe(){this.fe=null,this.Ds=null,this.qh&&(this.qh.pe(),this.qh=null);for(var t of this.jh)t[1].pe();if(this.jh.clear(),this.jh=null,this.Eh.pe(),this.Eh=null,this.Nh=null,this.Ah=null,this.$h){for(var e of this.kh)e[1].pe();this.kh.clear(),this.kh=null,this.Mh.pe(),this.Mh=null,this.Th=null,this.Rh=null}this.Ih=null,this.Lh=null,this.Ri=null},ha(t,e){this.hr(),t.process&&(delete t.process,delete t.tmpNode),e.process&&(delete e.process,delete e.tmpNode);var i=this.aa([t]);if(i.length<1)return G.ROUTE_FAILED_NO_DATA_START;var i=i[0],r=(t.extentID=i,this.aa([e]));if(r.length<1)return G.ROUTE_FAILED_NO_DATA_DEST;var r=r[0],n=(e.endExtentID=r,this.sa);for(let t=0;t<n.length;t++)n[t].eo=!0;var s=this.aa(n),i=this.ua(i,r,s);if(i.rst!=G.ROUTE_SUCCESS)return i.rst;var l=new Map;for(let t=0;t<s.length;t++)l.has(s[t])?l.get(s[t]).push(n[t]):l.set(s[t],[n[t]]);r=i.extentPath,i=this.fa(t,e,l,r);return this.ca(i.nodePath),i.rst},da(t,e,i,r){this.hr(),t.process&&(delete t.process,delete t.tmpNode),e.process&&(delete e.process,delete e.tmpNode);let n=null;var s=(n=this.$h&&this.barrierFree?this.Xh:this.Yh).wh(t);if(!s)return t.process=null,e.process=t.tmpNode=null,e.tmpNode=null,G.ROUTE_FAILED_NO_DATA_START;var l=s.No(t);if(l&&l.vl&&l.vl.pass==V.NaviModelPassType_NOT_PASS)return t.process=null,e.process=t.tmpNode=null,e.tmpNode=null,G.ROUTE_FAILED_NO_START_ARRIVAL;var o=n.wh(e);if(!o)return t.process=null,e.process=t.tmpNode=null,e.tmpNode=null,G.ROUTE_FAILED_NO_DATA_DEST;var h=o.No(e);if(h&&h.vl&&h.vl.pass==V.NaviModelPassType_NOT_PASS)return t.process=null,e.process=t.tmpNode=null,e.tmpNode=null,G.ROUTE_FAILED_NO_DEST_ARRIVAL;this.Qs=i,this.Rt=t,this.gl=l.vl,this.It=e,this.ml=h.vl;var a=s.Ni;let u=o.Ni;o=l.vl,l=h.vl;let f=G.ROUTE_FAILED_CANNOT_ARRIVE;if(this.Ri=[],1!==this.se&&this.pa(r),a===u){h=t.level,r=s;r.gl=o,r.ml=l,r.tl=this.tl,(f=r.rl(t,e,i))===G.ROUTE_SUCCESS&&(s=r.hl(),this.Ri.push({Zr:h,Ri:s}))}else{this.va(a,u,t,e)!=G.ROUTE_SUCCESS&&(f=G.ROUTE_FAILED_OUTLINE),this.Ih.reverse();o=this.ba(n,t,e);if(o==G.ROUTE_SUCCESS)return t.process=null,e.process=t.tmpNode=null,e.tmpNode=null,o;f=o}if(f!=G.ROUTE_SUCCESS)for(;2<this.ya(a,u,t,e).length;){if(this.ba(n,t,e)===G.ROUTE_SUCCESS)return this.ga(),t.process=null,e.process=t.tmpNode=null,e.tmpNode=null,G.ROUTE_SUCCESS;a===u&&0<this.Ih.length&&(u=this.Ih[this.Ih.length-1].vn)}return this.ga(),t.process=null,e.process=t.tmpNode=null,e.tmpNode=null,f},ya(t,e,i,r){let n=null;if(n=this.$h&&this.barrierFree?this.Mh:this.Eh,t===e){var s=this.Nh.length+1,l=new vn,o=n.qs.ps(t),o=n.qs.Un[o],o=(l.Ni=o.Ni,l.Zr=o.Zr,l.vn=s,l.il=o.il,l.Cn=o.Cn,l.Xr=o.Xr,l.qr=o.qr,this.Nh.push(l),this.ma(),new M(this.Nh,this.Ah)),l=(e=s,(n=new yn(o)).qs.Kn.get(t));if(l)for(var h of l.values())h.Es===e&&(h.Cr=Number.MAX_VALUE)}else for(var a=0;a<this.ia.length;a++){var u=this.ia[a].from.vn,f=this.ia[a].to.vn,u=n.qs.Kn.get(u);if(u)for(var c of u.values())c.Es===f&&(c.Cr=Number.MAX_VALUE)}return this.Eh=n,this.va(t,e,i,r)!=G.ROUTE_SUCCESS&&(this.Ih=[]),this.Ih.reverse(),this.Ih},ga(){var t;this.$h&&this.barrierFree?(this._a(),this.ma(),t=new M(this.Th,this.Rh),this.Mh=new yn(t)):(this._a(),this.ma(),t=new M(this.Nh,this.Ah),this.Eh=new yn(t)),this.ia=[]},ba(r,n,s){this.Ri=[];var l=[],o=[this.Rt];let h=G.ROUTE_FAILED_CANNOT_ARRIVE;for(let i=0;i<this.Ih.length-1;i++){var a=[],u=[];if(null==this.se||0===this.se){if(!this.wa(this.Ih[i],this.Ih[i+1],o[o.length-1],a,u))return this.ia.push({from:this.Ih[i],to:this.Ih[i+1]}),G.ROUTE_FAILED_CANNOT_ARRIVE}else if(!this.xa(this.Ih[i],this.Ih[i+1],o[o.length-1],a,u))return this.ia.push({from:this.Ih[i],to:this.Ih[i+1]}),G.ROUTE_FAILED_CANNOT_ARRIVE;let e=!1;for(let t=0;t<a.length;t++){var f=a[t].un,c=u[t].un,d=a[t].Zr,p=u[t].Zr,v={x:f.Jt.x,y:f.Jt.y,level:d},b={x:c.Jt.x,y:c.Jt.y,level:p},v=r.wh(v);if(h=0==i?(v.gl=this.gl,v.tl=this.tl,v.rl(n,f,this.Qs)):(v.tl=this.tl,v.rl(l[l.length-1],f,this.Qs)),G.ROUTE_SUCCESS==h){f=v.hl();if(this.Ri.push({Zr:d,Ri:f}),l.push(c),o.push(c.Jt),e=!0,this.Ih.length-2==i){v=r.wh(b);if(v.ml=this.ml,v.tl=this.tl,h=v.rl(c,s,this.Qs),G.ROUTE_SUCCESS!=h){this.Ri.splice(this.Ri.length-1,1),e=!1,o.splice(o.length-1,1),l.splice(l.length-1,1);continue}d=v.hl();this.Ri.push({Zr:p,Ri:d})}if(G.ROUTE_SUCCESS==h)break}}if(!e)return i,this.ia.push({from:this.Ih[i],to:this.Ih[i+1]}),G.ROUTE_FAILED_CANNOT_ARRIVE;h!==G.ROUTE_SUCCESS&&this.ia.push({from:this.Ih[i],to:this.Ih[i+1]})}return h},Oa(){if(this.Qh&&(this.Hh=null,this.ml)&&0<this.Ri.length){var i=this.Ri[this.Ri.length-1].Ri;let e=null;var t,r,n={x:-1,y:-1};for(let t=i.length-1;0<t;t--){var s=i[t],l=i[t-1];if(D.yt(s.Jt,l.Jt,this.ml.$t,n)){e=t;break}}null!=e&&(t=i[i.length-1],i.splice(e,i.length-e),(r=new R).Ni=-1,r.Jt=n,(t.eo||t.Jt.eo)&&(r.eo=!0,t.eo?r.Co=t.Co:r.Co=t.Jt),i.push(r),this.Hh=n)}var o=[];for(let t=0;t<this.Ri.length;t++)1<this.Ri[t].Ri.length&&o.push(this.Ri[t]);var h=[];for(let t=0;t<o.length;t++){this.ja(o[t]);var a=o[t],u=a.Zr,f=a.Ri,c=[];let e=0;for(let t=0;t<f.length;t++)c.push(f[t].Jt),t!=f.length-1&&(e+=D.K(f[t].Jt,f[t+1].Jt));var a=new fn;a.Zr=u,a.Ur=f,a.Wr=c,a.Cr=e,h.push(a),t!=o.length-1&&(u=this.ka(o[t]),a=this.Ea(o[t+1]),h.push(u),h.push(a))}return h},ja(t){if(t?.Ri){var r=t.Ri;let i=r.length;if(i&&!(i<2)){var n=[];n.push(r[0]);let e=r[0];var s=r[i-1];D.K(e.Jt,s.Jt);for(let t=1;t<i-1;t++){var l=r[t];null!=e&&D.K(e.Jt,l.Jt)<.001||null!=s&&D.K(s.Jt,l.Jt)<.001||(n.push(l),e=l)}n.push(s),i=n.length;var o=new Array(i);for(let t=0;t<i;t++)o[t]=0;for(let e=1;e<i-1;e++){var h=n[e];let t=e-1;for(;0!=o[t];)t--;var a=n[t],u=n[e+1];!D.H(h.Jt,a.Jt,u.Jt)||h.eo||(o[e]=1)}var f=[];for(let t=0;t<i;t++)0==o[t]&&f.push(n[t]);t.Ri=f}}},hr(){this.Ih=[],this.Lh=[];var t,e=this.Yh.mh;for(t of e.keys()){var i=e.get(t);i.hr(),i.obstruct=this.ql}var r,n=this.Yh.mh;for(r of n.keys()){var s=n.get(r);s.hr(),s.obstruct=this.ql}this.na=[],this.ra=Number.MAX_VALUE},Ma(e,i){var r=null;let t=null;if(null==(t=(this.$h&&this.barrierFree?this.Xh:this.Yh).wh(e)))return null;var n=t.qs,s=[],l=(s.push(...n.qn),r={distance:Number.MAX_VALUE,road:null,angle:null,coords:{level:e.level}},{});for(let t=0;t<s.length;t++){var o,h=s[t];h.mn===V.NaviRoadEntry_FORBID||Array.isArray(i)&&0<i.length&&i.indexOf(h.gn)<0||(o=D.tt(e,h.Rt,h.It,l))<r.distance&&(r.distance=o,r.road=h,r.angle=this.Na(h.Rt,h.It),Object.assign(r.coords,l))}return null!=r.road&&(n={id:(n=r.road).Ni,extentID:n.vn,roadEntry:n.mn,roadRank:n.gn,startID:n.cn,startPoint:n.Rt,endID:n.dn,endPoint:n.It},r.road=n),r},Ta(e){var i=null;let t=null;if(null==(t=(this.$h&&this.barrierFree?this.Xh:this.Yh).wh(e)))return null;var r=t.qs,n=[],s=(n.push(...r.qn),i={distance:Number.MAX_VALUE,road:null,angle:null,coords:{level:e.level}},{});for(let t=0;t<n.length;t++){var l=n[t],o=D.tt(e,l.Rt,l.It,s);o<i.distance&&(i.distance=o,i.road=l,i.angle=this.Na(l.Rt,l.It),Object.assign(i.coords,s))}return null!=i.road&&(r={id:(r=i.road).Ni,extentID:r.vn,roadEntry:r.mn,roadRank:r.gn,startID:r.cn,startPoint:r.Rt,endID:r.dn,endPoint:r.It},i.road=r),i},Na(t,e){var i=new j(0,0,1),t=new j(t.x,0,t.y),e=new j(e.x,0,e.y).clone().sub(t).normalize(),t=e.angleTo(i)*D.S();return 0<e.clone().cross(i).y?360-t:t},la(t){this.$h?this.kh=new Map:this.jh=new Map,this.qh.Vs(this.Ds);for(var e of t){var i=e[1].gid;if(null!=i){var r=e[1].geo[0],n=e[1].biz[0];let t=null;if(1==this.se?0<e[1].naviDrive.length&&(t=e[1].naviDrive[0]):this.$h?0<e[1].naviAccessible.length&&(t=e[1].naviAccessible[0]):0<e[1].navi.length&&(t=e[1].navi[0]),t){e=this.qh.Us(i,r,n,t);if(0!=e.naviNodes.length&&0!=e.naviSegments.length){var r=new Map,n=this.Aa(e,r),s=this.Ra(e),l=this.Ia(e),o=this.La(e),h=this.Sa(e),a=(this.Fa(h,n,t,r),new M(n,s,!0,1));a.Zr=i,0!=o.length&&(a.Xn=o),0!=l.length&&(a.Hn=l),0!=h.length&&(a.Yn=h);for(let t=0;t<s.length;t++)s[t].vn=a.ss(s[t].Rt);(0==this.$h?this.jh:this.kh).set(e.level,a)}}}}},Aa(t,i){var r,n=[];for(r in t.naviNodes){var s=t.naviNodes[r];if(null!=s.nodeId){let e=new R;e.Ni=s.nodeId,e.Jt={x:parseFloat(s.geoArr.x.toFixed(3)),y:parseFloat(s.geoArr.y.toFixed(3))},e.tn=s.nodeType,e.rn=s.liftType,e.Xr=s.liftFlag,e.nn=s.liftEntry,s.accessible&&(e.Pa=s.accessible),s.linkSegArr.forEach(t=>{e.Yr.push(parseInt(t))}),s.liftFloorArr.forEach(t=>{e.qr.push(parseInt(t))}),n.push(e),i.set(s.nodeId,r)}}return n},Ra(t){var e,i=[];for(e in t.naviSegments){var r,n=t.naviSegments[e],s=n.geoArr;s&&((r=new E).Ni=n.segmentId,r.cn=n.snode,r.Rt={x:parseFloat(s[0].x.toFixed(3)),y:parseFloat(s[0].y.toFixed(3))},r.dn=n.enode,r.It={x:parseFloat(s[1].x.toFixed(3)),y:parseFloat(s[1].y.toFixed(3))},r.Cr=n.length,r.mn=n.entry,r.gn=n.rank,i.push(r))}return i},La(i){var r=[];for(let e=0,t=i.extentLayer.length;e<t;e++){var n=i.extentLayer[e];let t=n.geoArr;t=t||[];var s=new pn(n.eid,i.gid,0,t,n.Xt,n.holes);s.fid=n.fid,r.push(s)}return r},Sa(i){var r=[];for(let e=0,t=i.modelLayer.length;e<t;e++){var n=i.modelLayer[e];let t=n.geoArr;t=t||[];var s=new pn(n.eid,i.gid,0,t,n.Xt,n.holes);s.fid=n.fid,s.pass=n.pass,r.push(s)}return r},Ia(i){var r=[];for(let t=0,e=i.naviZones.length;t<e;t++){var n=i.naviZones[t],n=new dn(n.Ni,i.gid,n.type,n.geoArr);r.push(n)}return r},Fa(e,i,r,n){var s=new Map;for(let t=0;t<e.length;t++){var l=e[t];s.set(l.Ni,t)}for(let t=0;t<r.naviModels.length;t++){var o=r.naviModels[t],h=o.modelid,a=e[s.get(h)];for(let t=0;t<o.doorids.length;t++){var u=o.doorids[t],u=i[n.get(u)],u=(a.Gn.push(u),o.nodetypes[t]),f=o.entrytypes[t];a.Dn.push(u),a.Vn.push(f)}}},oa(){var t;this.$h?(this._a(),this.ma(),t=new M(this.Th,this.Rh),this.Mh=new yn(t)):(this._a(),this.ma(),t=new M(this.Nh,this.Ah),this.Eh=new yn(t))},_a(){let e=0,i=0,t=null;for(var r of t=this.$h?(this.Th=[],this.kh):(this.Nh=[],this.jh)){var n=r[1],s=n.Xn;for(let t=0;t<s.length;t++){var l=s[t],o=new vn;o.Ni=l.Ni,o.Zr=r[0],o.vn=++e,l.vn=o.vn,o.il=l;for(let t=0;t<n.Un.length;t++){var h,a,u=n.Un[t];u.rn!=V.NaviLiftType_NULL&&D.X(u.Jt,l.$t,l.En)&&(h=new cn,a=n.cs(u.Jt),h.an=a,h.ln(u),h.hn=++i,h.Zr=r[0],h.un=u,h.nn=u.nn,h.rn=u.rn,h.Xr=u.Xr,h.vn=o.vn,this.$h?1===u.Pa&&(h.Pa=u.Pa,o.Cn.push(h)):(1===u.Pa&&(h.Pa=u.Pa),o.Cn.push(h)))}(this.$h?this.Th:this.Nh).push(o)}}},ma(){let i=null,r=0;i=this.$h?this.Th:this.Nh;var n=[];for(let e=0;e<i.length;e++){var s=i[e];for(let t=0;t<i.length;t++){var l,o=i[t];if(e!=t){let t;null!=(t=null==this.se||0==this.se?this.Ga(s,o):this.Da(s,o))&&(l=Math.abs(s.Zr-o.Zr),t*=0==l?1:l,(l=new E).cn=s.vn,l.dn=o.vn,l.Cr=t,l.mn=V.NaviRoadEntry_FORWARD,l.Ni=r,r+=1,n.push(l))}}}this.$h?this.Rh=n:this.Ah=n},Ga(e,i){let r=Number.MAX_VALUE,n=!1;var t=e.Zr,s=i.Zr,l=t<s?V.NaviLiftEntry_DOWN:V.NaviLiftEntry_UP;for(let t=0;t<e.Cn.length;t++){var o=e.Cn[t],h=o.nn;if(h!=V.NaviLiftEntry_FORBID&&h!=l){var a=o.rn;if(v.PRIORITY_LIFTONLY==this.Oh){if(V.NaviLiftType_Lift!=a)continue}else if(v.PRIORITY_ESCALATORONLY==this.Oh){if(V.NaviLiftType_Escalator!=a)continue}else if(v.PRIORITY_STAIRONLY==this.Oh){if(V.NaviLiftType_Stair!=a)continue}else if(v.PRIORITY_ACCESSIBLEONLY==this.Oh&&V.NaviLiftType_Accessible!=a)continue;if(a==V.NaviLiftType_Stair||-1!=o.qr.indexOf(s))for(let t=0;t<i.Cn.length;t++){var u=i.Cn[t];if(null!=u&&o.Xr==u.Xr)if(v.PRIORITY_LIFTFIRST==this.Oh||v.PRIORITY_DEFAULT==this.Oh){if(V.NaviLiftType_Lift==a||V.NaviLiftType_Accessible==a)return this.Sh;if(V.NaviLiftType_Escalator==a){u=this.Dh;r>u&&(r=u),n=!0;break}if(V.NaviLiftType_Stair==a){u=this.Ch;r>u&&(r=u),n=!0;break}}else if(v.PRIORITY_ESCALATORFIRST==this.Oh){if(V.NaviLiftType_Lift==a||V.NaviLiftType_Accessible==a){u=this.Fh;r>u&&(r=u),n=!0;break}if(V.NaviLiftType_Escalator==a)return this.Gh;if(V.NaviLiftType_Stair==a){u=this.Ch;r>u&&(r=u),n=!0;break}}else if(v.PRIORITY_STAIRFIRST==this.Oh){if(V.NaviLiftType_Lift==a){u=this.Fh;r>u&&(r=u),n=!0;break}if(V.NaviLiftType_Escalator==a||V.NaviLiftType_Accessible==a){u=this.Vh;r>u&&(r=u),n=!0;break}if(V.NaviLiftType_Stair==a)return this.Bh}else{if(v.PRIORITY_LIFTFIRST1==this.Oh||v.PRIORITY_STAIRFIRST1==this.Oh||v.PRIORITY_ESCALATORFIRST1==this.Oh)return this.Wh;if(v.PRIORITY_LIFTONLY==this.Oh||v.PRIORITY_ESCALATORONLY==this.Oh||v.PRIORITY_STAIRONLY==this.Oh||v.PRIORITY_ACCESSIBLEONLY==this.Oh)return this.Wh}}}}return n?r:null},Da(e,i){let r=Number.MAX_VALUE,n=!1;var s=e.Zr<i.Zr?V.NaviLiftEntry_DOWN:V.NaviLiftEntry_UP;for(let t=0;t<e.Cn.length;t++){var l=e.Cn[t],o=l.nn;if(o!=V.NaviLiftEntry_FORBID&&o!=s){for(let t=0;t<i.Cn.length;t++){var h=i.Cn[t];if(l.Xr==h.Xr){r=this.Uh,n=!0;break}}if(n)break}}return n?r:null},pa(t){this.Oh!==t&&(this.Oh=t,this.barrierFree?(this.ma(),t=new M(this.Th,this.Rh),this.Mh=new yn(t)):(this.ma(),t=new M(this.Nh,this.Ah),this.Eh=new yn(t)))},Ea(t){var e=t.Ri,i=new fn;return i.Zr=t.Zr,i.Ur.push(e[0]),i.Wr.push(e[0].Jt),i.Cr=0,i},ka(t){var e=t.Ri,i=new fn;return i.Zr=t.Zr,i.Ur.push(e[e.length-1]),i.Wr.push(e[e.length-1].Jt),i.Cr=0,i},Va(e,i){let r=null;r=this.$h&&this.barrierFree?this.Th:this.Nh;for(let t=0;t<r.length;t++)if(null!=e&&r[t].Zr==e&&r[t].Ni==i)return r[t];return null},Ba(e){let i=null,r=null;r=this.$h&&this.barrierFree?this.Th:this.Nh;for(let t=0;t<r.length;t++)if(r[t].vn==e)return i=r[t];return i},va(t,e,i,r){var n;let s=null;if((t=(s=this.$h&&this.barrierFree?this.Mh:this.Eh).ol(t,e,i,r))==G.ROUTE_SUCCESS){n=s.hl(),this.Ih=[];for(let t=0;t<n.length;t++)this.Ih.push(n[t])}return t},wa(i,e,r,n,s){let t=null;this.$h&&this.barrierFree?(t=this.Xh.wh(r))?this.Jh=t.qs.cs(r):this.Jh=this.Xh.mh.get(i.Zr).qs.cs(r):(t=this.Yh.wh(r))?this.Jh=t.qs.cs(r):this.Jh=this.Yh.mh.get(i.Zr).qs.cs(r);var l=Math.abs(i.Zr-e.Zr);let o=[];function h(t,e){t=i.Wn(t,e,a);o.push(...t)}let a=[];if(0==this.$h&&1==this.barrierFree)for(let t=0;t<i.Cn.length;t++)1==i.Cn[t].Pa&&a.push(i.Cn[t]);else a=i.Cn;for(let t=0;t<a.length;t++){var u=a[t];u.Kr=D.K(u.Jt,this.It)+D.K(u.Jt,r)}if(1===this.se)o=a;else{var f=i.il.Ct.size,f=f.x+f.y;if(v.PRIORITY_LIFTONLY===this.Oh||v.PRIORITY_ESCALATORONLY===this.Oh||v.PRIORITY_STAIRONLY===this.Oh||v.PRIORITY_ACCESSIBLEONLY===this.Oh){let t=null;v.PRIORITY_LIFTONLY===this.Oh&&(t=V.NaviLiftType_Lift),v.PRIORITY_ESCALATORONLY===this.Oh&&(t=V.NaviLiftType_Escalator),v.PRIORITY_STAIRONLY===this.Oh&&(t=V.NaviLiftType_Stair),v.PRIORITY_ACCESSIBLEONLY===this.Oh&&(t=V.NaviLiftType_Accessible),o=i.Wn(t,null,a)}v.PRIORITY_LIFTFIRST!==this.Oh&&v.PRIORITY_ESCALATORFIRST!==this.Oh&&v.PRIORITY_STAIRFIRST!==this.Oh&&v.PRIORITY_DEFAULT!==this.Oh||(v.PRIORITY_LIFTFIRST!==this.Oh&&v.PRIORITY_DEFAULT!==this.Oh||(h(V.NaviLiftType_Lift,-15*l),h(V.NaviLiftType_Escalator,-8*l),h(V.NaviLiftType_Stair,0)),v.PRIORITY_ESCALATORFIRST===this.Oh&&(h(V.NaviLiftType_Lift,-8*l),h(V.NaviLiftType_Escalator,-15*l),h(V.NaviLiftType_Stair,0)),v.PRIORITY_STAIRFIRST===this.Oh&&(h(V.NaviLiftType_Lift,-8*l),h(V.NaviLiftType_Escalator,0),h(V.NaviLiftType_Stair,-15*l))),v.PRIORITY_LIFTFIRST1!==this.Oh&&v.PRIORITY_ESCALATORFIRST1!==this.Oh&&v.PRIORITY_STAIRFIRST1!==this.Oh||(v.PRIORITY_LIFTFIRST1===this.Oh&&(h(V.NaviLiftType_Lift,-f),h(V.NaviLiftType_Escalator,0),h(V.NaviLiftType_Stair,0)),v.PRIORITY_ESCALATORFIRST1===this.Oh&&(h(V.NaviLiftType_Lift,0),h(V.NaviLiftType_Escalator,-f),h(V.NaviLiftType_Stair,0)),v.PRIORITY_STAIRFIRST1===this.Oh&&(h(V.NaviLiftType_Lift,0),h(V.NaviLiftType_Escalator,0),h(V.NaviLiftType_Stair,-f)))}let c=this;o.sort(function(t,e){if(t.zone!==e.zone){if(t.zone===c.Jh)return-1;if(e.zone===c.Jh)return 1}return t.Kr-e.Kr});for(let t=0;t<o.length;t++){var d=o[t];if(!(1===d.nn&&e.Zr<i.Zr)&&(!(2===d.nn&&e.Zr>i.Zr)&&3!==d.nn))for(let t=0;t<e.Cn.length;t++){var p=e.Cn[t];if(d.Xr===p.Xr){n.push(d),s.push(p);break}}}return 0!==n.length},xa(e,i,r,n,s){this.Jh=this.Yh.mh.get(e.Zr).qs.cs(r);var l=[],o=e.Cn;for(let t=0;t<o.length;t++){var h=o[t];h.Kr=D.K(h.Jt,this.It)+D.K(h.Jt,r)}var t=V.NaviLiftType_Ramp,l=e.Wn(t);let a=this;l.sort(function(t,e){if(t.zone!==e.zone){if(t.zone===a.Jh)return-1;if(e.zone===a.Jh)return 1}return t.Kr-e.Kr});for(let t=0;t<l.length;t++){var u=l[t];if(!(1===u.nn&&i.Zr<e.Zr)&&(!(2===u.nn&&i.Zr>e.Zr)&&3!==u.nn))for(let t=0;t<i.Cn.length;t++){var f=i.Cn[t];if(u.Xr===f.Xr){n.push(u),s.push(f);break}}}return 0!==n.length},aa(t){var e=[];let i=null;if(i=this.barrierFree?this.Xh:this.Yh)for(var r of t){r=i.wh(r)?.Ni;r&&e.push(r)}return e},ua(t,e,i){let r=null;var i=Array.from(new Set(i)),n=i.indexOf(t),n=(-1!=n&&i.splice(n,1),i.indexOf(e));if(-1!=n&&i.splice(n,1),i.length<=0){if(r={rst:G.ROUTE_FAILED_OUTLINE,extentPath:[]},t==e)return r.extentPath.push(t),r.rst=G.ROUTE_SUCCESS,r;if(r.rst=this.va(t,e),r.rst!=G.ROUTE_SUCCESS)return r;this.Ih.reverse();for(let t=0;t<this.Ih.length;t++)r.extentPath.push(this.Ih[t].vn)}else r=this.Za(t,e,i);return r},Ca(e){let i=0;if(!(null==e||e.length<=0)){var r=this.Eh.qs.Kn;for(let t=1;t<e.length;t++){var n=e[t].Ni,s=e[t-1].Ni,l=r.get(s);for(let t=0;t<l.length;t++)if(l[t].Es==n){i+=l[t].Cr;break}}}return i},Za(t,e,n){var s={rst:null,extentPath:[]},l=[];let o=t;for(;0<n.length;){let e=Number.MAX_VALUE,i=null;let r=null;for(let t=0;t<n.length;t++){var h,a=n[t];this.Eh.ol(o,a)==G.ROUTE_SUCCESS&&((a=this.Eh.hl()).reverse(),(h=this.Ca(a))<e)&&(e=h,i=t,r=a)}if(null==i)return s;o=n[i],r.splice(r.length-1,1),l.push(...r),n.splice(i,1)}if(s.rst=this.Eh.ol(o,e),s.rst==G.ROUTE_SUCCESS){t=this.Eh.hl();t.reverse(),l.push(...t);for(let t=0;t<l.length;t++)s.extentPath.push(l[t].vn)}return s},Wa(t,e,i){var r=[],n=[];return this.Ua(t,e,i,r,n)?[r,n]:[]},fa(t,e,i,n){this.hr(),t.process&&(delete t.process,delete t.tmpNode),e.process&&(delete e.process,delete e.tmpNode);var s=[];let l=t;var o=Object.fromEntries([...i.keys()].map(t=>[t,!1]));for(let r=0;r<n.length;r++){var h=l instanceof R?l.Zr:l.level,a=[],u=n[r],f=o[u]?[]:i.get(u);if(r==n.length-1)if(null==f||0==f.length){var c=this.qa(l,e);if(c.rst!=G.ROUTE_SUCCESS)return{rst:c.rst,nodePath:s};a.push(...c.nodePath)}else{f.push(e);c=this.Ya(l,f);a.push(...c.path)}else{let t,e;if(Array.isArray(f)&&1==f.length){var d=this.qa(l,f[0]);if(d.rst!=G.ROUTE_SUCCESS)return{rst:d.rst,nodePath:s};a.push(...d.nodePath),t=a[a.length-1],e={level:t.Zr,...t.Jt}}else if(Array.isArray(f)&&1<f.length){d=this.Ya(l,f);if(d.rst!=G.ROUTE_SUCCESS)return{rst:d.rst,nodePath:s};a.push(...d.path),t=a[a.length-1],e={level:t.Zr,...t.Jt}}else t=l,e=t;o[u]=!0;var f=this.Ba(u),u=this.Ba(n[r+1]),p=[],v=[];if(!this.Ua(f,u,t,p,v))return{rst:G.ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR,nodePath:s};let i=null;for(let t=0;t<p.length;t++){var b=p[t],b=this.qa(e,b);if(b.rst==G.ROUTE_SUCCESS){a.push(...b.nodePath),i=t;break}}if(null==i)return{rst:G.ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR,nodePath:s};l=v[i]}s.push({level:h,path:a})}return{rst:G.ROUTE_SUCCESS,nodePath:s}},ca(e){var i=[];for(let t=0;t<e.length;t++)i.push({Zr:e[t].level,Ri:e[t].path});this.Ri=i},qa(t,e){this.hr(),t.process&&(delete t.process,delete t.tmpNode),e.process&&(delete e.process,delete e.tmpNode),this.Ri=[];let i=null,r=Number.MAX_VALUE,n=[];var s=(i=this.$h&&this.barrierFree?this.Xh:this.Yh).wh(t);if(!s)return G.ROUTE_FAILED_NO_DATA_START;var l=i.wh(e);if(!l)return G.ROUTE_FAILED_NO_DATA_DEST;s.hr(),l.hr();var o=s.No(t);if(o&&o.vl&&o.vl.pass==V.NaviModelPassType_NOT_PASS)return{rst:G.ROUTE_FAILED_NO_START_ARRIVAL,dist:r,nodePath:n};var h=l.No(e);if(h&&h.vl&&h.vl.pass==V.NaviModelPassType_NOT_PASS)return{rst:G.ROUTE_FAILED_NO_DEST_ARRIVAL,dist:r,nodePath:n};this.Rt=t,this.gl=o.vl,this.It=e,this.ml=h.vl;var a=s.Ni;let u=l.Ni;l=o.vl,o=h.vl;let f=G.ROUTE_FAILED_CANNOT_ARRIVE;if(this.Ri=[],a===u){h=t.level;s.gl=l,s.ml=o,s.tl=this.tl,(f=s.rl(t,e,this.Qs))===G.ROUTE_SUCCESS&&(l=s.hl(),this.Ri.push({Zr:h,Ri:l}))}else{this.va(a,u,t,e)!=G.ROUTE_SUCCESS&&(f=G.ROUTE_FAILED_OUTLINE),this.Ih.reverse();o=this.ba(i,t,e);if(o==G.ROUTE_SUCCESS){n=this.Oa();var c=[];for(let t=0;t<n.length;t++)c.push(...n[t].Ur);return{rst:o,dist:r=this.Xa(c),nodePath:c,naviResult:n}}f=o}if(f!=G.ROUTE_SUCCESS)for(;2<this.ya(a,u,t,e).length;){if(this.ba(i,t,e)===G.ROUTE_SUCCESS){n=this.Oa();var d=[];for(let t=0;t<n.length;t++)d.push(...n[t].Ur);return r=this.Xa(d),this.ga(),{rst:G.ROUTE_SUCCESS,dist:r,nodePath:d,naviResult:n}}a===u&&0<this.Ih.length&&(u=this.Ih[this.Ih.length-1].vn)}n=this.Oa();var p=[];for(let t=0;t<n.length;t++)p.push(...n[t].Ur);return r=this.Xa(p),this.ga(),{rst:f,dist:r,nodePath:p,naviResult:n}},Ya(e,i){this.hr(),e.process&&(delete e.process,delete e.tmpNode);for(var t of i)t.process&&(delete t.process,delete t.tmpNode);let r=null;var n=Number.MAX_VALUE,s=(r=this.$h&&this.barrierFree?this.Xh:this.Yh).wh(e);if(!s)return{rst:G.ROUTE_FAILED_NO_DATA_START};var l=s.No(e);if(l&&l.vl&&l.vl.pass==V.NaviModelPassType_NOT_PASS)return{rst:G.ROUTE_FAILED_NO_START_ARRIVAL,dist:n,nodePath:[]};var o=new Map;for(let t=0;t<i.length;t++){var h,a=i[t],u=r.wh(a);u&&(h=u.No(a),a.ml=h.vl,h&&h.vl&&h.vl.pass==V.NaviModelPassType_NOT_PASS||(o.has(u.Ni)?o.get(u.Ni).endPoints.push(a):o.set(u.Ni,{dijk:u,endReachable:h,endPoints:[a]})))}var f,c,d=[];for([f,c]of o){var p=c.dijk,v=(c,c.endPoints),b=s.Ni,p=p.Ni;if(e instanceof R||l.vl,G.ROUTE_FAILED_CANNOT_ARRIVE,b===p){e.level;var b=s,y=(b.gl=e instanceof R?null:l.vl,b.tl=this.tl,b.ll(e,v,this.Qs)),g=new Map;let t=null;var m,_,w=new Map;for([m,_]of y){var x,O,j,k=[];Number.MAX_VALUE;w.set(m.Ni,m);for([O,j]of _)x=this.Xa(j),k.push({id:O.Ni,length:x});m.do&&(t=m),g.set(m.Ni,{visited:!1,dist:Number.MAX_VALUE,adjs:k})}var E=this.za(g,b.Ys,t);if(this.Qh){let e=[];for(let t=0;t<E.length-1;t++){var M=w.get(E[t]),N=w.get(E[t+1]);(e=[]).push(...y.get(M).get(N)),0<t&&e.slice(0,1),e=this.Ha(r,e,N),d.push(...e)}}else for(let t=0;t<E.length-1;t++){var T=w.get(E[t]),A=w.get(E[t+1]);d.push(...y.get(T).get(A)),d.slice(-1,1)}}}return{rst:G.ROUTE_SUCCESS,level:e.level,path:d}},za(t,e){t.get(e.Ni).dist=0;var i=[];return i.push(e.Ni),this.Qa(t,e.Ni,0,i),this.na},Qa(t,e,i,r){if(r.length>=t.size)i<this.ra&&(this.ra=i,this.na=[...r]);else if(!(i>this.ra))for(var n of t.get(e).adjs)if(n.id!==e&&-1===r.indexOf(n.id)){if(r.push(n.id),(i+=n.length)>this.ra)return;this.Qa(t,n.id,i,r),r.pop(),i-=n.length}},Ka(t,e,i,r,n){if(i>=t.size-1)r<this.ra&&(this.ra=r,Object.assign(this.na,[]),this.na.push(...n));else if(!(r>this.ra))for(var s of t.get(e).adjs)if(s.id!=e&&-1===n.indexOf(s.id)){if(n.push(s.id),(r+=s.length)>=this.ra)return;this.Qa(t,s.id,i+1,r,n),n.pop(),r-=s.length}},Ha(t,i,r){var n=t.wh(r.Jt).No(r.Jt).vl;if(this.Qh&&(this.Hh=null,n)&&0<i.length){let e=null;var s={x:-1,y:-1};for(let t=i.length-1;0<t;t--){var l=i[t],o=i[t-1];if(D.yt(l.Jt,o.Jt,n.$t,s)){e=t;break}}null!=e&&(t=i[i.length-1],i.splice(e,i.length-e),(r=new R).Ni=-1,r.Jt=s,(t.eo||t.Jt.eo)&&(r.eo=!0,t.eo?r.Co=t.Co:r.Co=t.Jt),i.push(r),this.Hh=s)}return i},Xa(e){let i=0;if(!(null==e||e.length<=1))for(let t=1;t<e.length;t++)i+=D.K(e[t].Jt,e[t-1].Jt);return i},Ua(i,e,r,n,s){var t=Math.abs(i.Zr-e.Zr);let l=[];function o(t,e){t=i.Wn(t,e,h);l.push(...t)}let h=[];if(0==this.$h&&1==this.barrierFree)for(let t=0;t<i.Cn.length;t++)1==i.Cn[t].Pa&&h.push(i.Cn[t]);else h=i.Cn;for(let t=0;t<h.length;t++){var a=h[t];a.Kr=D.K(r,a.Jt)}if(1===this.se)l=h;else{var u=i.il.Ct.size,u=u.x+u.y;if(v.PRIORITY_LIFTONLY===this.Oh||v.PRIORITY_ESCALATORONLY===this.Oh||v.PRIORITY_STAIRONLY===this.Oh||v.PRIORITY_ACCESSIBLEONLY===this.Oh){let t=null;v.PRIORITY_LIFTONLY===this.Oh&&(t=V.NaviLiftType_Lift),v.PRIORITY_ESCALATORONLY===this.Oh&&(t=V.NaviLiftType_Escalator),v.PRIORITY_STAIRONLY===this.Oh&&(t=V.NaviLiftType_Stair),v.PRIORITY_ACCESSIBLEONLY===this.Oh&&(t=V.NaviLiftType_Accessible),l=i.Wn(t,null,h)}v.PRIORITY_LIFTFIRST!==this.Oh&&v.PRIORITY_ESCALATORFIRST!==this.Oh&&v.PRIORITY_STAIRFIRST!==this.Oh&&v.PRIORITY_DEFAULT!==this.Oh||(v.PRIORITY_LIFTFIRST!==this.Oh&&v.PRIORITY_DEFAULT!==this.Oh||(o(V.NaviLiftType_Lift,-15*t),o(V.NaviLiftType_Escalator,-8*t),o(V.NaviLiftType_Stair,0)),v.PRIORITY_ESCALATORFIRST===this.Oh&&(o(V.NaviLiftType_Lift,-8*t),o(V.NaviLiftType_Escalator,-15*t),o(V.NaviLiftType_Stair,0)),v.PRIORITY_STAIRFIRST===this.Oh&&(o(V.NaviLiftType_Lift,-8*t),o(V.NaviLiftType_Escalator,0),o(V.NaviLiftType_Stair,-15*t))),v.PRIORITY_LIFTFIRST1!==this.Oh&&v.PRIORITY_ESCALATORFIRST1!==this.Oh&&v.PRIORITY_STAIRFIRST1!==this.Oh||(v.PRIORITY_LIFTFIRST1===this.Oh&&(o(V.NaviLiftType_Lift,-u),o(V.NaviLiftType_Escalator,0),o(V.NaviLiftType_Stair,0)),v.PRIORITY_ESCALATORFIRST1===this.Oh&&(o(V.NaviLiftType_Lift,0),o(V.NaviLiftType_Escalator,-u),o(V.NaviLiftType_Stair,0)),v.PRIORITY_STAIRFIRST1===this.Oh&&(o(V.NaviLiftType_Lift,0),o(V.NaviLiftType_Escalator,0),o(V.NaviLiftType_Stair,-u)))}let f=this;l.sort(function(t,e){if(t.zone!==e.zone){if(t.zone===f.Jh)return-1;if(e.zone===f.Jh)return 1}return t.Kr-e.Kr});for(let t=0;t<l.length;t++){var c=l[t];if(!(1===c.nn&&e.Zr<i.Zr)&&!(2===c.nn&&e.Zr>i.Zr))for(let t=0;t<e.Cn.length;t++){var d=e.Cn[t];if(c.Xr===d.Xr){n.push(c),s.push(d);break}}}return 0!==n.length},Ja(i,t){t.sort(function(t,e){return D.J(i,t)-D.J(i,e)})},$a(r,t){let n=null;if(!(t.length<1)){var s,l=(n=t[0]).index;if(!(t.length<2)&&3<=t.length){let e=Number.MAX_VALUE,i=-1;for(let t=0;t<r.length;t++)t!=l&&(s=D.K(r[l],r[t]))<e&&(e=s,i=t);i!=t[1].index&&(n=t[1])}}return n},wo(i){0<i.length&&(this.ql=!0);var r=new Map;if(void 0!==i&&0===i.length){var t,e=this.Yh.mh,n=this.Yh.mh;for(t of this.Yl.keys()){for(var s of e.keys()){s=e.get(s);s.level===t&&s.wo([])}for(var l of n.keys()){l=n.get(l);l.level===t&&l.wo([])}}this.Yl.clear()}else{for(let e=0;e<i.length;e++){var o=i[e];let t=r.get(o.Zr);t||(t=[],r.set(o.Zr,t)),t.push(o)}var h,a=this.Yh.mh,u=this.Yh.mh;for(h of r.keys()){var f=this.Yl.get(h);if(!f||this.tu(r.get(h),f)){for(var c of a.keys()){c=a.get(c);c.level===h&&(c.wo(r.get(h)),this.Yl.set(h,r.get(h)))}for(var d of u.keys()){d=u.get(d);d.level===h&&(d.wo(r.get(h)),this.Yl.set(h,r.get(h)))}}}}},eu(){var t,e=this.Yh.mh;for(t of this.Yl.keys())for(var i of e.keys()){i=e.get(i);i.level===t&&i.eu()}this.Yl.clear()},tu(r,n){if(r.length!=n.length)return!0;for(let i=0;i<r.length;i++){let e=!1;for(let t=0;t<n.length;t++)n[t].iu(r[i])&&(e=!0);if(!e)return!0}return!1},vo(){for(var e in this.Kh){var i,r=parseInt(e);let t;for(i of(t=(this.$h&&this.barrierFree?this.Yh:this.Xh).mh).keys())t.get(i).Zr===r&&(dij.assignedPts=this.Kh[r],dij.vo(),this.Ri.push({Zr:r,Ri:dij.hl()}))}}});var On={zh:{straight:"",still_go_straight:"",back_to:"",turn_right:"",turn_left:"",right_front:" ",left_front:" ",turn_right_rear:"",turn_left_rear:"",up:"",down:"",up_to:"",down_to:"",drive_up:"",drive_down:"",meter:"",pass:"",arrived:"",front:"",stair:"",stair_pure:"",escalator_pure:"",lift_pure:"",ramp_pure:"",take:"",along:"",take_stair:"",along_ramp:"",front_pure:"",right_front_pure:"",right_pure:"",right_back_pure:"",back_pure:"",left_back_pure:"",left_pure:"",left_front_pure:"",east:"",west:"",south:"",north:"",southeast:"",northeast:"",southwest:"",northwest:"",face_to:"",start:"",dest:"",enter:"",outdoor:"",entrance:"",exit:"",reach:"",finish:""},en:{straight:"go straight",still_go_straight:"go straight",back_to:"turn back",turn_right:"turn right",turn_left:"turn left",right_front:"go straight right front ",left_front:"go straight left front ",turn_right_rear:"turn right rear",turn_left_rear:"turn left rear",up:"up",down:"up",up_to:"up to",down_to:"down to",drive_up:"drive up",drive_down:"drive down",meter:"meter",pass:"pass",arrived:"arrived",front:"front",stair:"stair",stair_pure:"stair",escalator_pure:"escalator",lift_pure:"lift",ramp_pure:"ramp",take:"take",along:"along",take_stair:"take stair",along_ramp:"along ramp",front_pure:"front",right_front_pure:"right front",right_pure:"right",right_back_pure:"right back",back_pure:"back",left_back_pure:"left back",left_pure:"left",left_front_pure:"left front",east:"east",west:"west",south:"south",north:"north",southeast:"southeast",northeast:"northeast",southwest:"southwest",northwest:"northwest",face_to:"face to",start:"start",dest:"dest",enter:"enter",outdoor:"outdoor",entrance:"entrance",exit:"exit",reach:"reach",finish:"the destination is on your"}};class jn{constructor(t){this.ru=t.data||null,this.nu=t.directionAssert||10,this.su=t.combineAsset||5,this.lu=t.combineDistance||.1,this.ou=t.language||n.ZH,this.se=t.type||w.Walk,this.hu=["north","northeast","east","southeast","south","southwest","west","northwest","north"],this.au=["front_pure","right_front_pure","right_pure","right_back_pure","back_pure","left_back_pure","left_pure","left_front_pure","front_pure"],this.uu=["still_go_straight","right_front","turn_right","turn_right_rear","back_to","turn_left_rear","turn_left","left_front","still_go_straight"],this.fu=0,this.cu=[],this.du=!1,this.pu=0,this.vu=t.reqDest,this.bu=null,Object.assign(this,t)}}Object.assign(jn.prototype,{yu(e){let i=[];for(let t=0;t<e.length;t++)i=i.concat(e[t].Ur);return i},gu(t,e){var i=Math.PI/4,t=t/i;let r=parseInt(t);t=t%1*i;return r%2==0?e<t&&(r+=1):i-e<=t&&(r+=1),r},mu(t,e){let i=e.angleTo(t);e=new j(e.x,e.z,e.y).cross(new j(t.x,t.z,t.y));return i=e.z<0?2*Math.PI-i:i},ar(){var t={center:{x:0,y:0,z:0}};return this.ru&&(t.center.x=this.ru.scene.defCenX,t.center.y=this.ru.scene.defCenY,t.center.z=this.ru.scene.defCenZ),t},_u(t,e){let i=0;return e.level&&(i=this.gr(e.level).height),new j(e.x-t.x,t.y+i,-e.y+t.y)},wu(t){t=On[this.ou][t];return t||""},gr(e){var i=null;if(!this.ru)return null;var r=this.ru.scene,i={level:e,height:0,gname:"",desc:""};for(let t=0;t<r.layerGroups.length;t++){var n=r.layerGroups[t];if(n.gid===e){i.height=n.height,i.gname=n.gname,i.desc=n.desc;break}}return i},xu(t){if(-1!=t)switch(t){case 2:return" "+this.wu("stair_pure");case 3:return" "+this.wu("escalator_pure");case 1:return" "+this.wu("lift_pure");case 5:return" "+this.wu("ramp_pure");default:return""}return this.wu("stair")},Ou(t,e){if(e==t.length-1)return{index:t[t.length-1].index};var i=new j(0,0,1);let r=i;0!=e&&((r=t[e].clone().sub(t[e-1]).normalize()).y=0,r.z*=-1);var n=t[e+1].clone().sub(t[e]),s=(n.y=0,n.length()),n=n.normalize(),i=(n.z*=-1,this.gu(this.mu(i,n),22.5*D.L())),n=this.mu(r,n),l=this.gu(n,this.nu*D.L());return{relField:l,relDesc:this.wu(this.au[l]),relAngle:n*D.S(),absField:i,absDesc:this.wu(this.hu[i]),distance:s,index:t[e].index}},ju(e,i,r){let n=this.ar().center;var s=e.map((t,e)=>{t=this._u(n,t);return t.index=e,t}),l=[];for(let t=0;t<s.length;t++){var o=this.Ou(s,t);o.point=e[t],0!==i[t].rn&&(o.isLift=!0),!0===i[t].eo&&(o.eo=!0),o.level=r,l.push(o)}var h=[l[0]];for(let t=1;t<l.length;t++)l[t].isLift?h.push(l[t]):1==t&&l[0].distance<=this.lu?(l[0].distance+=l[t].distance,l[0].relDesc=l[t].relDesc,l[0].relAngle=l[t].relAngle,l[0].absField=l[t].absField,l[0].absDesc=l[t].absDesc):(0===l[t].distance&&(h[h.length-1].distance+=l[t].distance),0===l[t].distance||l[t].distance<=this.lu&&(l[t].relAngle<=this.su||360-l[t].relAngle<=this.su)&&!l[t].eo||(l[t].relAngle<=this.su||360-l[t].relAngle<=this.su)&&!l[t].eo?h[h.length-1].distance+=l[t].distance:h.push(l[t]));return h},ku(e,t){let i=[],r=0;if(t.forEach(t=>{(t.eo||t.Jt.eo)&&i.push(r),r++}),0!=i.length)for(;0!=i.length;){for(let t=0;t<e.length-1;t++)if(e[t].index<=i[0]&&e[t+1].index>=i[0]){e[t+1].eo=!0;break}i.splice(0,1)}},Eu(t){let e="";t=this.gr(t);return e=null==t||""+(e=this.ou==n.ZH?t.desc:t.gname.toUpperCase())!="null"&&""+e!=""&&""+e!="undefined"?e:t.gname.toUpperCase()},Mu(i,e,r,n,s,l){var t=i[e],o=i[e+1];let h=null,a=this.wu(this.uu[o.relField]);if(this.du=e==i.length-3&&o.distance<this.fu,!a||this.du)if(n){if(this.du=!1,!a){h=this.Nu(i[e+1].point,s);s=this.xu(h);let t=null;var u=this.Eu(n);a=this.se==w.Drive?(t=r<n?this.wu("drive_up"):this.wu("drive_down"),this.wu("along")+s+" "+t+" "+u):(t=r<n?this.wu("up_to"):this.wu("down_to"),this.wu("take")+s+" "+t+" "+u)}}else if(this.du&&(this.pu=o.distance),!l&&(a=this.wu("arrived"),this.se==w.Drive)){r=new j(i[i.length-2].point.x,0,i[i.length-2].point.y),s=new j(i[i.length-1].point.x,0,i[i.length-1].point.y),u=new j(this.vu.x,0,this.vu.y),l=s.clone().sub(r),s=u.clone().sub(r);let t=!1;u=D.Ot(i[i.length-2].point,i[i.length-1].point,this.vu),r=(u&&1<D.K(u,i[i.length-1].point)+D.K(u,i[i.length-2].point)-l.length()&&(t=!0),s.angleTo(l)*D.S()),u=s.clone().cross(l).y;let e=null;r<1&&t?e="front_pure":0<u?e=t?"left_front_pure":"left_pure":u<0&&(e=t?"right_front_pure":"right_pure"),this.bu=this.wu(e)}let f=null;return f=0==e?2==i.length?this.wu("face_to")+" "+t.absDesc+" "+this.wu("straight")+" "+Math.ceil(t.distance)+" "+this.wu("meter")+" "+a:this.wu("face_to")+" "+t.absDesc+" "+this.wu("straight")+" "+Math.ceil(t.distance)+" "+this.wu("meter")+" "+this.wu(this.uu[i[e+1].relField]):this.wu("straight")+" "+Math.ceil(t.distance+(this.du&&!n?o.distance:0))+" "+this.wu("meter")+" "+a,("arrived"==a||a==this.wu("arrived")&&this.se==w.Drive&&this.bu)&&(f=f+", "+this.wu("finish")+" "+this.bu,"zh"==this.ou)&&(f+=""),[f=o.eo?(f+=" ")+this.wu("pass"):f,h]},Tu(t,e,i,r,n){var s=t[e],l=t[e+1];return this.wu(this.uu[t[e+1].relField])&&!this.du||(r?(t=i<r?this.wu("up"):this.wu("down"),l.relDesc=t):l.relDesc=n?this.wu("front_pure"):this.wu("dest")),{startPoint:s.point,startLevel:s.level,startIndex:s.index,endPoint:l.point,endLevel:l.level,endIndex:l.index,startDirection:s.absDesc,endDirection:l.relDesc,distance:s.distance+(this.du&&!r?l.distance:0)}},Nu(e,i){let r=Number.MAX_SAFE_INTEGER,n=-1;for(let t=0;t<i.length;t++){var s;i[t]&&(s=Math.pow(i[t].Jt.x-e.x,2)+Math.pow(i[t].Jt.y-e.y,2))<r&&0!==i[t].rn&&(r=s,n=i[t].rn)}return n},Au(t){var i,e=t.Ru,r=t.Iu,n=t.result,s=[],l=[],o=[];let h=null;let a=0;var u=[];let f=!(this.cu=[]),c=null,d=null;var t=t.buildingName||this.wu("outdoor"),p=this.yu(n);for(let e=0;e<n.length;e++){if(i=(y=n[e]).level,h=null,e<n.length-1)for(let t=e;t<n.length;t++)if(n[t].level!=i){h=n[t].level;break}var v,b=this.ju(v=y.pointList,y.Ur,i);if(this.ku(b,y.Ur),1<b.length&&(this.cu=this.cu.concat(b)),1==b.length){if(h||f){if(f)l.length&&(e==n.length-1&&(r?(s[s.length-1]+=" "+this.wu("arrived"),l[l.length-1].endDirection=this.wu("dest")):l[l.length-1].endDirection=this.wu("front_pure")),l[l.length-1].endPoint=v[0],l[l.length-1].endLevel=i);else if(c==i||null==c){let t=null;var y=this.Eu(h);d=this.se===w.Drive?(t=h>i?this.wu("drive_up"):this.wu("drive_down"),this.wu("along_ramp")+" "+t+" "+y):(t=h>i?this.wu("up_to"):this.wu("down_to"),this.wu("take_stair")+" "+t+" "+y),s.push(d),l.push({startPoint:v[0],startDirection:h>i?this.wu("up"):this.wu("down"),startLevel:i})}f=!f}}else{c=i;for(let t=0;t<b.length-1&&!this.du;t++){var g=this.Mu(b,t,i,h,p,r),m=g[0],g=g[1];g&&o.push(g),s.push(m),l.push(this.Tu(b,t,i,h,r))}}1<b.length&&(y=b.reduce(function(t,e){return t+(e.distance||0)},0),u.push({level:i,distance:y}),a+=y)}return e&&0<s.length&&(s[0]=this.wu("enter")+" "+t+" "+s[0]),r&&0<s.length&&(t===this.wu("outdoor")?s[s.length-1]=s[s.length-1]+this.wu("reach")+" "+r+" "+this.wu("entrance"):s[s.length-1]=s[s.length-1]+this.wu("reach")+" "+t+" "+this.wu("exit")),[s,l,a,u,this.pu,o]}});class kn{constructor(t){this.Lu=t.gate,this.Su=t.bidToOutline,this.Fu=t.bidToOutlineAccess,this.Pu={},this.Gu={},this.Du=-1,this.Vu=-1,this.Bu=[],this.Zu=[],this.Cu=new Map,this.Wu=new Map,this.Uu=[],this.qu=new Map,this.Yu=[],this.Xu=new Map,this.zu=new Map,this.Hu=new Map,this.cn=null,this.dn=null,this.Qu=null,this.Ku=null,this.se=t.type,this.Ju=t.barrierFree,this.$u=!1,this.tf=null,this.ef=10,this.if=2,this.rf()}}Object.assign(kn.prototype,{rf(){this.Lu&&(this.nf(),this.sf(),this.lf(this.Bu,this.zu),this.lf(this.Zu,this.Hu))},nf(){for(let i=0;i<this.Lu.length;i++){let t=null,e=null;t=null==this.se||0===this.se?(e=this.Lu[i].accessible,this.Lu[i].navi):this.Lu[i].drive;var r=""==this.Lu[i].bid?null:this.Lu[i].bid,n=this.Lu[i].gid,s=this.hf(t,n,r),n=this.hf(e,n,r);this.Uu.push(...s),this.Yu.push(...n),null==this.Pu[r]&&(this.Pu[r]=[]),this.Pu[r].push(...s),null==this.Gu[r]&&(this.Gu[r]=[]),this.Gu[r].push(...n)}for(let t=0;t<this.Uu.length;t++)this.Uu[t].Ni=t,this.qu.set(t,this.Uu[t]);for(let t=0;t<this.Yu.length;t++)this.Yu[t].Ni=t,this.Xu.set(t,this.Yu[t])},hf(e,i,r){if(null==e)return[];var n=[];for(let t=0;t<e.length;t++){var s=e[t];s.level=i,s.bid=r,n.push(s)}return n},sf(){this.Bu=this.af(this.qu);this.Zu=this.af(this.Xu,!0);for(let t=0;t<this.Bu.length;t++)this.Bu[t].Ni=t,this.Cu.set(t,this.Bu[t]);for(let t=0;t<this.Zu.length;t++)this.Zu[t].Ni=t,this.Wu.set(t,this.Zu[t])},af(i,r){var n=[],s=Array.from(i.keys());for(let e=0;e<s.length;e++)for(let t=e+1;t<s.length;t++){var l,o=s[e],h=s[t],a=i.get(o),u=i.get(h);i.get(o).flag==i.get(h).flag&&(l=this.uf(a,u),n.push(l)),i.get(o).bid==i.get(h).bid&&this.ff(a,u,r)&&(l=this.uf(a,u),n.push(l))}return n},uf(t,e){let i=0;var r,n,s,l={};return l.startPoint=t.Ni,l.endPoint=e.Ni,l.Ni=null,t.bid==e.bid?(r={x:t.pts[0],y:t.pts[1]},n={x:e.pts[0],y:e.pts[1]},s=Math.abs(t.level-e.level)*this.ef,0<=t.Ni&&0<=e.Ni?this.if=4:this.if=2,i=0!=s||t.extentID!==e.extentID?(D.distance(r,n)+s)*this.if:D.distance(r,n)+s,l.dist=Number(i.toFixed(5))):l.dist=i,l},ff(t,e,i){var r=t.bid;let n=null;var s=this.cf(t),l=this.cf(e);return(t.extentID=s)==(e.extentID=l)||(n=(i?this.Fu:this.Su).get(r)).ol(s,l)===G.ROUTE_SUCCESS},cf(e){var i=this.Su.get(e.bid).qs?.Un;for(let t=0;t<i.length;t++){var r=i[t].il,n=i[t].Zr;if(e.level===n){n={x:e.pts[0],y:e.pts[1]};if(r.Sn(n))return r.vn}}return 0},df(t){this.cn=this.Du;var e,i=t.buildingID||null,r=[],n={type:null,pts:[t.x,t.y],bid:i,level:t.level,Ni:this.cn};let s=[];if(null==(s=(this.Ju?this.Gu:this.Pu)[i])||0==s.length)return!1;for(let t=0;t<s.length;t++)this.ff(n,s[t])&&(e=this.uf(n,s[t]))&&(e.Ni=this.Vu,r.push(e),(this.Ju?(this.Zu.push(e),this.Wu):(this.Bu.push(e),this.Cu)).set(this.Vu,e),--this.Vu);return this.Ju?(this.Yu.push(n),this.Xu.set(this.cn,n),this.lf(r,this.Hu)):(this.Uu.push(n),this.qu.set(this.cn,n),this.lf(r,this.zu)),--this.Du,!0},pf(t){this.dn=this.Du;var e,i=t.buildingID||null,r=[],n={type:null,pts:[t.x,t.y],bid:i,level:t.level,Ni:this.dn};let s=[];if(null==(s=(this.Ju?this.Gu:this.Pu)[i])||0==s.length)return!1;this.Uu.push(n),this.qu.set(this.dn,n);for(let t=0;t<s.length;t++)this.ff(n,s[t])&&(e=this.uf(n,s[t]))&&(e.Ni=this.Vu,r.push(e),(this.Ju?(this.Zu.push(e),this.Wu):(this.Bu.push(e),this.Cu)).set(this.Vu,e),--this.Vu);return this.Ju?(this.Yu.push(n),this.Xu.set(this.dn,n),this.lf(r,this.Hu)):(this.Uu.push(n),this.qu.set(this.dn,n),this.lf(r,this.zu)),--this.Du,!0},lf(e,i){for(let t=0;t<e.length;t++){var r=e[t],n=r.startPoint,s=r.endPoint;i.has(n)||i.set(n,new Map),i.get(n).set(s,r.dist),i.has(s)||i.set(s,new Map),i.get(s).set(n,r.dist)}return i},vf(t,e,i){var r=null,n=null;if(this.Ju){if(!this.Hu.has(t))return!1;for(var s=0;s<e.length;s++)if(!this.Hu.has(e[s]))return!1;r=this.Xu,n=this.Hu}else{if(!this.zu.has(t))return!1;for(var l=0;l<e.length;l++)if(!this.zu.has(e[l]))return!1;r=this.qu,n=this.zu}this.fl(e,t);var o,h=e.length,a=0;for(o of r.keys())if(o==t?r.get(o).Kr=0:r.get(o).Kr=Number.MAX_VALUE,r.get(o).Jr=!1,r.get(o).$r=[],i instanceof Array)for(var u=0;u<i.length;u++){if(o!=i[u]&&r.get(o).flag===r.get(i[u]).flag){-1==i.indexOf(o)&&i.push(o);break}if(i.length>=r.size)return!1}var f=[];for(f.push(t);0<f.length;){var c=f[0],d=(f.splice(0,1),r.get(c));if(!d.Jr){d.Jr=!0;var p=e.indexOf(c);if(-1!=p&&++a==h)return!0;var v=n.get(c);if(v){for(var b of v.keys()){var y=d.Kr+v.get(b),g=r.get(b);i instanceof Array&&i.includes(b)||g.Jr||g.Kr>y&&(g.Kr=y,g.$r=[],g.$r.push(c),f.push(b))}f.sort(function(t,e){return r.get(t).Kr-r.get(e).Kr})}}}return!(a<h)},fl(t,e){let i=t.indexOf(e);for(;-1!=i;)t.splice(i,1),i=t.indexOf(e)},rl(){if(this.Ju){if(!this.Hu.has(this.cn))return G.ROUTE_FAILED_CANNOT_CALCULATE;if(!this.Hu.has(this.dn))return G.ROUTE_FAILED_CANNOT_CALCULATE}else{if(!this.zu.has(this.cn))return G.ROUTE_FAILED_CANNOT_CALCULATE;if(!this.zu.has(this.dn))return G.ROUTE_FAILED_CANNOT_CALCULATE}var t=[],t=(t.push(this.dn),this.vf(this.cn,t));return t?G.ROUTE_SUCCESS:G.ROUTE_FAILED_CANNOT_ARRIVE},hl(){var e=[],t=[];t.push(this.dn),this.al(t,e);for(let t=0;t<e.length;t++)e[t].paths.reverse();return e},al(e,i){for(let t=0;t<e.length;t++){var r={paths:[],distance:0};r.paths.push(e[t]),this.dl(e[t],r),i.push(r)}},dl(t,e){let i=null,r=null;if(this.Ju){if(0==this.Xu.get(t).$r.length)return;i=this.Xu.get(t).$r[0],r=this.Xu.get(t).Kr}else{if(0==this.qu.get(t).$r.length)return;i=this.qu.get(t).$r[0],r=this.qu.get(t).Kr}null!=i&&(e.paths.push(i),e.distance+=r),this.dl(i,e)},bf(i){var r,t=new Map;for(r of i.keys()){var n=D._t(i.get(r));n.bid=r;let e=0;for(let t=0;t<i.get(r).length;t++)e+=i.get(r)[t].level;e=Math.floor(e/i.get(r).length),n.level=e,t.set(r,n)}return t},yf(t){let e=null,i=null;var r,n=[];for(r of t.keys()){var s=this.gf(t.get(r));if(!s)return null;s.bid==this.Qu?e=s:s.bid==this.Ku?i=s:n.push(s)}return null!=e&&n.unshift(e),null!=i&&n.push(i),n},gf(t){var e,i=t.bid||null,r=[],n={type:null,pts:[t.x,t.y],bid:t.bid,level:t.level,Ni:this.Du};let s=[];if(!(s=(this.Ju?this.Gu:this.Pu)[i])||0==s.length)return null;for(let t=0;t<s.length;t++)this.ff(n,s[t])&&(e=this.uf(n,s[t]))&&(e.Ni=this.Vu,r.push(e),(this.Ju?(this.Zu.push(e),this.Wu):(this.Bu.push(e),this.Cu)).set(this.Vu,e),--this.Vu);return this.Ju?(this.Yu.push(n),this.Xu.set(this.Du,n),this.lf(r,this.Hu)):(this.Uu.push(n),this.qu.set(this.Du,n),this.lf(r,this.zu)),--this.Du,n},mf(){if(!this.Lu||0===this.Lu.length)return null;let t=null;if(this.$u){var r=this.bf(this.tf),n=this.yf(r);if(!n||0===n.length)return null;var s=[];let e=null,i=null;for(let t=0;t<n.length;t++)n[t].bid!==this.Qu&&n[t].bid!==this.Ku?s.push(n[t].Ni):(null===e&&n[t].bid===this.Qu&&(e=n[t].Ni),null===i&&n[t].bid===this.Ku&&(i=n[t].Ni));var r=[e],l=[];this._f(e,s,r,l),this._f(r[r.length-1],[i],r,l),t=this.wf(l)}return t},wf(r){var n=[];let s=-1,l=[];for(let i=0;i<r.length;i++){var o=r[i].paths;let e=null;var h;for(let t=0;t<o.length;t++)0<=o[t]&&(h=o[t],e=this.qu.get(h),-1==s&&(s=e.bid),e.bid==s?l.push(e):(n.push({bid:s,entrances:l}),l=[e]),s=e.bid),i==r.length-1&&t==o.length-1&&e&&n.push({bid:e.bid,entrances:l})}return n},_f(s,l,t,o){if(0!=l.length){let e=null,i=Number.MAX_VALUE,r=null,n=0;for(let t=0;t<l.length;t++){var h;this.vf(s,[l[t]])&&(h={paths:[],distance:0},this.dl(l[t],h),h.distance<i)&&(i=h.distance,e=l[t],r=h,n=t)}e&&(t.push(e),r.paths.reverse(),o.push(r),l.splice(n,1),this._f(e,l,t,o))}},hr(){this.Uu=this.Uu.filter(function(t){return 0<=t.Ni}),this.Yu=this.Yu.filter(function(t){return 0<=t.Ni}),this.Bu=this.Bu.filter(function(t){return 0<=t.Ni}),this.Zu=this.Zu.filter(function(t){return 0<=t.Ni});for(var t of this.qu.keys())t<0&&this.qu.delete(t);for(var e of this.Xu.keys())e<0&&this.Xu.delete(e);for(var i of this.Cu.keys())i<0&&this.Cu.delete(i);for(var r of this.Wu.keys())r<0&&this.Wu.delete(r);for(var n of this.zu.keys())if(n<0)this.zu.delete(n);else for(var s of this.zu.get(n).keys())s<0&&this.zu.get(n).delete(s);for(var l of this.Hu.keys())if(l<0)this.Hu.delete(l);else for(var o of this.Hu.get(l).keys())o<0&&this.Hu.get(l).delete(o);this.Du=-1,this.Vu=-1}});class En{constructor(){this.fe=null,this.Rt=null,this.It=null,this.Qs=null,this.Oh=null,this.se=null,this.jh=new Map,this.xf=new Map,this.Ri=G.ROUTE_FAILED_CANNOT_ARRIVE,this.Of=[],this.jf=null,this.kf=[],this.Hh=null,this.Kh=[],this.Qh=!1,this.barrierFree=!1,this.sa=[],this.Ef=null,this.turnCost=0}}Object.assign(En.prototype,{Ar(t){this.fe=t,this.se=t.type,this.Ef=t.bid||null;var e,i=new Map;for(e of this.xf.keys())i.set(e,this.xf.get(e).Eh);var r,n=new Map;for(r of this.xf.keys())n.set(r,this.xf.get(r).Mh);t={gate:this.fe.gate,bidToOutline:i,bidToOutlineAccess:n,type:this.se,barrierFree:this.barrierFree};this.Mf=new kn(t)},da(t,e,i,r){this.hr(),t.buildingID=void 0!==t.buildingID?t.buildingID:this.Ef,e.buildingID=void 0!==e.buildingID?e.buildingID:this.Ef,this.Rt=t,this.It=e,this.Qs=i,this.Oh=r;let n;var s=[];if(this.Rt.buildingID==this.It.buildingID){i={pts:[t.x,t.y],bid:t.buildingID||null,level:t.level},r={pts:[e.x,e.y],bid:e.buildingID||null,level:e.level};if(n=[[i,r]],this.Ri=this.Nf(n),this.Ri==G.ROUTE_SUCCESS||this.Ri==G.ROUTE_FAILED_NO_START_ARRIVAL||this.Ri==G.ROUTE_FAILED_NO_DEST_ARRIVAL)return this.Ri;if(null==this.Mf)return this.Ri}if(0==(n=this.Tf(t,e)).length)this.Ri=G.ROUTE_FAILED_ENTRANCE;else{for(let t=0;t<n.length;t++)s.push(n[t][0].bid);i=this.Nf(n);this.Ri=i}return this.Ri},hr(){this.Ri=G.ROUTE_FAILED_CANNOT_ARRIVE,this.Of=[],this.jf=null,this.kf=[]},Tf(t,e){var i=[];if(this.Af(t,e)===G.ROUTE_SUCCESS){var r=this.Rf()[0];let e=[];for(let t=0;t<r.length-1;t++){var n=r[t],s=r[t+1];0===e.length&&e.push(n),n.bid===s.bid?(e.push(s),t==r.length-2&&i.push(e)):(i.push(e),e=[])}}for(let t=0;t<i.length;t++)2<i[t].length&&(i[t]=[i[t][0],i[t][i[t].length-1]]);return i},Nf(i){var r=new Map;let n=new Map;this.Mf?.Pu&&(n=this.Mf.Pu);for(let e=0;e<i.length;){if(i[e].length<=1)return G.ROUTE_FAILED_CANNOT_ARRIVE;for(let t=0;t<i[e].length-1;t++){var s=i[e][t].Ni,l=i[e][t+1].Ni,o=i[e][t].bid,h=this.If(i[e][t],i[e][t+1],o);if(h===G.ROUTE_SUCCESS){var a=this.Lf(o);if(this.kf.push({bid:o,result:a}),t===i[e].length-2){e+=1;break}}else{a=n[o];if(1==i.length)return h;if(e==i.length-1||h===G.ROUTE_FAILED_NO_START_ARRIVAL){var u=i[e-1][t].Ni,f=l,c=(r[o]=r[o]||[],r[o].push(s),r[o]);if(c.length===a.length)return h;u=this.Sf(u,[f],c);if(u.length<=1)return h;i.splice(e,1),i.splice(e-1,1),i.splice(e-1,0,...u),e-=1,this.kf.pop();break}f=s,c=i[e+1][t+1].Ni,u=(r[o]=r[o]||[],r[o].push(l),r[o]);if(u.length===a.length)return h;var d=this.Sf(f,[c],u);if(!(1<d.length)){if(r[o].pop(),e<1)return h;var p=i[e-1][t].Ni,s=(r[o]=r[o]||[],r[o].push(s),r[o]);if(s.length===a.length)return h;o=this.Sf(p,[l],s);if(o.length<=1)return h;i.splice(e,1),i.splice(e-1,1),i.splice(e-1,0,...o),e-=1,this.kf.pop();break}i.splice(e+1,1),i.splice(e,1),i.splice(e,0,...d)}}}return G.ROUTE_SUCCESS},Sf(t,e,i){var r=[],n=[];let s=[];var l=[];if(this.Mf.vf(t,e,i)){this.Mf.al(e,r);for(let t=0;t<r.length;t++)r[t].paths.reverse();for(let e=0;e<r.length;e++){var o=[];for(let t=0;t<r[e].paths.length;t++)this.barrierFree?o.push(this.Mf.Xu.get(r[e].paths[t])):o.push(this.Mf.qu.get(r[e].paths[t]));n.push(o)}var h=n[0];for(let t=0;t<h.length-1;t++){var a=h[t],u=h[t+1];0===s.length&&s.push(a),a.bid===u.bid?(s.push(u),t==h.length-2&&l.push(s)):(l.push(s),s=[])}}return l},If(t,e,i){var r={},n=(void 0!==t.pts?(r.x=t.pts[0],r.y=t.pts[1]):(r.x=t.x,r.y=t.y),r.level=t.level,{}),i=(void 0!==e.pts?(n.x=e.pts[0],n.y=e.pts[1]):(n.x=e.x,n.y=e.y),n.level=e.level,this.xf.get(i=void 0===i?null:i));let s;if(t&&t.constructor&&"NaviRelationship"===t.constructor.name){t=i.Ta(r);if(t&&t.road&&t.road.roadEntry===V.NaviRoadEntry_FORBID)return s=G.ROUTE_FAILED_NO_START_ARRIVAL}if(e&&e.constructor&&"NaviRelationship"===e.constructor.name){t=i.Ta(n);if(t&&t.road&&t.road.roadEntry===V.NaviRoadEntry_FORBID)return s=G.ROUTE_FAILED_NO_DEST_ARRIVAL}return i.barrierFree=this.barrierFree,i.Qh=this.toDoors,i.tl=this.turnCost,s=i.da(r,n,this.Qs,this.Oh)},Ff(){return this.kf},Pf(e){var i=[];for(let t=0;t<e.length;t++){var r=this.Lf(e[t]);i.push({bid:e[t],result:r})}return i},Lf(t){var t=this.xf.get(t=void 0===t?null:t),e=t.Oa();return this.Hh=t.Hh,e},Af(t,e){var i=G.ROUTE_FAILED_CANNOT_ARRIVE;return this.Mf.hr(),this.Mf.Ju=this.barrierFree,i=this.Mf.df(t)&&this.Mf.pf(e)?this.Mf.rl():i},Rf(){var i=this.Mf.hl(),t=[];for(let e=0;e<i.length;e++){var r=[];for(let t=0;t<i[e].paths.length;t++)this.barrierFree?r.push(this.Mf.Xu.get(i[e].paths[t])):r.push(this.Mf.qu.get(i[e].paths[t]));t.push(r)}return t},Ma(t,e){var i=void 0!==t.buildingID?t.buildingID:this.Ef,i=this.xf.get(i).Ma(t,e);return i&&void 0!==t.buildingID&&(i.coords.buildingID=t.buildingID),i},wo(i){var r=new Map;if(void 0!==i&&0===i.length)for(var t of this.xf.keys())this.xf.get(t).wo([]);else{for(let e=0;e<i.length;e++){var n=i[e];let t=r.get(n.Ef);t||(t=[],r.set(n.Ef,t)),t.push(n)}for(var e of r.keys())this.xf.get(e).wo(i)}},vo(){for(var t in this.Kh){var e=parseInt(t),e=this.xf.get(e),t=(e.Kh=this.Kh[t],e.vo(),e.Oa());this.kf.push(...t)}},ha(e,i,r,t){let n=null,s=(this.Rt=e,this.It=i,this.Qs=r,this.Oh=t,!1);for(let t=0;t<this.sa.length;t++)this.sa[t].eo=!0,this.sa[t].order?s=!0:s&&(this.sa[t].order=Number.MAX_VALUE);s&&this.sa.sort(function(t,e){return t.order-e.order}),this.sa.unshift(e),this.sa.push(i);for(let t=0;t<this.sa.length;t++)this.sa[t].buildingID=void 0!==this.sa[t].buildingID?this.sa[t].buildingID:this.Ef;if(s)n=this.Gf(this.sa);else{r=this.Df(this.sa);let t=null;this.Mf&&(this.Mf.tf=r,this.Mf.$u=!0,this.Mf.Qu=e.buildingID,this.Mf.Ku=i.buildingID,t=this.Mf.mf()),n=this.Vf(e,i,t,this.sa)}return n},Df(e){var i=new Map;for(let t=0;t<e.length;t++){var r=e[t].buildingID||null;i.has(r)||i.set(r,[]),i.get(r).push(e[t])}return i},Vf(e,i,r,t){var n=[];let s=null,l;if(t.shift(),t.pop(),r){var o=this.Df(t);for(let t=0;t<r.length;t++){var h,a,u,f,c,d=r[t].bid;if(0==t?(a={x:r[t].entrances[0].pts[0],y:r[t].entrances[0].pts[1],level:r[t].entrances[0].level},o.has(d)?(h=o.get(d),s=this.Bf(e,a,d,h),o.delete(d)):s=this.If(e,a,d)):t==r.length-1?(h={x:r[t].entrances[0].pts[0],y:r[t].entrances[0].pts[1],level:r[t].entrances[0].level},o.has(d)?(a=o.get(d),s=this.Bf(h,i,d,a),o.delete(d)):s=this.If(h,i,d)):(u={x:r[t].entrances[0].pts[0],y:r[t].entrances[0].pts[1],level:r[t].entrances[0].level},f={x:r[t].entrances[1].pts[0],y:r[t].entrances[1].pts[1],level:r[t].entrances[1].level},o.has(d)?(c=o.get(d),s=this.Bf(u,f,d,c),o.delete(d)):s=this.If(u,f,d)),s!==G.ROUTE_SUCCESS)break;l=this.Lf(d),n.push({bid:d,result:l})}}else{var p=e.buildingID||null;s=this.Bf(e,i,p,t),l=this.Lf(p),n.push({bid:p,result:l})}return this.kf=n,this.Ri=s},Gf(i){var r=[];let n=null,s,l=null;for(let t=0;t<i.length-1;t++)if(i[t].buildingID==i[t+1].buildingID){var o,h,e=i[t].buildingID;if((n=this.toDoors&&0<t?(o=(l=s).result[l.result.length-1].Wr,(h=i[t]).x=o[o.length-1].x,h.y=o[o.length-1].y,this.If(h,i[t+1],e)):this.If(i[t],i[t+1],e))!=G.ROUTE_SUCCESS)return n;if(s={bid:e,result:this.Lf(e)},0<r.length){if(s.bid===r[r.length-1].bid){var a=r[r.length-1].result.length,u=r[r.length-1].result[a-1];let e=!0;for(let t=0;t<s.result.length;t++)u.Zr==s.result[t].Zr&&1<s.result[t].Ur.length&&e?(r[r.length-1].result[a-1].Cr+=s.result[t].Cr,s.result[t].Ur.shift(),s.result[t].Wr.shift(),r[r.length-1].result[a-1].Ur.push(...s.result[t].Ur),r[r.length-1].result[a-1].Wr.push(...s.result[t].Wr)):(e=e&&!1,r[r.length-1].result.push(s.result[t]))}}else r.push(s)}else{let e=null;if(e=this.toDoors&&0<t?(o=(l=s[s.length-1]).result[l.result.length-1].Wr,(h=i[t]).x=o[o.length-1].x,h.y=o[o.length-1].y,this.Tf(h,this.sa[t+1])):this.Tf(this.sa[t],this.sa[t+1]),(n=this.Nf(e))!=G.ROUTE_SUCCESS)return n;var f=[];for(let t=0;t<e.length;t++)f.push(e[t][0].bid);s=this.Pf(f),r.push(...s)}return this.kf=r,this.Ri=n},Bf(t,e,i,r){i=this.xf.get(i),i.sa=r,i.barrierFree=this.barrierFree,i.Qh=this.toDoors,i.Qs=this.Qs,i.Oh=this.Oh,r=i.ha(t,e);return i.sa=null,r},pe(){this.fe=null,this.kf=null,this.Of=null,this.jf=null;for(var t of this.xf.keys())this.xf.get(t).pe()}});class Mn{constructor(t,e,i){this.fe=Object.assign({tile:!0,isPreview:!1},t),this.Zf=new Map,this.Cf=null,this.Wf=[],this.Uf=[],this.qf=[],this.isExistAccess=!0,this.isExistNavi=!0,this.isExistDrive=!0,this.load_cnt=0,this.Mf=null,this.Yf=void 0!==t.mapID?t.mapID:null,this.Xf=null,this.Or=!!t.map,this.jr=t.map?t.map.getDataManager():new tn,this.zf=1,this.Hf={radius:.5,dash:{size:4,gap:2}},this.Mr=e,this.Nr=i,this.se=t.type,this.Qf=new Map,this.Kf=new Map,this.Tr=hn.generateUUID(),this.Jf=null,this.Ar()}setObstructions(t){this._navi&&this._navi.wo(t)}route(t,r,e){this.Cf.toDoors=void 0!==t.toDoors&&t.toDoors,this.Cf.obstruct=void 0===t.obstruct||t.obstruct,this.Cf.barrierFree=void 0!==t.barrierFree&&t.barrierFree,this.Cf.turnCost=void 0!==t.turnCost?t.turnCost:0;let i=G.ROUTE_FAILED_CANNOT_ARRIVE;if((i=t.viapoints&&0<t.viapoints.length?(this.Cf.sa=t.viapoints,this.Cf.ha(t.start,t.dest,t.mode||f.MODULE_SHORTEST,t.priority||v.PRIORITY_DEFAULT)):this.Cf.da(t.start,t.dest,t.mode||f.MODULE_SHORTEST,t.priority||v.PRIORITY_DEFAULT))===G.ROUTE_SUCCESS){this.Wf=this.Cf.Ff();let e=null,i=null;this.Uf=[];for(let t=0;t<this.Wf.length;t++)0<t&&(e=this.fe.bidToName.get(this.Wf[t-1].bid)?this.fe.bidToName.get(this.Wf[t-1].bid):"outdoor"),t<this.Wf.length-1&&(i=this.fe.bidToName.get(this.Wf[t+1].bid)?this.fe.bidToName.get(this.Wf[t+1].bid):"outdoor"),this.Wf[t].Ru=e,this.Wf[t].Iu=i,e=null,i=null,this.Wf[t].buildingName=this.fe.bidToName.get(this.Wf[t].bid),this.Uf.push([this.$f(this.Wf[t],{language:n.ZH}),this.$f(this.Wf[t],{language:n.EN})]);this.Xf=this.Cf.Hh,r&&r(this.Vr())}else e&&e(i)}dispose(){this.tc=null,this.Wf=[],this.Uf=[],this.Cf&&(this.Cf.pe(),this.Cf=null)}setObstructions(t){this.Cf&&this.Cf.wo(t)}pathConstraint(t,e){return this.Cf?this.Cf.Ma(t,e):null}getNaviGraph(t){var e=t.buildingID,t=t.level;return null!=e?null!=t?this.Cf.jh.get(e).get(t):this.Cf.jh.get(e):null!=t?this.Cf.jh.get(null).get(t):[...this.Cf.jh.values()]}query(t,i,r,e){let n;var s=[];let l=null;if(l=r?this.Cf.xf.get(r):this.Cf.xf.get(null),n=e?l.kh:l.jh){if(null==t)for(var o of n.keys())s.push({level:o,roadRanks:i,roadVector:n.get(o).qn.slice(0)});else if(null==i)s.push({level:t,roadRanks:i,roadVector:n.get(t).qn.slice(0)});else{var h=[],a=n.get(t).qn;for(let e=0;e<i.length;e++)for(let t=0;t<a.length;t++)a[t].gn===i[e]&&h.push(a[t]);s.push({level:t,roadRanks:i,roadVector:h})}for(let e=0;e<s.length;e++)for(let t=0;t<s[e].roadVector.length;t++)s[e].roadVector[t]=Object.assign({},this.ec(s[e].roadVector[t])),r&&(s[e].roadVector[t].buildingID=r)}return s}intersectionRoadsByCircle(i,r,t){if(!t||!t.roadVector||t.roadVector.length<=0)return null;var e=null==t.roadVector[0].buildingID?null:t.roadVector[0].buildingID,n={center:i,radius:r,points:[]};let s=i.x-r,l=i.x+r,o=i.y-r,h=i.y+r;var a,u=[],f=new Map;for(a of t.roadVector){var c=D.wt(i,r,a.startPoint,a.endPoint);if(!(c.length<1)){let t=a.roadEntry,e=a.endId;if(D.distance(a.endPoint,i)>r&&((t=t===V.Entry_FORWARD?un.Entry_BACK:t)===V.Entry_BACK&&(t=un.Entry_FORWARD),e=a.startId),t===un.Entry_FORWARD||t===un.Entry_BOTH){for(var d of c)d.direction=t,d.ic=e;n.points.push(...c),a.startPoint.x>=s&&a.startPoint.x<=l&&a.startPoint.y>=o&&a.startPoint.y<=h&&u.push(a.startId),a.endPoint.x>=s&&a.endPoint.x<=l&&a.endPoint.y>=o&&a.endPoint.y<=h&&u.push(a.endId)}}}var p,v,t=t.level,b=(this.Cf.xf?.get(e)).jh.get(t).Kn;for(p of u)f.set(p,b.get(p));for(v of n.points)v.branch=this.rc(f,v.ic,i.nodeID);return n}queryNode(e){let t,i;if(null!=(i=e.buildingID?this.Cf.xf.get(e.buildingID):this.Cf.xf.get(null))){var r=(t=(e.barrierFree?i.kh:i.jh).get(e.level)).ss(e.point);if(!(r<=0)){var n=t.qn,s=new Set;for(let t=0;t<n.length;t++)if(r===n[t].vn){if(!s.has(n[t].cn)&&D.xt(e.point,n[t].Rt))return e.nodeID=n[t].cn,e;if(!s.has(n[t].dn)&&D.xt(e.point,n[t].It))return e.nodeID=n[t].dn,e;s.add(n[t].cn),s.add(n[t].dn)}}}return null}constraintTrack(e){var i=[];if(!(null==e||e.length<=0)){var r=new Map;for(let t=0;t<e.length;t++){var n=void 0===e[t].coords.buildingID?null:e[t].coords.buildingID;r.has(n)?r.get(n).push(e[t]):r.set(n,[e[t]])}if(!(r.size<=0)){for(var t of r.keys()){var s=r.get(t),l=new Set,o=new Set;for(let t=0;t<s.length;t++)l.add(s[t].coords.level),o.add(s[t].road.roadRank);if(l.size<=0)return i;var h=Array.from(l),a=Array.from(o);this.nc(h,a,t)}var u=e.length-1;for(let t=0;t<u;t++){var f=this.sc(e[t],e[t+1]);i.push(e[t].coords),i.push(...f),t+1==u&&i.push(e[t+1].coords)}}}return i}}Object.assign(Mn.prototype,{Ar(){this.Or&&(t=this.fe.map.getMapOptions(),this.fe.mapID=t.mapID,this.fe.appName=t.appName,this.fe.key=t.key,this.fe.license=t.license,this.fe.mapURL=t.mapURL,this.fe.mapURLAbsolute=t.mapURLAbsolute,this.fe.navigationData=t.navigationData,this.fe.buildingOptions=t.buildingOptions,this.fe.type=this.se);var t={buildingID:this.fe.mapID,appName:this.fe.appName,key:this.fe.key,license:this.fe.license,mapURL:this.fe.mapURL,mapURLAbsolute:this.fe.mapURLAbsolute,buildingOptions:this.fe.buildingOptions,navigationData:this.fe.navigationData,merge:this.fe.merge,loadNavi:!0,justDecode:!0,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj&&!!KjWzhWlSj.ProtoDef,tile:this.fe.tile,type:this.fe.type,bid:this.fe.buildingID||null,gate:null,isOutdoor:!0,uuid:this.Tr};this.Yf||(this.Yf=this.fe.mapID),this.Zf.set(t.bid,t),this.fe.bidToMid=new Map,this.fe.bidToName=new Map,this.fe.bidToMid.set(t.bid,this.Yf),this.Cf=new En,this.Sr(t)},Sr(i){setTimeout(()=>{i.tile?this.jr.load(i,(t,e)=>{this.Fr(t,e,i)}):this.jr.loadWhole(i,(t,e)=>{this.Fr(t,e,i)})},0)},Fr(t,e,i){if("error"===t)this.isExistAccess=!1,this.isExistNavi=!1,this.isExistDrive=!1;else if("scene"===t&&e.naviType&&"undefined"!=e.naviType&&0!=e.naviType){this.isExistAccess=!0,this.isExistNavi=!0,this.isExistDrive=!0;let t=e.naviType;1===t?(this.isExistAccess=!1,this.isExistNavi=!1,this.isExistDrive=!1):(8<=t&&(t-=8),this.isExistAccess=!1,4<=t?t-=4:this.se===w.Drive&&(this.isExistDrive=!1),t<=0&&!this.isExistAccess&&this.se===w.Walk&&(this.isExistNavi=!1)),this.load_cnt++,this.isExistAccess||this.isExistNavi||this.se!==w.Walk?this.isExistDrive||this.se!==w.Drive||this.qf.push({buildingID:i.buildingID,error:"NONE_DRIVE_RODE_NETWORK",data:A.NONE_DRIVE_RODE_NETWORK}):this.qf.push({buildingID:i.buildingID,error:"NONE_WALK_RODE_NETWORK",data:A.NONE_WALK_RODE_NETWORK})}else if("decode"===t){var r=new xn(i);r.Ar(e),this.Cf.xf.set(i.bid,r),this.Cf.jh.set(i.bid,r.jh),e.gate&&(this.Jf=e.gate.floors);for(let t=0;t<e.scene.buildings?.length;t++){var n=e.scene.buildings[t],s={mapID:this.fe.mapID,buildingID:null,appName:this.fe.appName,key:this.fe.key,license:this.fe.license,mapURL:this.fe.mapURL,mapURLAbsolute:this.fe.mapURLAbsolute,merge:this.fe.merge,loadNavi:!0,justDecode:!0,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj,tile:this.fe.tile,type:this.fe.type,bid:null,isOutdoor:!1,uuid:this.Tr},s=(s.buildingID=n.mid,s.bid=n.bid,Object.assign({},s));this.Zf.set(n.bid,s),this.fe.bidToMid.set(n.bid,n.mid),this.fe.bidToName.set(n.bid,n.name),this.Sr(s)}this.Cf.xf.size===this.fe.bidToMid.size&&(null!=this.Jf&&this.Cf.Ar(Object.assign(this.fe,{gate:this.Jf})),0!==this.load_cnt&&this.qf.length>=this.load_cnt?this.Nr&&this.Nr({result:this.qf}):(this.qf={state:t,error:"0",data:null},this.Mr&&this.Mr()))}},Vr(){var e={buildings:[],distance:0,subs:[],viapoints:[]};for(let t=0;t<this.Wf.length;t++){var i,r={buildingID:null,buildingName:null,levels:[],distance:0},n=this.Wf[t].bid,s=this.Wf[t].buildingName,l=this.lc(this.Wf[t],this.Uf[t],n);r.levels=l.levels,r.distance=l.distance,e.distance+=r.distance,t!==this.Wf.length-1&&l.subs[l.subs.length-1]&&(l.subs[l.subs.length-1].transfer=T.TRANSFER_ENTRANCE),r.buildingID=n==this.Yf?null:n,r.buildingName=s||null;for(i of l.subs)i.buildingID=r.buildingID,i.buildingName=r.buildingName;e.buildings.push(r),e.subs.push(...l.subs),e.viapoints.push(...l.viapoints)}return e},lc(e,t,i){if(0==e.length||0==t.length)return null;var r={viapoints:[],subs:[],levels:[],distance:0},n=t[0].descriptions,s=t[0].descriptionsData,l=t[1].descriptions,o=t[1].descriptionsData,h=t[0].ladderList;let a=0;var u=[];let f=!1;var c=[];for(let t=0;t<s.length;t++){var d={instruction:{zh:null,en:null},waypoint:{points:null,direction:{zh:null,en:null}},viapoint:null,levels:null,distance:Number.NaN,buildingID:null},p=n[t],v=s[t],b=l[t],y=o[t],p=(d.instruction.zh=p,d.instruction.en=b,d.levels=[v.startLevel,v.endLevel],d.distance=void 0!==v.distance?v.distance:0,d.waypoint.direction.zh=[v.startDirection,v.endDirection||v.startDirection],d.waypoint.direction.en=[y.startDirection,y.endDirection||y.startDirection],d.levels[0]!=d.levels[1]?(f=!0,u.push(...d.levels),d.transfer=h[a],a+=1):0!=u.length&&u.slice(-1)[0]==d.levels[0]&&!f||(u.push(d.levels[0]),f=!1),this.oc([v.startIndex,v.endIndex],u,e.result));d.waypoint.points=p.points,p.via&&-1==c.indexOf(p.via)&&(d.viapoint=Object.assign({},p.via),r.viapoints.push(Object.assign({},p.via)),c.push(p.via)),r.distance+=d.distance,d.buildingID=i,r.subs.push(d)}for(let t=0;t<u.length;t++)0!=r.levels.length&&r.levels.slice(-1)[0]==u[t]||r.levels.push(u[t]);return r.door=this.Xf,r},oc(e,i,r){var n=[],s=[];let l=null;var o=[];for(let t=0;t<r.length;t++){var h=r[t];if(o.push(h.Zr),i.toString()==o.toString()){var a=i[i.length-1],u=h.Wr,f=h.Ur;if(void 0===e[0]||void 0===e[1])n.push(Object.assign({level:h.Zr},h.Wr[0])),s.push(h.Ur[0]),h=r[t-1],n.unshift(Object.assign({level:h.Zr},h.Wr[0])),s.unshift(h.Ur[0]);else for(let t=e[0];t<=e[1];t++)n.push({x:u[t].x,y:u[t].y,level:a}),s.push(f[t]);break}}return s.forEach(t=>{t.eo&&delete(l=t.Co).eo}),{points:n,via:l}},$f(t,e){var i=t.bid;return this.hc(t.result)?(i=new jn(Object.assign({data:this.jr.getDecode(this.Zf.get(i)),directionAssert:10,combineAsset:10,language:n.ZH},e)).Au(t),e=this.ac(i[5]),{descriptions:i[0],descriptionsData:i[1],distance:i[2],distances:i[3],ladderList:e}):{}},ac(e){for(let t=0;t<e.length;t++)switch(e[t]){case 1:e[t]=T.TRANSFER_LIFT;break;case 2:e[t]=T.TRANSFER_STAIR;break;case 3:e[t]=T.TRANSFER_ESCALATOR;break;case 4:e[t]=T.TRANSFER_ACCESSIBLE;break;case 5:e[t]=T.TRANSFER_RAMP;break;default:return}return e},uc(t){this.Cf.Kh=t,this.Cf.vo(),this.Wf=this._navi.Oa()},fc(){return this.Wf},cc(t){var e=t||this.Wf;if(!this.hc(e))return[];var i,r=[];for(i in e)e[i].getPointList&&r.push(...e[i].pointList);return r},dc(t){var e=t||this.Wf;if(!this.hc(e))return[];var i=[];for(let t=0;t<e.length;t++){var r=e[t],n=r.level,s=r.pointList,l={level:n,points:[]};for(let t=0;t<s.length;t++)l.points.push(Object.assign({},s[t]));i.push(l)}return i},vc(t){t=t||this.Wf;if(!this.hc(t))return 0;var e=this.cc(t);if(0==e.length)return 0;let i=0;for(let t=0;t<e.length-1;t++)i+=D.K(e[t],e[t+1]);return i},bc(t){var e=t||this.Wf;if(!this.hc(e))return[];var i,r=[];for(i in e)!e[i].level||0!=i&&r[r.length-1]==e[i].level||r.push(e[i].level);return r},yc(t,e){var i,r=e||this.Wf;if(!this.hc(r))return[];let n=[];for(i in r)r[i].level&&r[i].level==t&&(n=n.concat(r[i].pointList));return n},hc(e){if(!Array.isArray(e))return!1;if(0==e.length)return!1;for(let t=0;t<e.length;t++)if(!(e[t]instanceof fn))return!1;return!0},gc(e,t){if(0===e.length)return null;null==t&&(t={});var i=Object.assign({},this.Hf);t&&t.style&&Object.assign(i,t.style),1===this.se&&(i.color="#002FA7");let r=t&&t.height?t.height:this.zf;var n=[];for(let t=0;t<e.length;t++){var s=e[t],l=s.pointList;if(0!==l.length){s=s.level;let i=[];l.forEach(t=>{var e=parseFloat(""+t.x),t=parseFloat(""+t.y);i.push({x:e,y:t,z:r})}),l.length<2&&(o=parseFloat(""+l[0].x),l=parseFloat(""+l[0].y),i.push({x:o,y:l,z:r}));var o=new fengmap.FMSegment;o.level=s,o.points=i,n.push(o)}}i=new fengmap.FMLineMarker(Object.assign({segments:n},i));return i.passed=t&&t.passed?t.passed:this._linePassed,i},ec(t){return{id:t.Ni,startPoint:{x:t.Rt.x,y:t.Rt.y},endPoint:{x:t.It.x,y:t.It.y},startId:t.cn,endId:t.dn,roadRank:t.gn,roadEntry:t.mn}},rc(t,e,i){if(0==t.length||null==t.get(e)||null==t.get(i))return!1;var r,n=new Map;for(r of t.keys())n.set(r,!1);for(var s=[e];0<s.length;){var l=s[0];if(n.get(l))s.splice(0,1);else{if(n.set(l,!0),s.splice(0,1),l==i)return!1;var o=t.get(l);if(!o||2<o.length)return!0;for(let t=0;t<o.length;t++)s.push(o[t].Es)}}return!0},sc(i,r){let n=[];if(i.coords.buildingID==r.coords.buildingID&&i.coords.level==r.coords.level){var e=null==i.buildingID?null:i.buildingID,s=i.coords.level,l=this.Qf.get(e).get(s),o=i.road.id,h=r.road.id,a=l.get(o),l=l.get(h),u=i.coords.buildingID;let t;var f=null==this.Kf.get(u)?[]:this.Kf.get(u);if(t=u?this.Cf.xf.get(e):this.Cf.xf.get(null),a!=l){let e=null;for(let t=0;t<f.length;t++)if(f[t].level==s&&null!=f[t].ptsBwteenRoad){e=f[t].ptsBwteenRoad;break}if(null!=e&&null!=e.get(o)&&null!=e.get(o).get(h))n=e.get(o).get(h);else{var c,d=t.Yh.mh;for(c of d.keys()){var p=d.get(c);if(p.level===s&&(null!=(n=this.mc(i,r,p))&&0<n.length))break}null==e?((e=new Map).set(o,new Map),e.get(o).set(h,n),f.push({level:s,ptsBwteenRoad:e}),this.Kf.set(u,f)):(null==e.get(o)&&e.set(o,new Map),e.get(o).set(h,n))}}}return n},nc(i,r,t,e){var n=new Map;let s,l;if(null==t&&(t=null),null==(l=t?this.Cf.xf.get(t):this.Cf.xf.get(null)))return null;s=e?l.kh:l.jh;for(let e=0;e<i.length;e++){var o=i[e],h=s.get(o).qn,a=[];let t;if(null!=r&&0<r.length){for(let e=0;e<r.length;e++)for(let t=0;t<h.length;t++)h[t].gn===r[e]&&a.push(h[t]);t=this._c(a)}else t=this._c(h);n.set(o,t)}this.Qf.set(t,n)},_c(i){var r=new Map,n=new Map;let s=0;for(let t=0;t<i.length;t++)n.set(i[t].Ni,[0,0]),r.set(i[t].Ni,-1);for(let e=0;e<i.length;e++){var l=i[e];if(1!=n.get(l.Ni)[0]||1!=n.get(l.Ni)[1]){var o=l.cn,h=l.dn,a=new j(l.It.x-l.Rt.x,l.It.y-l.Rt.y);for(let t=e+1;t<i.length;t++){var u=i[t];if(l.gn==u.gn){var f=u.cn,c=u.dn,d=r.get(l.Ni),p=r.get(u.Ni);let t;t=-1==d&&-1==p?-1:-1!=d&&(-1==p||d<=p)?d:p;var v=new j(u.It.x-u.Rt.x,u.It.y-u.Rt.y);if(0==n.get(l.Ni)[0]){if(o==f){if(a.multiplyScalar(-1).angleTo(v)*D.S()<=5){if(t=-1==t?++s:t,r.set(l.Ni,t),r.set(u.Ni,t),n.get(l.Ni)[0]=1,-(n.get(u.Ni)[0]=1)!=p&&p!=t)for(var b of r.keys())r.get(b)==p&&r.set(b,t);if(-1!=d&&d!=t)for(var y of r.keys())r.get(y)==d&&r.set(y,t)}continue}if(o==c){if(a.multiplyScalar(-1).angleTo(v.multiplyScalar(-1))*D.S()<=5){if(t=-1==t?++s:t,r.set(l.Ni,t),r.set(u.Ni,t),n.get(l.Ni)[0]=1,-(n.get(u.Ni)[1]=1)!=p&&p!=t)for(var g of r.keys())r.get(g)==p&&r.set(g,t);if(-1!=d&&d!=t)for(var m of r.keys())r.get(m)==d&&r.set(m,t)}continue}}if(0==n.get(l.Ni)[1])if(h==f){if(a.angleTo(v)*D.S()<=5){if(t=-1==t?++s:t,r.set(l.Ni,t),r.set(u.Ni,t),n.get(l.Ni)[1]=1,-(n.get(u.Ni)[0]=1)!=p&&p!=t)for(var _ of r.keys())r.get(_)==p&&r.set(_,t);if(-1!=d&&d!=t)for(var w of r.keys())r.get(w)==d&&r.set(w,t)}}else if(h==c)if(a.angleTo(v.multiplyScalar(-1))*D.S()<=5){if(t=-1==t?++s:t,r.set(l.Ni,t),r.set(u.Ni,t),n.get(l.Ni)[1]=1,-(n.get(u.Ni)[1]=1)!=p&&p!=t)for(var x of r.keys())r.get(x)==p&&r.set(x,t);if(-1!=d&&d!=t)for(var O of r.keys())r.get(O)==d&&r.set(O,t)}}}-1==r.get(l.Ni)&&r.set(l.Ni,++s)}}return r},mc(r,n,s){var l=[],o=r.coords,r=r.road,h=n.coords,n=n.road,a=s.so(o),u=s.so(h);if(null!=r&&null!=n&&o.level==h.level&&r.extentID==n.extentID&&a==u){let t=null,e=null;var f=o.level;e=D.J(h,r.startPoint)<=D.J(h,r.endPoint)?(t=r.startPoint,r.startID):(t=r.endPoint,r.endID);let i=null;i=D.J(t,n.startPoint)<=D.J(t,n.endPoint)?(n.startPoint,n.startID):(n.endPoint,n.endID);u=s.qs,o=u.Ms(e),h=[u.Ms(i)],r=s.Xo(a);if(null!=r)if(r.sl(u,o,h)){r.Hs=i;var c=r.hl();for(let t=c.length-1;0<=t;t--)l.push(Object.assign({level:f},c[t].Jt))}}return l}});class Nn extends Mn{constructor(t,e,i){super(t,e,i)}}class Tn{constructor(t){this.Ef=void 0!==t.buildingID?t.buildingID:null,this.Zr=void 0!==t.level?t.level:null,this.$t=void 0!==t.points?t.points:null,this.Do=-1,this.Ct=null,this.Ar()}}Object.assign(Tn.prototype,{Ar(){this.$t&&(this.Ct=new Vt,this.Ct.Bt(this.$t),this.Do=this.$t.length,this.$t[0].x==this.$t[this.Do-1].x&&this.$t[0].y==this.$t[this.Do-1].y?this.Do--:this.$t.push(this.$t[0]))},yh(t,e){return D.Z(t,e,this.Ct.Gt,this.Ct.Dt)},Rs(t){return!!D.W(t,this.Ct.min,this.Ct.max)&&D.X(t,this.$t,this.Do)},wc(t){let e=0;return this.Rs(t[0])&&(e|=1),this.Rs(t[1])&&(e|=2),e},As(e,r){if(!D.Z(e[0],e[1],this.Ct.min,this.Ct.max))return!1;let i=!1;for(let t=0;t<this.Do;t++){var n={};1==D.nt(e[0],e[1],this.$t[t],this.$t[t+1],n)&&(i=!0,r.push(n))}if(e[0].x!=e[1].x){let i=e[0].x<e[1].x;r.sort((t,e)=>i?t.x-e.x:e.x-t.x)}else{let i=e[0].y<e[1].y;r.sort((t,e)=>i?t.y-e.y:e.y-t.y)}return i},xc(t,e){var i=[],r=(i.push(t[0]),i.push(...e),i.push(t[1]),[]);for(let t=0;t<i.length-1;t++)r.push([i[t],i[t+1]]);return r},iu(e){if(this.Ef!=e.bid||this.Zr!=e.Zr)return!1;if(this.$t.length!=e.$t.length)return!1;for(let t=0;t<this.$t.length;t++){if(this.$t[t].x!=e.$t[t].x)return!1;if(this.$t[t].y!=e.$t[t].y)return!1}return!0}});class An extends Mn{constructor(t,e,i){t.type=w.Drive,super(t,e,i)}route(r,t,e){this.Cf.obstruct=void 0===r.obstruct||r.obstruct,this.Cf.turnCost=void 0!==r.turnCost?r.turnCost:0;let i=G.ROUTE_FAILED_CANNOT_ARRIVE;if((i=r.viapoints&&0<r.viapoints.length?(this.Cf.sa=r.viapoints,this.Cf.ha(r.start,r.dest,r.mode||f.MODULE_SHORTEST)):this.Cf.da(r.start,r.dest,r.mode||f.MODULE_SHORTEST,r.priority||v.PRIORITY_DEFAULT))===G.ROUTE_SUCCESS){this.Wf=this.Cf.Ff();let e=null,i=null;this.Uf=[];for(let t=0;t<this.Wf.length;t++)0<t&&(e=this.fe.bidToName.get(this.Wf[t-1].bid)?this.fe.bidToName.get(this.Wf[t-1].bid):"outdoor"),t<this.Wf.length-1&&(i=this.fe.bidToName.get(this.Wf[t+1].bid)?this.fe.bidToName.get(this.Wf[t+1].bid):"outdoor"),this.Wf[t].Ru=e,this.Wf[t].Iu=i,e=null,i=null,this.Wf[t].buildingName=this.fe.bidToName.get(this.Wf[t].bid),this.Uf.push([this.$f(this.Wf[t],{language:n.ZH,type:w.Drive,reqDest:r.dest}),this.$f(this.Wf[t],{language:n.EN,type:w.Drive,reqDest:r.dest})]);this.Xf=this.Cf.Hh,t&&t(this.Vr())}else e&&e(i)}}class Rn extends Mn{constructor(t,e,i){t.type=w.Walk,super(t,e,i)}route(t,r,e){this.Cf.toDoors=void 0!==t.toDoors&&t.toDoors,this.Cf.obstruct=void 0===t.obstruct||t.obstruct,this.Cf.barrierFree=void 0!==t.barrierFree&&t.barrierFree,this.Cf.turnCost=void 0!==t.turnCost?t.turnCost:0;let i=G.ROUTE_FAILED_CANNOT_ARRIVE;if((i=t.viapoints&&0<t.viapoints.length?(this.Cf.sa=t.viapoints,this.Cf.ha(t.start,t.dest,t.mode||f.MODULE_SHORTEST,t.priority||v.PRIORITY_DEFAULT)):this.Cf.da(t.start,t.dest,t.mode||f.MODULE_SHORTEST,t.priority||v.PRIORITY_DEFAULT))===G.ROUTE_SUCCESS){this.Wf=this.Cf.Ff();let e=null,i=null;this.Uf=[];for(let t=0;t<this.Wf.length;t++)0<t&&(e=this.fe.bidToName.get(this.Wf[t-1].bid)?this.fe.bidToName.get(this.Wf[t-1].bid):"outdoor"),t<this.Wf.length-1&&(i=this.fe.bidToName.get(this.Wf[t+1].bid)?this.fe.bidToName.get(this.Wf[t+1].bid):"outdoor"),this.Wf[t].Ru=e,this.Wf[t].Iu=i,e=null,i=null,this.Wf[t].buildingName=this.fe.bidToName.get(this.Wf[t].bid),this.Uf.push([this.$f(this.Wf[t],{language:n.ZH}),this.$f(this.Wf[t],{language:n.EN})]);this.Xf=this.Cf.Hh,r&&r(this.Vr())}else e&&e(i)}}function In(e){if(0===arguments.length)throw new TypeError("1 argument required, but only 0 present.");if((e=(e=(e=""+e).replace(/[ \t\n\f\r]/g,"")).length%4==0?e.replace(/==?$/,""):e).length%4==1||/[^+/0-9A-Za-z]/.test(e))return null;let i="",r=0,n=0;for(let t=0;t<e.length;t++)r=(r<<=6)|Sn(e[t]),24===(n+=6)&&(i=(i=(i+=String.fromCharCode((16711680&r)>>16))+String.fromCharCode((65280&r)>>8))+String.fromCharCode(255&r),r=n=0);return 12===n?(r>>=4,i+=String.fromCharCode(r)):18===n&&(r>>=2,i=(i+=String.fromCharCode((65280&r)>>8))+String.fromCharCode(255&r)),i}let Ln="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Sn(t){t=Ln.indexOf(t);return t<0?void 0:t}var Fn=In;function Pn(t){if(0===arguments.length)throw new TypeError("1 argument required, but only 0 present.");let e;for(t=""+t,e=0;e<t.length;e++)if(255<t.charCodeAt(e))return null;let i="";for(e=0;e<t.length;e+=3){var r=[void 0,void 0,void 0,void 0];r[0]=t.charCodeAt(e)>>2,r[1]=(3&t.charCodeAt(e))<<4,t.length>e+1&&(r[1]|=t.charCodeAt(e+1)>>4,r[2]=(15&t.charCodeAt(e+1))<<2),t.length>e+2&&(r[2]|=t.charCodeAt(e+2)>>6,r[3]=63&t.charCodeAt(e+2));for(let t=0;t<r.length;t++)void 0===r[t]?i+="=":i+=Dn(r[t])}return i}let Gn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Dn(t){if(0<=t&&t<64)return Gn[t]}var Vn=Pn;let Bn=Fn,Zn=Vn;var Cn={atob:Bn,btoa:Zn},Wn=0,Un=function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-Wn)),r=setTimeout(function(){t(e+i)},i);return Wn=e+i,r},qn=function(t){clearTimeout(t)};let Yn=wx.getSystemInfoSync(),Xn={AudioContext:function(){},URL:{},atob:Cn.atob,devicePixelRatio:Yn.pixelRatio,requestAnimationFrame:Un,cancelAnimationFrame:qn,screenWidth:Yn.screenWidth,screenHeight:Yn.screenHeight,systemInfo:Yn};var zn={},Hn={},Qn,Kn,Jn;function $n(){var e,r,i;return Kn||(Kn=1,Qn=n,e=ts(),(r=n.zero=new n(0,0)).toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1},n.zeroHash="\0\0\0\0\0\0\0\0",n.fromNumber=function(t){var e,i;return 0===t?r:(i=(t=(e=t<0)?-t:t)>>>0,t=(t-i)/4294967296>>>0,e&&(t=~t>>>0,i=~i>>>0,4294967295<++i)&&(i=0,4294967295<++t)&&(t=0),new n(i,t))},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(e.isString(t)){if(!e.Long)return n.fromNumber(parseInt(t,10));t=e.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):r},n.prototype.toNumber=function(t){var e;return!t&&this.hi>>>31?(t=1+~this.lo>>>0,e=~this.hi>>>0,-(t+4294967296*(e=t?e:e+1>>>0))):this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return e.Long?new e.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}},i=String.prototype.charCodeAt,n.fromHash=function(t){return"\0\0\0\0\0\0\0\0"===t?r:new n((i.call(t,0)|i.call(t,1)<<8|i.call(t,2)<<16|i.call(t,3)<<24)>>>0,(i.call(t,4)|i.call(t,5)<<8|i.call(t,6)<<16|i.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0==i?0==e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:i<128?9:10}),Qn;function n(t,e){this.lo=t>>>0,this.hi=e>>>0}}function ts(){var r;return Jn||(Jn=1,(r=Hn).asPromise=ne(),r.base64=de(),r.EventEmitter=pe(),r.float=ve(),r.inquire=be(),r.utf8=je(),r.pool=ke(),r.LongBits=$n(),r.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),r.global=r.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||e,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,e){var i=t[e];return!(null==i||!t.hasOwnProperty(e))&&("object"!=typeof i||0<(Array.isArray(i)?i:Object.keys(i)).length)},r.Buffer=(()=>{try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}})(),r.be=null,r.ye=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r.ye(t):new r.Array(t):r.Buffer?r.be(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){t=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(t.lo,t.hi,e):t.toNumber(Boolean(e))},r.merge=n,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=t,r.ProtocolError=t("ProtocolError"),r.oneOfGetter=function(t){for(var i={},e=0;e<t.length;++e)i[t[e]]=1;return function(){for(var t=Object.keys(this),e=t.length-1;-1<e;--e)if(1===i[t[e]]&&null!=this[t[e]])return t[e]}},r.oneOfSetter=function(i){return function(t){for(var e=0;e<i.length;++e)i[e]!==t&&delete this[i[e]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r.ge=function(){var i=r.Buffer;i?(r.be=i.from!==Uint8Array.from&&i.from||function(t,e){return new i(t,e)},r.ye=i.allocUnsafe||function(t){return new i(t)}):r.be=r.ye=null}),Hn;function n(t,e,i){for(var r=Object.keys(e),n=0;n<r.length;++n)void 0!==t[r[n]]&&i||(t[r[n]]=e[r[n]]);return t}function t(t){function i(t,e){if(!(this instanceof i))return new i(t,e);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),e&&n(this,e)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return t}}),i.prototype.toString=function(){return this.name+": "+this.message},i}}var es=m,g=ts(),is,rs=g.LongBits,ns=g.base64,ss=g.utf8;function ls(t,e,i){this.fn=t,this.len=e,this.next=void 0,this.val=i}function os(){}function hs(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function m(){this.len=0,this.head=new ls(os,0,0),this.tail=this.head,this.states=null}var as=function(){return g.Buffer?function(){return(m.create=function(){return new is})()}:function(){return new m}};function us(t,e,i){e[i]=255&t}function fs(t,e,i){for(;127<t;)e[i++]=127&t|128,t>>>=7;e[i]=t}function cs(t,e){this.len=t,this.next=void 0,this.val=e}function ds(t,e,i){for(;t.hi;)e[i++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;127<t.lo;)e[i++]=127&t.lo|128,t.lo=t.lo>>>7;e[i++]=t.lo}function ps(t,e,i){e[i]=255&t,e[i+1]=t>>>8&255,e[i+2]=t>>>16&255,e[i+3]=t>>>24}m.create=as(),m.alloc=function(t){return new g.Array(t)},g.Array!==Array&&(m.alloc=g.pool(m.alloc,g.Array.prototype.subarray)),m.prototype.me=function(t,e,i){return this.tail=this.tail.next=new ls(t,e,i),this.len+=e,this},cs.prototype=Object.create(ls.prototype),cs.prototype.fn=fs,m.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new cs((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},m.prototype.int32=function(t){return t<0?this.me(ds,10,rs.fromNumber(t)):this.uint32(t)},m.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},m.prototype.uint64=function(t){t=rs.from(t);return this.me(ds,t.length(),t)},m.prototype.int64=m.prototype.uint64,m.prototype.sint64=function(t){t=rs.from(t).zzEncode();return this.me(ds,t.length(),t)},m.prototype.bool=function(t){return this.me(us,1,t?1:0)},m.prototype.fixed32=function(t){return this.me(ps,4,t>>>0)},m.prototype.sfixed32=m.prototype.fixed32,m.prototype.fixed64=function(t){t=rs.from(t);return this.me(ps,4,t.lo).me(ps,4,t.hi)},m.prototype.sfixed64=m.prototype.fixed64,m.prototype.float=function(t){return this.me(g.float.writeFloatLE,4,t)},m.prototype.double=function(t){return this.me(g.float.writeDoubleLE,8,t)};var vs=g.Array.prototype.set?function(t,e,i){e.set(t,i)}:function(t,e,i){for(var r=0;r<t.length;++r)e[i+r]=t[r]},bs=(m.prototype.bytes=function(t){var e,i=t.length>>>0;return i?(g.isString(t)&&(e=m.alloc(i=ns.length(t)),ns.decode(t,e,0),t=e),this.uint32(i).me(vs,i,t)):this.me(us,1,0)},m.prototype.string=function(t){var e=ss.length(t);return e?this.uint32(e).me(ss.write,e,t):this.me(us,1,0)},m.prototype.fork=function(){return this.states=new hs(this),this.head=this.tail=new ls(os,0,0),this.len=0,this},m.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ls(os,0,0),this.len=0),this},m.prototype.ldelim=function(){var t=this.head,e=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=t.next,this.tail=e,this.len+=i),this},m.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),i=0;t;)t.fn(t.val,e,i),i+=t.len,t=t.next;return e},m.ge=function(t){is=t,m.create=as(),is.ge()},ms),ys=es,gs=((ms.prototype=Object.create(ys.prototype)).constructor=ms,ts());function ms(){ys.call(this)}function _s(t,e,i){t.length<40?gs.utf8.write(t,e,i):e.utf8Write?e.utf8Write(t,i):e.write(t,i)}ms.ge=function(){ms.alloc=gs.ye,ms.writeBytesBuffer=gs.Buffer&&gs.Buffer.prototype instanceof Uint8Array&&"set"===gs.Buffer.prototype.set.name?function(t,e,i){e.set(t,i)}:function(t,e,i){if(t.copy)t.copy(e,i,0,t.length);else for(var r=0;r<t.length;)e[i++]=t[r++]}},ms.prototype.bytes=function(t){var e=(t=gs.isString(t)?gs.be(t,"base64"):t).length>>>0;return this.uint32(e),e&&this.me(ms.writeBytesBuffer,e,t),this},ms.prototype.string=function(t){var e=gs.Buffer.byteLength(t);return this.uint32(e),e&&this.me(_s,e,t),this},ms.ge();var ws=x,xs=ts(),Os,js=xs.LongBits,ks=xs.utf8;function Es(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function x(t){this.buf=t,this.pos=0,this.len=t.length}var Ms="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new x(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new x(t);throw Error("illegal buffer")},Ns=function(){return xs.Buffer?function(t){return(x.create=function(t){return xs.Buffer.isBuffer(t)?new Os(t):Ms(t)})(t)}:Ms};function Ts(){var t=new js(0,0),e=0;if(!(4<this.len-this.pos)){for(;e<3;++e){if(this.pos>=this.len)throw Es(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,4<this.len-this.pos){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw Es(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function As(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function Rs(){if(this.pos+8>this.len)throw Es(this,8);return new js(As(this.buf,this.pos+=4),As(this.buf,this.pos+=4))}x.create=Ns(),x.prototype._e=xs.Array.prototype.subarray||xs.Array.prototype.slice,x.prototype.uint32=(()=>{var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)||!((this.pos+=5)>this.len))return t;throw this.pos=this.len,Es(this,10)}})(),x.prototype.int32=function(){return 0|this.uint32()},x.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},x.prototype.bool=function(){return 0!==this.uint32()},x.prototype.fixed32=function(){if(this.pos+4>this.len)throw Es(this,4);return As(this.buf,this.pos+=4)},x.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Es(this,4);return 0|As(this.buf,this.pos+=4)},x.prototype.float=function(){if(this.pos+4>this.len)throw Es(this,4);var t=xs.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},x.prototype.double=function(){if(this.pos+8>this.len)throw Es(this,4);var t=xs.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},x.prototype.bytes=function(){var t=this.uint32(),e=this.pos,i=this.pos+t;if(i>this.len)throw Es(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,i):e===i?new this.buf.constructor(0):this._e.call(this.buf,e,i)},x.prototype.string=function(){var t=this.bytes();return ks.read(t,0,t.length)},x.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw Es(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw Es(this)}while(128&this.buf[this.pos++]);return this},x.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},x.ge=function(t){Os=t,x.create=Ns(),Os.ge();var e=xs.Long?"toLong":"toNumber";xs.merge(x.prototype,{int64:function(){return Ts.call(this)[e](!1)},uint64:function(){return Ts.call(this)[e](!0)},sint64:function(){return Ts.call(this).zzDecode()[e](!1)},fixed64:function(){return Rs.call(this)[e](!0)},sfixed64:function(){return Rs.call(this)[e](!1)}})};var Is=Fs,Ls=ws,Ss=((Fs.prototype=Object.create(Ls.prototype)).constructor=Fs,ts());function Fs(t){Ls.call(this,t)}Fs.ge=function(){Ss.Buffer&&(Fs.prototype._e=Ss.Buffer.prototype.slice)},Fs.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},Fs.ge();var Ps={},Gs=Vs,Ds=ts();function Vs(t,e,i){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");Ds.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(i)}(Vs.prototype=Object.create(Ds.EventEmitter.prototype)).constructor=Vs,Vs.prototype.rpcCall=function t(i,e,r,n,s){if(!n)throw TypeError("request must be specified");var l=this;if(!s)return Ds.asPromise(t,l,i,e,r,n);if(l.rpcImpl)try{return l.rpcImpl(i,e[l.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(t,e){if(t)return l.emit("error",t,i),s(t);if(null!==e){if(!(e instanceof r))try{e=r[l.responseDelimited?"decodeDelimited":"decode"](e)}catch(t){return l.emit("error",t,i),s(t)}return l.emit("data",e,i),s(null,e)}l.end(!0)})}catch(t){l.emit("error",t,i),setTimeout(function(){s(t)},0)}else setTimeout(function(){s(Error("already ended"))},0)},Vs.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},Ps.Service=Gs;var Bs={},F=((()=>{var t=zn;function e(){t.util.ge(),t.Writer.ge(t.BufferWriter),t.Reader.ge(t.BufferReader)}t.build="minimal",t.Writer=es,t.BufferWriter=bs,t.Reader=ws,t.BufferReader=Is,t.util=ts(),t.rpc=Ps,t.roots=Bs,t.configure=e,e()})(),zn),Zs;let P=F.Reader,B=F.Writer,Z=F.util,C=F.roots.default||(F.roots.default={});C.protobuf=(()=>{var t,e,i={};function r(i){if(this.buffers=[],this.keys=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function n(i){if(i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function s(i){if(this.layerGroups=[],this.buildings=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function l(i){if(i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function o(i){if(this.layers=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function h(i){if(this.fids=[],this.idxs=[],this.pts=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function a(i){if(this.idxs=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function u(i){if(this.floors=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function f(i){if(this.floors=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function c(i){if(this.navi=[],this.drive=[],this.accessible=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function d(i){if(this.idxs=[],this.pts=[],this.toBid=[],this.toGid=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function p(i){if(this.idxs=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function v(i){if(this.extentLayer=[],this.modelLayer=[],this.labelLayer=[],this.poiLayer=[],this.polygonLayer=[],this.polygonLabelLayer=[],this.liftLayer=[],this.stairLayer=[],this.escalatorLayer=[],this.externalModelLayer=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function b(i){if(this.idxs=[],this.pts=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function y(i){if(this.idxs=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function g(i){if(this.extentLayer=[],this.modelLayer=[],this.labelLayer=[],this.poiLayer=[],this.polygonLayer=[],this.liftLayer=[],this.stairLayer=[],this.polygonLabelLayer=[],this.externalModelLayer=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function m(i){if(i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function _(i){if(i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function w(i){if(i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function x(i){if(i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function O(i){if(i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function j(i){if(i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function k(i){if(i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function E(i){if(i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function M(i){if(i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function N(i){if(this.naviNodes=[],this.naviSegments=[],this.naviZones=[],this.naviModels=[],this.nextFloors=[],this.naviExtents=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function T(i){if(this.idxs=[],this.pts=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function A(i){if(this.idxs=[],this.pts=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function R(i){if(this.rejects=[],this.idxs=[],this.pts=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function I(i){if(this.doorids=[],this.nodetypes=[],this.entrytypes=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function L(i){if(this.pts=[],this.idxs=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}function S(i){if(this.idxs=[],i)for(let t=Object.keys(i),e=0;e<t.length;++e)null!=i[t[e]]&&(this[t[e]]=i[t[e]])}return i.Map=(r.prototype.mid="",r.prototype.fileVer=0,r.prototype.dateVer=Z.Long?Z.Long.fromBits(0,0,!0):0,r.prototype.mname="",r.prototype.hashCode="",r.prototype.key="",r.prototype.fileDate="",r.prototype.desc="",r.prototype.readOnly=!1,r.prototype.buffers=Z.emptyArray,r.prototype.keys=Z.emptyArray,r.create=function(t){return new r(t)},r.encode=function(e,i){if((i=i||B.create()).uint32(10).string(e.mid),i.uint32(16).int32(e.fileVer),i.uint32(24).uint64(e.dateVer),i.uint32(34).string(e.mname),i.uint32(42).string(e.hashCode),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&i.uint32(50).string(e.key),null!=e.fileDate&&Object.hasOwnProperty.call(e,"fileDate")&&i.uint32(58).string(e.fileDate),null!=e.desc&&Object.hasOwnProperty.call(e,"desc")&&i.uint32(66).string(e.desc),null!=e.readOnly&&Object.hasOwnProperty.call(e,"readOnly")&&i.uint32(72).bool(e.readOnly),null!=e.buffers&&e.buffers.length)for(let t=0;t<e.buffers.length;++t)C.protobuf.Map.Buffer.encode(e.buffers[t],i.uint32(82).fork()).ldelim();if(null!=e.keys&&e.keys.length)for(let t=0;t<e.keys.length;++t)i.uint32(90).string(e.keys[t]);return i},r.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},r.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.Map;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.mid=t.string();break;case 2:r.fileVer=t.int32();break;case 3:r.dateVer=t.uint64();break;case 4:r.mname=t.string();break;case 5:r.hashCode=t.string();break;case 6:r.key=t.string();break;case 7:r.fileDate=t.string();break;case 8:r.desc=t.string();break;case 9:r.readOnly=t.bool();break;case 10:r.buffers&&r.buffers.length||(r.buffers=[]),r.buffers.push(C.protobuf.Map.Buffer.decode(t,t.uint32()));break;case 11:r.keys&&r.keys.length||(r.keys=[]),r.keys.push(t.string());break;default:t.skipType(7&n)}}if(!r.hasOwnProperty("mid"))throw Z.ProtocolError("missing required 'mid'",{instance:r});if(!r.hasOwnProperty("fileVer"))throw Z.ProtocolError("missing required 'fileVer'",{instance:r});if(!r.hasOwnProperty("dateVer"))throw Z.ProtocolError("missing required 'dateVer'",{instance:r});if(!r.hasOwnProperty("mname"))throw Z.ProtocolError("missing required 'mname'",{instance:r});if(r.hasOwnProperty("hashCode"))return r;throw Z.ProtocolError("missing required 'hashCode'",{instance:r})},r.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},r.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!Z.isString(e.mid))return"mid: string expected";if(!Z.isInteger(e.fileVer))return"fileVer: integer expected";if(!(Z.isInteger(e.dateVer)||e.dateVer&&Z.isInteger(e.dateVer.low)&&Z.isInteger(e.dateVer.high)))return"dateVer: integer|Long expected";if(!Z.isString(e.mname))return"mname: string expected";if(!Z.isString(e.hashCode))return"hashCode: string expected";if(null!=e.key&&e.hasOwnProperty("key")&&!Z.isString(e.key))return"key: string expected";if(null!=e.fileDate&&e.hasOwnProperty("fileDate")&&!Z.isString(e.fileDate))return"fileDate: string expected";if(null!=e.desc&&e.hasOwnProperty("desc")&&!Z.isString(e.desc))return"desc: string expected";if(null!=e.readOnly&&e.hasOwnProperty("readOnly")&&"boolean"!=typeof e.readOnly)return"readOnly: boolean expected";if(null!=e.buffers&&e.hasOwnProperty("buffers")){if(!Array.isArray(e.buffers))return"buffers: array expected";for(let t=0;t<e.buffers.length;++t){var i=C.protobuf.Map.Buffer.verify(e.buffers[t]);if(i)return"buffers."+i}}if(null!=e.keys&&e.hasOwnProperty("keys")){if(!Array.isArray(e.keys))return"keys: array expected";for(let t=0;t<e.keys.length;++t)if(!Z.isString(e.keys[t]))return"keys: string[] expected"}return null},r.fromObject=function(e){if(e instanceof C.protobuf.Map)return e;var i=new C.protobuf.Map;if(null!=e.mid&&(i.mid=String(e.mid)),null!=e.fileVer&&(i.fileVer=0|e.fileVer),null!=e.dateVer&&(Z.Long?(i.dateVer=Z.Long.fromValue(e.dateVer)).unsigned=!0:"string"==typeof e.dateVer?i.dateVer=parseInt(e.dateVer,10):"number"==typeof e.dateVer?i.dateVer=e.dateVer:"object"==typeof e.dateVer&&(i.dateVer=new Z.LongBits(e.dateVer.low>>>0,e.dateVer.high>>>0).toNumber(!0))),null!=e.mname&&(i.mname=String(e.mname)),null!=e.hashCode&&(i.hashCode=String(e.hashCode)),null!=e.key&&(i.key=String(e.key)),null!=e.fileDate&&(i.fileDate=String(e.fileDate)),null!=e.desc&&(i.desc=String(e.desc)),null!=e.readOnly&&(i.readOnly=Boolean(e.readOnly)),e.buffers){if(!Array.isArray(e.buffers))throw TypeError(".protobuf.Map.buffers: array expected");i.buffers=[];for(let t=0;t<e.buffers.length;++t){if("object"!=typeof e.buffers[t])throw TypeError(".protobuf.Map.buffers: object expected");i.buffers[t]=C.protobuf.Map.Buffer.fromObject(e.buffers[t])}}if(e.keys){if(!Array.isArray(e.keys))throw TypeError(".protobuf.Map.keys: array expected");i.keys=[];for(let t=0;t<e.keys.length;++t)i.keys[t]=String(e.keys[t])}return i},r.toObject=function(e,i){var t,r={};if(((i=i||{}).arrays||i.defaults)&&(r.buffers=[],r.keys=[]),i.defaults&&(r.mid="",r.fileVer=0,Z.Long?(t=new Z.Long(0,0,!0),r.dateVer=i.longs===String?t.toString():i.longs===Number?t.toNumber():t):r.dateVer=i.longs===String?"0":0,r.mname="",r.hashCode="",r.key="",r.fileDate="",r.desc="",r.readOnly=!1),null!=e.mid&&e.hasOwnProperty("mid")&&(r.mid=e.mid),null!=e.fileVer&&e.hasOwnProperty("fileVer")&&(r.fileVer=e.fileVer),null!=e.dateVer&&e.hasOwnProperty("dateVer")&&("number"==typeof e.dateVer?r.dateVer=i.longs===String?String(e.dateVer):e.dateVer:r.dateVer=i.longs===String?Z.Long.prototype.toString.call(e.dateVer):i.longs===Number?new Z.LongBits(e.dateVer.low>>>0,e.dateVer.high>>>0).toNumber(!0):e.dateVer),null!=e.mname&&e.hasOwnProperty("mname")&&(r.mname=e.mname),null!=e.hashCode&&e.hasOwnProperty("hashCode")&&(r.hashCode=e.hashCode),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.fileDate&&e.hasOwnProperty("fileDate")&&(r.fileDate=e.fileDate),null!=e.desc&&e.hasOwnProperty("desc")&&(r.desc=e.desc),null!=e.readOnly&&e.hasOwnProperty("readOnly")&&(r.readOnly=e.readOnly),e.buffers&&e.buffers.length){r.buffers=[];for(let t=0;t<e.buffers.length;++t)r.buffers[t]=C.protobuf.Map.Buffer.toObject(e.buffers[t],i)}if(e.keys&&e.keys.length){r.keys=[];for(let t=0;t<e.keys.length;++t)r.keys[t]=e.keys[t]}return r},r.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},r.Buffer=(n.prototype.gid=0,n.prototype.fileVer=0,n.prototype.btype=0,n.prototype.len=Z.Long?Z.Long.fromBits(0,0,!0):0,n.prototype.data=Z.newBuffer([]),n.create=function(t){return new n(t)},n.encode=function(t,e){return(e=e||B.create()).uint32(8).int32(t.gid),e.uint32(16).int32(t.fileVer),e.uint32(24).int32(t.btype),e.uint32(32).uint64(t.len),e.uint32(42).bytes(t.data),e},n.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},n.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.Map.Buffer;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.gid=t.int32();break;case 2:r.fileVer=t.int32();break;case 3:r.btype=t.int32();break;case 4:r.len=t.uint64();break;case 5:r.data=t.bytes();break;default:t.skipType(7&n)}}if(!r.hasOwnProperty("gid"))throw Z.ProtocolError("missing required 'gid'",{instance:r});if(!r.hasOwnProperty("fileVer"))throw Z.ProtocolError("missing required 'fileVer'",{instance:r});if(!r.hasOwnProperty("btype"))throw Z.ProtocolError("missing required 'btype'",{instance:r});if(!r.hasOwnProperty("len"))throw Z.ProtocolError("missing required 'len'",{instance:r});if(r.hasOwnProperty("data"))return r;throw Z.ProtocolError("missing required 'data'",{instance:r})},n.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},n.verify=function(t){return"object"!=typeof t||null===t?"object expected":Z.isInteger(t.gid)?Z.isInteger(t.fileVer)?Z.isInteger(t.btype)?Z.isInteger(t.len)||t.len&&Z.isInteger(t.len.low)&&Z.isInteger(t.len.high)?t.data&&"number"==typeof t.data.length||Z.isString(t.data)?null:"data: buffer expected":"len: integer|Long expected":"btype: integer expected":"fileVer: integer expected":"gid: integer expected"},n.fromObject=function(t){var e;return t instanceof C.protobuf.Map.Buffer?t:(e=new C.protobuf.Map.Buffer,null!=t.gid&&(e.gid=0|t.gid),null!=t.fileVer&&(e.fileVer=0|t.fileVer),null!=t.btype&&(e.btype=0|t.btype),null!=t.len&&(Z.Long?(e.len=Z.Long.fromValue(t.len)).unsigned=!0:"string"==typeof t.len?e.len=parseInt(t.len,10):"number"==typeof t.len?e.len=t.len:"object"==typeof t.len&&(e.len=new Z.LongBits(t.len.low>>>0,t.len.high>>>0).toNumber(!0))),null!=t.data&&("string"==typeof t.data?Z.base64.decode(t.data,e.data=Z.newBuffer(Z.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),e)},n.toObject=function(t,e){var i,r={};return(e=e||{}).defaults&&(r.gid=0,r.fileVer=0,r.btype=0,Z.Long?(i=new Z.Long(0,0,!0),r.len=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):r.len=e.longs===String?"0":0,e.bytes===String?r.data="":(r.data=[],e.bytes!==Array&&(r.data=Z.newBuffer(r.data)))),null!=t.gid&&t.hasOwnProperty("gid")&&(r.gid=t.gid),null!=t.fileVer&&t.hasOwnProperty("fileVer")&&(r.fileVer=t.fileVer),null!=t.btype&&t.hasOwnProperty("btype")&&(r.btype=t.btype),null!=t.len&&t.hasOwnProperty("len")&&("number"==typeof t.len?r.len=e.longs===String?String(t.len):t.len:r.len=e.longs===String?Z.Long.prototype.toString.call(t.len):e.longs===Number?new Z.LongBits(t.len.low>>>0,t.len.high>>>0).toNumber(!0):t.len),null!=t.data&&t.hasOwnProperty("data")&&(r.data=e.bytes===String?Z.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data),r},n.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},n),r),i.Scene=(s.prototype.mid="",s.prototype.fileVer=0,s.prototype.dateVer=Z.Long?Z.Long.fromBits(0,0,!0):0,s.prototype.mname="",s.prototype.hashCode="",s.prototype.key="",s.prototype.desc="",s.prototype.readOnly=!1,s.prototype.x=0,s.prototype.y=0,s.prototype.z=0,s.prototype.minX=0,s.prototype.minY=0,s.prototype.maxX=0,s.prototype.maxY=0,s.prototype.defGid="",s.prototype.defCenX=0,s.prototype.defCenY=0,s.prototype.defCenZ=0,s.prototype.height=0,s.prototype.rotateAngleX=0,s.prototype.rotateAngleY=0,s.prototype.rotateAngleZ=0,s.prototype.scale=0,s.prototype.scaleLevel="",s.prototype.naviType=0,s.prototype.layerGroups=Z.emptyArray,s.prototype.buildings=Z.emptyArray,s.create=function(t){return new s(t)},s.encode=function(e,i){if(i=i||B.create(),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&i.uint32(13).float(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&i.uint32(21).float(e.y),null!=e.z&&Object.hasOwnProperty.call(e,"z")&&i.uint32(29).float(e.z),null!=e.minX&&Object.hasOwnProperty.call(e,"minX")&&i.uint32(37).float(e.minX),null!=e.minY&&Object.hasOwnProperty.call(e,"minY")&&i.uint32(45).float(e.minY),null!=e.maxX&&Object.hasOwnProperty.call(e,"maxX")&&i.uint32(53).float(e.maxX),null!=e.maxY&&Object.hasOwnProperty.call(e,"maxY")&&i.uint32(61).float(e.maxY),null!=e.defGid&&Object.hasOwnProperty.call(e,"defGid")&&i.uint32(66).string(e.defGid),null!=e.defCenX&&Object.hasOwnProperty.call(e,"defCenX")&&i.uint32(77).float(e.defCenX),null!=e.defCenY&&Object.hasOwnProperty.call(e,"defCenY")&&i.uint32(85).float(e.defCenY),null!=e.defCenZ&&Object.hasOwnProperty.call(e,"defCenZ")&&i.uint32(93).float(e.defCenZ),null!=e.height&&Object.hasOwnProperty.call(e,"height")&&i.uint32(101).float(e.height),null!=e.rotateAngleX&&Object.hasOwnProperty.call(e,"rotateAngleX")&&i.uint32(109).float(e.rotateAngleX),null!=e.rotateAngleY&&Object.hasOwnProperty.call(e,"rotateAngleY")&&i.uint32(117).float(e.rotateAngleY),null!=e.rotateAngleZ&&Object.hasOwnProperty.call(e,"rotateAngleZ")&&i.uint32(125).float(e.rotateAngleZ),null!=e.scale&&Object.hasOwnProperty.call(e,"scale")&&i.uint32(133).float(e.scale),null!=e.scaleLevel&&Object.hasOwnProperty.call(e,"scaleLevel")&&i.uint32(138).string(e.scaleLevel),null!=e.layerGroups&&e.layerGroups.length)for(let t=0;t<e.layerGroups.length;++t)C.protobuf.Scene.LayerGroup.encode(e.layerGroups[t],i.uint32(146).fork()).ldelim();if(i.uint32(154).string(e.mid),i.uint32(160).int32(e.fileVer),i.uint32(168).uint64(e.dateVer),i.uint32(178).string(e.mname),i.uint32(186).string(e.hashCode),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&i.uint32(194).string(e.key),null!=e.desc&&Object.hasOwnProperty.call(e,"desc")&&i.uint32(202).string(e.desc),null!=e.readOnly&&Object.hasOwnProperty.call(e,"readOnly")&&i.uint32(208).bool(e.readOnly),null!=e.buildings&&e.buildings.length)for(let t=0;t<e.buildings.length;++t)C.protobuf.Scene.Building.encode(e.buildings[t],i.uint32(218).fork()).ldelim();return null!=e.naviType&&Object.hasOwnProperty.call(e,"naviType")&&i.uint32(224).int32(e.naviType),i},s.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},s.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.Scene;t.pos<i;){var n=t.uint32();switch(n>>>3){case 19:r.mid=t.string();break;case 20:r.fileVer=t.int32();break;case 21:r.dateVer=t.uint64();break;case 22:r.mname=t.string();break;case 23:r.hashCode=t.string();break;case 24:r.key=t.string();break;case 25:r.desc=t.string();break;case 26:r.readOnly=t.bool();break;case 1:r.x=t.float();break;case 2:r.y=t.float();break;case 3:r.z=t.float();break;case 4:r.minX=t.float();break;case 5:r.minY=t.float();break;case 6:r.maxX=t.float();break;case 7:r.maxY=t.float();break;case 8:r.defGid=t.string();break;case 9:r.defCenX=t.float();break;case 10:r.defCenY=t.float();break;case 11:r.defCenZ=t.float();break;case 12:r.height=t.float();break;case 13:r.rotateAngleX=t.float();break;case 14:r.rotateAngleY=t.float();break;case 15:r.rotateAngleZ=t.float();break;case 16:r.scale=t.float();break;case 17:r.scaleLevel=t.string();break;case 28:r.naviType=t.int32();break;case 18:r.layerGroups&&r.layerGroups.length||(r.layerGroups=[]),r.layerGroups.push(C.protobuf.Scene.LayerGroup.decode(t,t.uint32()));break;case 27:r.buildings&&r.buildings.length||(r.buildings=[]),r.buildings.push(C.protobuf.Scene.Building.decode(t,t.uint32()));break;default:t.skipType(7&n)}}if(!r.hasOwnProperty("mid"))throw Z.ProtocolError("missing required 'mid'",{instance:r});if(!r.hasOwnProperty("fileVer"))throw Z.ProtocolError("missing required 'fileVer'",{instance:r});if(!r.hasOwnProperty("dateVer"))throw Z.ProtocolError("missing required 'dateVer'",{instance:r});if(!r.hasOwnProperty("mname"))throw Z.ProtocolError("missing required 'mname'",{instance:r});if(r.hasOwnProperty("hashCode"))return r;throw Z.ProtocolError("missing required 'hashCode'",{instance:r})},s.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},s.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!Z.isString(e.mid))return"mid: string expected";if(!Z.isInteger(e.fileVer))return"fileVer: integer expected";if(!(Z.isInteger(e.dateVer)||e.dateVer&&Z.isInteger(e.dateVer.low)&&Z.isInteger(e.dateVer.high)))return"dateVer: integer|Long expected";if(!Z.isString(e.mname))return"mname: string expected";if(!Z.isString(e.hashCode))return"hashCode: string expected";if(null!=e.key&&e.hasOwnProperty("key")&&!Z.isString(e.key))return"key: string expected";if(null!=e.desc&&e.hasOwnProperty("desc")&&!Z.isString(e.desc))return"desc: string expected";if(null!=e.readOnly&&e.hasOwnProperty("readOnly")&&"boolean"!=typeof e.readOnly)return"readOnly: boolean expected";if(null!=e.x&&e.hasOwnProperty("x")&&"number"!=typeof e.x)return"x: number expected";if(null!=e.y&&e.hasOwnProperty("y")&&"number"!=typeof e.y)return"y: number expected";if(null!=e.z&&e.hasOwnProperty("z")&&"number"!=typeof e.z)return"z: number expected";if(null!=e.minX&&e.hasOwnProperty("minX")&&"number"!=typeof e.minX)return"minX: number expected";if(null!=e.minY&&e.hasOwnProperty("minY")&&"number"!=typeof e.minY)return"minY: number expected";if(null!=e.maxX&&e.hasOwnProperty("maxX")&&"number"!=typeof e.maxX)return"maxX: number expected";if(null!=e.maxY&&e.hasOwnProperty("maxY")&&"number"!=typeof e.maxY)return"maxY: number expected";if(null!=e.defGid&&e.hasOwnProperty("defGid")&&!Z.isString(e.defGid))return"defGid: string expected";if(null!=e.defCenX&&e.hasOwnProperty("defCenX")&&"number"!=typeof e.defCenX)return"defCenX: number expected";if(null!=e.defCenY&&e.hasOwnProperty("defCenY")&&"number"!=typeof e.defCenY)return"defCenY: number expected";if(null!=e.defCenZ&&e.hasOwnProperty("defCenZ")&&"number"!=typeof e.defCenZ)return"defCenZ: number expected";if(null!=e.height&&e.hasOwnProperty("height")&&"number"!=typeof e.height)return"height: number expected";if(null!=e.rotateAngleX&&e.hasOwnProperty("rotateAngleX")&&"number"!=typeof e.rotateAngleX)return"rotateAngleX: number expected";if(null!=e.rotateAngleY&&e.hasOwnProperty("rotateAngleY")&&"number"!=typeof e.rotateAngleY)return"rotateAngleY: number expected";if(null!=e.rotateAngleZ&&e.hasOwnProperty("rotateAngleZ")&&"number"!=typeof e.rotateAngleZ)return"rotateAngleZ: number expected";if(null!=e.scale&&e.hasOwnProperty("scale")&&"number"!=typeof e.scale)return"scale: number expected";if(null!=e.scaleLevel&&e.hasOwnProperty("scaleLevel")&&!Z.isString(e.scaleLevel))return"scaleLevel: string expected";if(null!=e.naviType&&e.hasOwnProperty("naviType")&&!Z.isInteger(e.naviType))return"naviType: integer expected";if(null!=e.layerGroups&&e.hasOwnProperty("layerGroups")){if(!Array.isArray(e.layerGroups))return"layerGroups: array expected";for(let t=0;t<e.layerGroups.length;++t){var i=C.protobuf.Scene.LayerGroup.verify(e.layerGroups[t]);if(i)return"layerGroups."+i}}if(null!=e.buildings&&e.hasOwnProperty("buildings")){if(!Array.isArray(e.buildings))return"buildings: array expected";for(let t=0;t<e.buildings.length;++t){var r=C.protobuf.Scene.Building.verify(e.buildings[t]);if(r)return"buildings."+r}}return null},s.fromObject=function(e){if(e instanceof C.protobuf.Scene)return e;var i=new C.protobuf.Scene;if(null!=e.mid&&(i.mid=String(e.mid)),null!=e.fileVer&&(i.fileVer=0|e.fileVer),null!=e.dateVer&&(Z.Long?(i.dateVer=Z.Long.fromValue(e.dateVer)).unsigned=!0:"string"==typeof e.dateVer?i.dateVer=parseInt(e.dateVer,10):"number"==typeof e.dateVer?i.dateVer=e.dateVer:"object"==typeof e.dateVer&&(i.dateVer=new Z.LongBits(e.dateVer.low>>>0,e.dateVer.high>>>0).toNumber(!0))),null!=e.mname&&(i.mname=String(e.mname)),null!=e.hashCode&&(i.hashCode=String(e.hashCode)),null!=e.key&&(i.key=String(e.key)),null!=e.desc&&(i.desc=String(e.desc)),null!=e.readOnly&&(i.readOnly=Boolean(e.readOnly)),null!=e.x&&(i.x=Number(e.x)),null!=e.y&&(i.y=Number(e.y)),null!=e.z&&(i.z=Number(e.z)),null!=e.minX&&(i.minX=Number(e.minX)),null!=e.minY&&(i.minY=Number(e.minY)),null!=e.maxX&&(i.maxX=Number(e.maxX)),null!=e.maxY&&(i.maxY=Number(e.maxY)),null!=e.defGid&&(i.defGid=String(e.defGid)),null!=e.defCenX&&(i.defCenX=Number(e.defCenX)),null!=e.defCenY&&(i.defCenY=Number(e.defCenY)),null!=e.defCenZ&&(i.defCenZ=Number(e.defCenZ)),null!=e.height&&(i.height=Number(e.height)),null!=e.rotateAngleX&&(i.rotateAngleX=Number(e.rotateAngleX)),null!=e.rotateAngleY&&(i.rotateAngleY=Number(e.rotateAngleY)),null!=e.rotateAngleZ&&(i.rotateAngleZ=Number(e.rotateAngleZ)),null!=e.scale&&(i.scale=Number(e.scale)),null!=e.scaleLevel&&(i.scaleLevel=String(e.scaleLevel)),null!=e.naviType&&(i.naviType=0|e.naviType),e.layerGroups){if(!Array.isArray(e.layerGroups))throw TypeError(".protobuf.Scene.layerGroups: array expected");i.layerGroups=[];for(let t=0;t<e.layerGroups.length;++t){if("object"!=typeof e.layerGroups[t])throw TypeError(".protobuf.Scene.layerGroups: object expected");i.layerGroups[t]=C.protobuf.Scene.LayerGroup.fromObject(e.layerGroups[t])}}if(e.buildings){if(!Array.isArray(e.buildings))throw TypeError(".protobuf.Scene.buildings: array expected");i.buildings=[];for(let t=0;t<e.buildings.length;++t){if("object"!=typeof e.buildings[t])throw TypeError(".protobuf.Scene.buildings: object expected");i.buildings[t]=C.protobuf.Scene.Building.fromObject(e.buildings[t])}}return i},s.toObject=function(e,i){var t,r={};if(((i=i||{}).arrays||i.defaults)&&(r.layerGroups=[],r.buildings=[]),i.defaults&&(r.x=0,r.y=0,r.z=0,r.minX=0,r.minY=0,r.maxX=0,r.maxY=0,r.defGid="",r.defCenX=0,r.defCenY=0,r.defCenZ=0,r.height=0,r.rotateAngleX=0,r.rotateAngleY=0,r.rotateAngleZ=0,r.scale=0,r.scaleLevel="",r.mid="",r.fileVer=0,Z.Long?(t=new Z.Long(0,0,!0),r.dateVer=i.longs===String?t.toString():i.longs===Number?t.toNumber():t):r.dateVer=i.longs===String?"0":0,r.mname="",r.hashCode="",r.key="",r.desc="",r.readOnly=!1,r.naviType=0),null!=e.x&&e.hasOwnProperty("x")&&(r.x=i.json&&!isFinite(e.x)?String(e.x):e.x),null!=e.y&&e.hasOwnProperty("y")&&(r.y=i.json&&!isFinite(e.y)?String(e.y):e.y),null!=e.z&&e.hasOwnProperty("z")&&(r.z=i.json&&!isFinite(e.z)?String(e.z):e.z),null!=e.minX&&e.hasOwnProperty("minX")&&(r.minX=i.json&&!isFinite(e.minX)?String(e.minX):e.minX),null!=e.minY&&e.hasOwnProperty("minY")&&(r.minY=i.json&&!isFinite(e.minY)?String(e.minY):e.minY),null!=e.maxX&&e.hasOwnProperty("maxX")&&(r.maxX=i.json&&!isFinite(e.maxX)?String(e.maxX):e.maxX),null!=e.maxY&&e.hasOwnProperty("maxY")&&(r.maxY=i.json&&!isFinite(e.maxY)?String(e.maxY):e.maxY),null!=e.defGid&&e.hasOwnProperty("defGid")&&(r.defGid=e.defGid),null!=e.defCenX&&e.hasOwnProperty("defCenX")&&(r.defCenX=i.json&&!isFinite(e.defCenX)?String(e.defCenX):e.defCenX),null!=e.defCenY&&e.hasOwnProperty("defCenY")&&(r.defCenY=i.json&&!isFinite(e.defCenY)?String(e.defCenY):e.defCenY),null!=e.defCenZ&&e.hasOwnProperty("defCenZ")&&(r.defCenZ=i.json&&!isFinite(e.defCenZ)?String(e.defCenZ):e.defCenZ),null!=e.height&&e.hasOwnProperty("height")&&(r.height=i.json&&!isFinite(e.height)?String(e.height):e.height),null!=e.rotateAngleX&&e.hasOwnProperty("rotateAngleX")&&(r.rotateAngleX=i.json&&!isFinite(e.rotateAngleX)?String(e.rotateAngleX):e.rotateAngleX),null!=e.rotateAngleY&&e.hasOwnProperty("rotateAngleY")&&(r.rotateAngleY=i.json&&!isFinite(e.rotateAngleY)?String(e.rotateAngleY):e.rotateAngleY),null!=e.rotateAngleZ&&e.hasOwnProperty("rotateAngleZ")&&(r.rotateAngleZ=i.json&&!isFinite(e.rotateAngleZ)?String(e.rotateAngleZ):e.rotateAngleZ),null!=e.scale&&e.hasOwnProperty("scale")&&(r.scale=i.json&&!isFinite(e.scale)?String(e.scale):e.scale),null!=e.scaleLevel&&e.hasOwnProperty("scaleLevel")&&(r.scaleLevel=e.scaleLevel),e.layerGroups&&e.layerGroups.length){r.layerGroups=[];for(let t=0;t<e.layerGroups.length;++t)r.layerGroups[t]=C.protobuf.Scene.LayerGroup.toObject(e.layerGroups[t],i)}if(null!=e.mid&&e.hasOwnProperty("mid")&&(r.mid=e.mid),null!=e.fileVer&&e.hasOwnProperty("fileVer")&&(r.fileVer=e.fileVer),null!=e.dateVer&&e.hasOwnProperty("dateVer")&&("number"==typeof e.dateVer?r.dateVer=i.longs===String?String(e.dateVer):e.dateVer:r.dateVer=i.longs===String?Z.Long.prototype.toString.call(e.dateVer):i.longs===Number?new Z.LongBits(e.dateVer.low>>>0,e.dateVer.high>>>0).toNumber(!0):e.dateVer),null!=e.mname&&e.hasOwnProperty("mname")&&(r.mname=e.mname),null!=e.hashCode&&e.hasOwnProperty("hashCode")&&(r.hashCode=e.hashCode),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.desc&&e.hasOwnProperty("desc")&&(r.desc=e.desc),null!=e.readOnly&&e.hasOwnProperty("readOnly")&&(r.readOnly=e.readOnly),e.buildings&&e.buildings.length){r.buildings=[];for(let t=0;t<e.buildings.length;++t)r.buildings[t]=C.protobuf.Scene.Building.toObject(e.buildings[t],i)}return null!=e.naviType&&e.hasOwnProperty("naviType")&&(r.naviType=e.naviType),r},s.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},s.Layer=(l.prototype.lid=0,l.prototype.lname="",l.prototype.alias="",l.prototype.ltype=1,l.prototype.offsetX=0,l.prototype.offsetY=0,l.prototype.height=0,l.prototype.rotateAngleX=0,l.prototype.rotateAngleY=0,l.prototype.rotateAngleZ=0,l.prototype.minScaleLevel=0,l.prototype.maxScaleLevel=0,l.prototype.isVisible=!1,l.prototype.isSelectable=!1,l.prototype.isEditable=!1,l.prototype.desc="",l.create=function(t){return new l(t)},l.encode=function(t,e){return e=e||B.create(),null!=t.lid&&Object.hasOwnProperty.call(t,"lid")&&e.uint32(8).int32(t.lid),null!=t.lname&&Object.hasOwnProperty.call(t,"lname")&&e.uint32(18).string(t.lname),null!=t.alias&&Object.hasOwnProperty.call(t,"alias")&&e.uint32(26).string(t.alias),null!=t.ltype&&Object.hasOwnProperty.call(t,"ltype")&&e.uint32(32).int32(t.ltype),null!=t.offsetX&&Object.hasOwnProperty.call(t,"offsetX")&&e.uint32(45).float(t.offsetX),null!=t.offsetY&&Object.hasOwnProperty.call(t,"offsetY")&&e.uint32(53).float(t.offsetY),null!=t.height&&Object.hasOwnProperty.call(t,"height")&&e.uint32(61).float(t.height),null!=t.rotateAngleX&&Object.hasOwnProperty.call(t,"rotateAngleX")&&e.uint32(69).float(t.rotateAngleX),null!=t.rotateAngleY&&Object.hasOwnProperty.call(t,"rotateAngleY")&&e.uint32(77).float(t.rotateAngleY),null!=t.rotateAngleZ&&Object.hasOwnProperty.call(t,"rotateAngleZ")&&e.uint32(85).float(t.rotateAngleZ),null!=t.minScaleLevel&&Object.hasOwnProperty.call(t,"minScaleLevel")&&e.uint32(93).float(t.minScaleLevel),null!=t.maxScaleLevel&&Object.hasOwnProperty.call(t,"maxScaleLevel")&&e.uint32(101).float(t.maxScaleLevel),null!=t.isVisible&&Object.hasOwnProperty.call(t,"isVisible")&&e.uint32(104).bool(t.isVisible),null!=t.isSelectable&&Object.hasOwnProperty.call(t,"isSelectable")&&e.uint32(112).bool(t.isSelectable),null!=t.isEditable&&Object.hasOwnProperty.call(t,"isEditable")&&e.uint32(120).bool(t.isEditable),null!=t.desc&&Object.hasOwnProperty.call(t,"desc")&&e.uint32(130).string(t.desc),e},l.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},l.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.Scene.Layer;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.lid=t.int32();break;case 2:r.lname=t.string();break;case 3:r.alias=t.string();break;case 4:r.ltype=t.int32();break;case 5:r.offsetX=t.float();break;case 6:r.offsetY=t.float();break;case 7:r.height=t.float();break;case 8:r.rotateAngleX=t.float();break;case 9:r.rotateAngleY=t.float();break;case 10:r.rotateAngleZ=t.float();break;case 11:r.minScaleLevel=t.float();break;case 12:r.maxScaleLevel=t.float();break;case 13:r.isVisible=t.bool();break;case 14:r.isSelectable=t.bool();break;case 15:r.isEditable=t.bool();break;case 16:r.desc=t.string();break;default:t.skipType(7&n)}}return r},l.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},l.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.lid&&t.hasOwnProperty("lid")&&!Z.isInteger(t.lid))return"lid: integer expected";if(null!=t.lname&&t.hasOwnProperty("lname")&&!Z.isString(t.lname))return"lname: string expected";if(null!=t.alias&&t.hasOwnProperty("alias")&&!Z.isString(t.alias))return"alias: string expected";if(null!=t.ltype&&t.hasOwnProperty("ltype"))switch(t.ltype){default:return"ltype: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 20:case 21:case 22:case 30:case 31:case 32:case 33:case 40:case 50:}return null!=t.offsetX&&t.hasOwnProperty("offsetX")&&"number"!=typeof t.offsetX?"offsetX: number expected":null!=t.offsetY&&t.hasOwnProperty("offsetY")&&"number"!=typeof t.offsetY?"offsetY: number expected":null!=t.height&&t.hasOwnProperty("height")&&"number"!=typeof t.height?"height: number expected":null!=t.rotateAngleX&&t.hasOwnProperty("rotateAngleX")&&"number"!=typeof t.rotateAngleX?"rotateAngleX: number expected":null!=t.rotateAngleY&&t.hasOwnProperty("rotateAngleY")&&"number"!=typeof t.rotateAngleY?"rotateAngleY: number expected":null!=t.rotateAngleZ&&t.hasOwnProperty("rotateAngleZ")&&"number"!=typeof t.rotateAngleZ?"rotateAngleZ: number expected":null!=t.minScaleLevel&&t.hasOwnProperty("minScaleLevel")&&"number"!=typeof t.minScaleLevel?"minScaleLevel: number expected":null!=t.maxScaleLevel&&t.hasOwnProperty("maxScaleLevel")&&"number"!=typeof t.maxScaleLevel?"maxScaleLevel: number expected":null!=t.isVisible&&t.hasOwnProperty("isVisible")&&"boolean"!=typeof t.isVisible?"isVisible: boolean expected":null!=t.isSelectable&&t.hasOwnProperty("isSelectable")&&"boolean"!=typeof t.isSelectable?"isSelectable: boolean expected":null!=t.isEditable&&t.hasOwnProperty("isEditable")&&"boolean"!=typeof t.isEditable?"isEditable: boolean expected":null!=t.desc&&t.hasOwnProperty("desc")&&!Z.isString(t.desc)?"desc: string expected":null},l.fromObject=function(t){if(t instanceof C.protobuf.Scene.Layer)return t;var e=new C.protobuf.Scene.Layer;switch(null!=t.lid&&(e.lid=0|t.lid),null!=t.lname&&(e.lname=String(t.lname)),null!=t.alias&&(e.alias=String(t.alias)),t.ltype){case"GEOPOINT":case 1:e.ltype=1;break;case"GEOPOINT_ESCALATOR":case 2:e.ltype=2;break;case"GEOPOINT_LIFT":case 3:e.ltype=3;break;case"GEOPOINT_STAIR":case 4:e.ltype=4;break;case"GEOPOINT_PANORAMA":case 5:e.ltype=5;break;case"GEOPOINT_POI":case 6:e.ltype=6;break;case"GEOPOINT_STORELABEL":case 7:e.ltype=7;break;case"GEOPOINT_NAVINODE":case 8:e.ltype=8;break;case"GEOPOINT_MODEL":case 9:e.ltype=9;break;case"GEOLINE":case 20:e.ltype=20;break;case"GEOLINE_NAVISEGMENT":case 21:e.ltype=21;break;case"GEOLINE_BORDER":case 22:e.ltype=22;break;case"GEOPOLYGON":case 30:e.ltype=30;break;case"GEOPOLYGON_EXTENT":case 31:e.ltype=31;break;case"GEOPOLYGON_STORE":case 32:e.ltype=32;break;case"GEOPOLYGON_LABEL":case 33:e.ltype=33;break;case"RASTERATA":case 40:e.ltype=40;break;case"OVERLAYDATA":case 50:e.ltype=50}return null!=t.offsetX&&(e.offsetX=Number(t.offsetX)),null!=t.offsetY&&(e.offsetY=Number(t.offsetY)),null!=t.height&&(e.height=Number(t.height)),null!=t.rotateAngleX&&(e.rotateAngleX=Number(t.rotateAngleX)),null!=t.rotateAngleY&&(e.rotateAngleY=Number(t.rotateAngleY)),null!=t.rotateAngleZ&&(e.rotateAngleZ=Number(t.rotateAngleZ)),null!=t.minScaleLevel&&(e.minScaleLevel=Number(t.minScaleLevel)),null!=t.maxScaleLevel&&(e.maxScaleLevel=Number(t.maxScaleLevel)),null!=t.isVisible&&(e.isVisible=Boolean(t.isVisible)),null!=t.isSelectable&&(e.isSelectable=Boolean(t.isSelectable)),null!=t.isEditable&&(e.isEditable=Boolean(t.isEditable)),null!=t.desc&&(e.desc=String(t.desc)),e},l.toObject=function(t,e){var i={};return(e=e||{}).defaults&&(i.lid=0,i.lname="",i.alias="",i.ltype=e.enums===String?"GEOPOINT":1,i.offsetX=0,i.offsetY=0,i.height=0,i.rotateAngleX=0,i.rotateAngleY=0,i.rotateAngleZ=0,i.minScaleLevel=0,i.maxScaleLevel=0,i.isVisible=!1,i.isSelectable=!1,i.isEditable=!1,i.desc=""),null!=t.lid&&t.hasOwnProperty("lid")&&(i.lid=t.lid),null!=t.lname&&t.hasOwnProperty("lname")&&(i.lname=t.lname),null!=t.alias&&t.hasOwnProperty("alias")&&(i.alias=t.alias),null!=t.ltype&&t.hasOwnProperty("ltype")&&(i.ltype=e.enums===String?C.protobuf.Scene.Layer.Type[t.ltype]:t.ltype),null!=t.offsetX&&t.hasOwnProperty("offsetX")&&(i.offsetX=e.json&&!isFinite(t.offsetX)?String(t.offsetX):t.offsetX),null!=t.offsetY&&t.hasOwnProperty("offsetY")&&(i.offsetY=e.json&&!isFinite(t.offsetY)?String(t.offsetY):t.offsetY),null!=t.height&&t.hasOwnProperty("height")&&(i.height=e.json&&!isFinite(t.height)?String(t.height):t.height),null!=t.rotateAngleX&&t.hasOwnProperty("rotateAngleX")&&(i.rotateAngleX=e.json&&!isFinite(t.rotateAngleX)?String(t.rotateAngleX):t.rotateAngleX),null!=t.rotateAngleY&&t.hasOwnProperty("rotateAngleY")&&(i.rotateAngleY=e.json&&!isFinite(t.rotateAngleY)?String(t.rotateAngleY):t.rotateAngleY),null!=t.rotateAngleZ&&t.hasOwnProperty("rotateAngleZ")&&(i.rotateAngleZ=e.json&&!isFinite(t.rotateAngleZ)?String(t.rotateAngleZ):t.rotateAngleZ),null!=t.minScaleLevel&&t.hasOwnProperty("minScaleLevel")&&(i.minScaleLevel=e.json&&!isFinite(t.minScaleLevel)?String(t.minScaleLevel):t.minScaleLevel),null!=t.maxScaleLevel&&t.hasOwnProperty("maxScaleLevel")&&(i.maxScaleLevel=e.json&&!isFinite(t.maxScaleLevel)?String(t.maxScaleLevel):t.maxScaleLevel),null!=t.isVisible&&t.hasOwnProperty("isVisible")&&(i.isVisible=t.isVisible),null!=t.isSelectable&&t.hasOwnProperty("isSelectable")&&(i.isSelectable=t.isSelectable),null!=t.isEditable&&t.hasOwnProperty("isEditable")&&(i.isEditable=t.isEditable),null!=t.desc&&t.hasOwnProperty("desc")&&(i.desc=t.desc),i},l.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},l.Type=(t={},(e=Object.create(t))[t[1]="GEOPOINT"]=1,e[t[2]="GEOPOINT_ESCALATOR"]=2,e[t[3]="GEOPOINT_LIFT"]=3,e[t[4]="GEOPOINT_STAIR"]=4,e[t[5]="GEOPOINT_PANORAMA"]=5,e[t[6]="GEOPOINT_POI"]=6,e[t[7]="GEOPOINT_STORELABEL"]=7,e[t[8]="GEOPOINT_NAVINODE"]=8,e[t[9]="GEOPOINT_MODEL"]=9,e[t[20]="GEOLINE"]=20,e[t[21]="GEOLINE_NAVISEGMENT"]=21,e[t[22]="GEOLINE_BORDER"]=22,e[t[30]="GEOPOLYGON"]=30,e[t[31]="GEOPOLYGON_EXTENT"]=31,e[t[32]="GEOPOLYGON_STORE"]=32,e[t[33]="GEOPOLYGON_LABEL"]=33,e[t[40]="RASTERATA"]=40,e[t[50]="OVERLAYDATA"]=50,e),l),s.LayerGroup=(o.prototype.gid=0,o.prototype.gname="",o.prototype.alias="",o.prototype.height=0,o.prototype.desc="",o.prototype.layers=Z.emptyArray,o.prototype.floorId="",o.prototype.naviType=0,o.create=function(t){return new o(t)},o.encode=function(e,i){if(i=i||B.create(),null!=e.gid&&Object.hasOwnProperty.call(e,"gid")&&i.uint32(8).int32(e.gid),null!=e.gname&&Object.hasOwnProperty.call(e,"gname")&&i.uint32(18).string(e.gname),null!=e.alias&&Object.hasOwnProperty.call(e,"alias")&&i.uint32(26).string(e.alias),null!=e.height&&Object.hasOwnProperty.call(e,"height")&&i.uint32(37).float(e.height),null!=e.desc&&Object.hasOwnProperty.call(e,"desc")&&i.uint32(42).string(e.desc),null!=e.layers&&e.layers.length)for(let t=0;t<e.layers.length;++t)C.protobuf.Scene.Layer.encode(e.layers[t],i.uint32(50).fork()).ldelim();return null!=e.floorId&&Object.hasOwnProperty.call(e,"floorId")&&i.uint32(58).string(e.floorId),null!=e.naviType&&Object.hasOwnProperty.call(e,"naviType")&&i.uint32(64).int32(e.naviType),i},o.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},o.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.Scene.LayerGroup;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.gid=t.int32();break;case 2:r.gname=t.string();break;case 3:r.alias=t.string();break;case 4:r.height=t.float();break;case 5:r.desc=t.string();break;case 6:r.layers&&r.layers.length||(r.layers=[]),r.layers.push(C.protobuf.Scene.Layer.decode(t,t.uint32()));break;case 7:r.floorId=t.string();break;case 8:r.naviType=t.int32();break;default:t.skipType(7&n)}}return r},o.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},o.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.gid&&e.hasOwnProperty("gid")&&!Z.isInteger(e.gid))return"gid: integer expected";if(null!=e.gname&&e.hasOwnProperty("gname")&&!Z.isString(e.gname))return"gname: string expected";if(null!=e.alias&&e.hasOwnProperty("alias")&&!Z.isString(e.alias))return"alias: string expected";if(null!=e.height&&e.hasOwnProperty("height")&&"number"!=typeof e.height)return"height: number expected";if(null!=e.desc&&e.hasOwnProperty("desc")&&!Z.isString(e.desc))return"desc: string expected";if(null!=e.layers&&e.hasOwnProperty("layers")){if(!Array.isArray(e.layers))return"layers: array expected";for(let t=0;t<e.layers.length;++t){var i=C.protobuf.Scene.Layer.verify(e.layers[t]);if(i)return"layers."+i}}return null!=e.floorId&&e.hasOwnProperty("floorId")&&!Z.isString(e.floorId)?"floorId: string expected":null!=e.naviType&&e.hasOwnProperty("naviType")&&!Z.isInteger(e.naviType)?"naviType: integer expected":null},o.fromObject=function(e){if(e instanceof C.protobuf.Scene.LayerGroup)return e;var i=new C.protobuf.Scene.LayerGroup;if(null!=e.gid&&(i.gid=0|e.gid),null!=e.gname&&(i.gname=String(e.gname)),null!=e.alias&&(i.alias=String(e.alias)),null!=e.height&&(i.height=Number(e.height)),null!=e.desc&&(i.desc=String(e.desc)),e.layers){if(!Array.isArray(e.layers))throw TypeError(".protobuf.Scene.LayerGroup.layers: array expected");i.layers=[];for(let t=0;t<e.layers.length;++t){if("object"!=typeof e.layers[t])throw TypeError(".protobuf.Scene.LayerGroup.layers: object expected");i.layers[t]=C.protobuf.Scene.Layer.fromObject(e.layers[t])}}return null!=e.floorId&&(i.floorId=String(e.floorId)),null!=e.naviType&&(i.naviType=0|e.naviType),i},o.toObject=function(e,i){var r={};if(((i=i||{}).arrays||i.defaults)&&(r.layers=[]),i.defaults&&(r.gid=0,r.gname="",r.alias="",r.height=0,r.desc="",r.floorId="",r.naviType=0),null!=e.gid&&e.hasOwnProperty("gid")&&(r.gid=e.gid),null!=e.gname&&e.hasOwnProperty("gname")&&(r.gname=e.gname),null!=e.alias&&e.hasOwnProperty("alias")&&(r.alias=e.alias),null!=e.height&&e.hasOwnProperty("height")&&(r.height=i.json&&!isFinite(e.height)?String(e.height):e.height),null!=e.desc&&e.hasOwnProperty("desc")&&(r.desc=e.desc),e.layers&&e.layers.length){r.layers=[];for(let t=0;t<e.layers.length;++t)r.layers[t]=C.protobuf.Scene.Layer.toObject(e.layers[t],i)}return null!=e.floorId&&e.hasOwnProperty("floorId")&&(r.floorId=e.floorId),null!=e.naviType&&e.hasOwnProperty("naviType")&&(r.naviType=e.naviType),r},o.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},o),s.Floor=(h.prototype.gid=0,h.prototype.x=0,h.prototype.y=0,h.prototype.offsetX=0,h.prototype.offsetY=0,h.prototype.angle=0,h.prototype.scale=0,h.prototype.fids=Z.emptyArray,h.prototype.pgid=0,h.prototype.baseLevel=!1,h.prototype.minlevel=0,h.prototype.maxlevel=0,h.prototype.floorId="",h.prototype.idxs=Z.emptyArray,h.prototype.pts=Z.emptyArray,h.create=function(t){return new h(t)},h.encode=function(e,i){if(i=i||B.create(),null!=e.gid&&Object.hasOwnProperty.call(e,"gid")&&i.uint32(8).int32(e.gid),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&i.uint32(21).float(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&i.uint32(29).float(e.y),null!=e.offsetX&&Object.hasOwnProperty.call(e,"offsetX")&&i.uint32(37).float(e.offsetX),null!=e.offsetY&&Object.hasOwnProperty.call(e,"offsetY")&&i.uint32(45).float(e.offsetY),null!=e.angle&&Object.hasOwnProperty.call(e,"angle")&&i.uint32(53).float(e.angle),null!=e.scale&&Object.hasOwnProperty.call(e,"scale")&&i.uint32(61).float(e.scale),null!=e.fids&&e.fids.length)for(let t=0;t<e.fids.length;++t)i.uint32(66).string(e.fids[t]);if(null!=e.pgid&&Object.hasOwnProperty.call(e,"pgid")&&i.uint32(72).int32(e.pgid),null!=e.baseLevel&&Object.hasOwnProperty.call(e,"baseLevel")&&i.uint32(80).bool(e.baseLevel),null!=e.minlevel&&Object.hasOwnProperty.call(e,"minlevel")&&i.uint32(88).int32(e.minlevel),null!=e.maxlevel&&Object.hasOwnProperty.call(e,"maxlevel")&&i.uint32(96).int32(e.maxlevel),null!=e.floorId&&Object.hasOwnProperty.call(e,"floorId")&&i.uint32(106).string(e.floorId),null!=e.idxs&&e.idxs.length)for(let t=0;t<e.idxs.length;++t)C.protobuf.Scene.Floor.IndexInfo.encode(e.idxs[t],i.uint32(114).fork()).ldelim();if(null!=e.pts&&e.pts.length)for(let t=0;t<e.pts.length;++t)i.uint32(121).double(e.pts[t]);return i},h.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},h.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.Scene.Floor;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.gid=t.int32();break;case 2:r.x=t.float();break;case 3:r.y=t.float();break;case 4:r.offsetX=t.float();break;case 5:r.offsetY=t.float();break;case 6:r.angle=t.float();break;case 7:r.scale=t.float();break;case 8:r.fids&&r.fids.length||(r.fids=[]),r.fids.push(t.string());break;case 9:r.pgid=t.int32();break;case 10:r.baseLevel=t.bool();break;case 11:r.minlevel=t.int32();break;case 12:r.maxlevel=t.int32();break;case 13:r.floorId=t.string();break;case 14:r.idxs&&r.idxs.length||(r.idxs=[]),r.idxs.push(C.protobuf.Scene.Floor.IndexInfo.decode(t,t.uint32()));break;case 15:if(r.pts&&r.pts.length||(r.pts=[]),2==(7&n))for(var s=t.uint32()+t.pos;t.pos<s;)r.pts.push(t.double());else r.pts.push(t.double());break;default:t.skipType(7&n)}}return r},h.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},h.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.gid&&e.hasOwnProperty("gid")&&!Z.isInteger(e.gid))return"gid: integer expected";if(null!=e.x&&e.hasOwnProperty("x")&&"number"!=typeof e.x)return"x: number expected";if(null!=e.y&&e.hasOwnProperty("y")&&"number"!=typeof e.y)return"y: number expected";if(null!=e.offsetX&&e.hasOwnProperty("offsetX")&&"number"!=typeof e.offsetX)return"offsetX: number expected";if(null!=e.offsetY&&e.hasOwnProperty("offsetY")&&"number"!=typeof e.offsetY)return"offsetY: number expected";if(null!=e.angle&&e.hasOwnProperty("angle")&&"number"!=typeof e.angle)return"angle: number expected";if(null!=e.scale&&e.hasOwnProperty("scale")&&"number"!=typeof e.scale)return"scale: number expected";if(null!=e.fids&&e.hasOwnProperty("fids")){if(!Array.isArray(e.fids))return"fids: array expected";for(let t=0;t<e.fids.length;++t)if(!Z.isString(e.fids[t]))return"fids: string[] expected"}if(null!=e.pgid&&e.hasOwnProperty("pgid")&&!Z.isInteger(e.pgid))return"pgid: integer expected";if(null!=e.baseLevel&&e.hasOwnProperty("baseLevel")&&"boolean"!=typeof e.baseLevel)return"baseLevel: boolean expected";if(null!=e.minlevel&&e.hasOwnProperty("minlevel")&&!Z.isInteger(e.minlevel))return"minlevel: integer expected";if(null!=e.maxlevel&&e.hasOwnProperty("maxlevel")&&!Z.isInteger(e.maxlevel))return"maxlevel: integer expected";if(null!=e.floorId&&e.hasOwnProperty("floorId")&&!Z.isString(e.floorId))return"floorId: string expected";if(null!=e.idxs&&e.hasOwnProperty("idxs")){if(!Array.isArray(e.idxs))return"idxs: array expected";for(let t=0;t<e.idxs.length;++t){var i=C.protobuf.Scene.Floor.IndexInfo.verify(e.idxs[t]);if(i)return"idxs."+i}}if(null!=e.pts&&e.hasOwnProperty("pts")){if(!Array.isArray(e.pts))return"pts: array expected";for(let t=0;t<e.pts.length;++t)if("number"!=typeof e.pts[t])return"pts: number[] expected"}return null},h.fromObject=function(e){if(e instanceof C.protobuf.Scene.Floor)return e;var i=new C.protobuf.Scene.Floor;if(null!=e.gid&&(i.gid=0|e.gid),null!=e.x&&(i.x=Number(e.x)),null!=e.y&&(i.y=Number(e.y)),null!=e.offsetX&&(i.offsetX=Number(e.offsetX)),null!=e.offsetY&&(i.offsetY=Number(e.offsetY)),null!=e.angle&&(i.angle=Number(e.angle)),null!=e.scale&&(i.scale=Number(e.scale)),e.fids){if(!Array.isArray(e.fids))throw TypeError(".protobuf.Scene.Floor.fids: array expected");i.fids=[];for(let t=0;t<e.fids.length;++t)i.fids[t]=String(e.fids[t])}if(null!=e.pgid&&(i.pgid=0|e.pgid),null!=e.baseLevel&&(i.baseLevel=Boolean(e.baseLevel)),null!=e.minlevel&&(i.minlevel=0|e.minlevel),null!=e.maxlevel&&(i.maxlevel=0|e.maxlevel),null!=e.floorId&&(i.floorId=String(e.floorId)),e.idxs){if(!Array.isArray(e.idxs))throw TypeError(".protobuf.Scene.Floor.idxs: array expected");i.idxs=[];for(let t=0;t<e.idxs.length;++t){if("object"!=typeof e.idxs[t])throw TypeError(".protobuf.Scene.Floor.idxs: object expected");i.idxs[t]=C.protobuf.Scene.Floor.IndexInfo.fromObject(e.idxs[t])}}if(e.pts){if(!Array.isArray(e.pts))throw TypeError(".protobuf.Scene.Floor.pts: array expected");i.pts=[];for(let t=0;t<e.pts.length;++t)i.pts[t]=Number(e.pts[t])}return i},h.toObject=function(e,i){var r={};if(((i=i||{}).arrays||i.defaults)&&(r.fids=[],r.idxs=[],r.pts=[]),i.defaults&&(r.gid=0,r.x=0,r.y=0,r.offsetX=0,r.offsetY=0,r.angle=0,r.scale=0,r.pgid=0,r.baseLevel=!1,r.minlevel=0,r.maxlevel=0,r.floorId=""),null!=e.gid&&e.hasOwnProperty("gid")&&(r.gid=e.gid),null!=e.x&&e.hasOwnProperty("x")&&(r.x=i.json&&!isFinite(e.x)?String(e.x):e.x),null!=e.y&&e.hasOwnProperty("y")&&(r.y=i.json&&!isFinite(e.y)?String(e.y):e.y),null!=e.offsetX&&e.hasOwnProperty("offsetX")&&(r.offsetX=i.json&&!isFinite(e.offsetX)?String(e.offsetX):e.offsetX),null!=e.offsetY&&e.hasOwnProperty("offsetY")&&(r.offsetY=i.json&&!isFinite(e.offsetY)?String(e.offsetY):e.offsetY),null!=e.angle&&e.hasOwnProperty("angle")&&(r.angle=i.json&&!isFinite(e.angle)?String(e.angle):e.angle),null!=e.scale&&e.hasOwnProperty("scale")&&(r.scale=i.json&&!isFinite(e.scale)?String(e.scale):e.scale),e.fids&&e.fids.length){r.fids=[];for(let t=0;t<e.fids.length;++t)r.fids[t]=e.fids[t]}if(null!=e.pgid&&e.hasOwnProperty("pgid")&&(r.pgid=e.pgid),null!=e.baseLevel&&e.hasOwnProperty("baseLevel")&&(r.baseLevel=e.baseLevel),null!=e.minlevel&&e.hasOwnProperty("minlevel")&&(r.minlevel=e.minlevel),null!=e.maxlevel&&e.hasOwnProperty("maxlevel")&&(r.maxlevel=e.maxlevel),null!=e.floorId&&e.hasOwnProperty("floorId")&&(r.floorId=e.floorId),e.idxs&&e.idxs.length){r.idxs=[];for(let t=0;t<e.idxs.length;++t)r.idxs[t]=C.protobuf.Scene.Floor.IndexInfo.toObject(e.idxs[t],i)}if(e.pts&&e.pts.length){r.pts=[];for(let t=0;t<e.pts.length;++t)r.pts[t]=i.json&&!isFinite(e.pts[t])?String(e.pts[t]):e.pts[t]}return r},h.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},h.IndexInfo=(a.prototype.idxs=Z.emptyArray,a.create=function(t){return new a(t)},a.encode=function(e,i){if(i=i||B.create(),null!=e.idxs&&e.idxs.length)for(let t=0;t<e.idxs.length;++t)i.uint32(8).int32(e.idxs[t]);return i},a.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},a.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.Scene.Floor.IndexInfo;t.pos<i;){var n=t.uint32();if(n>>>3==1)if(r.idxs&&r.idxs.length||(r.idxs=[]),2==(7&n))for(var s=t.uint32()+t.pos;t.pos<s;)r.idxs.push(t.int32());else r.idxs.push(t.int32());else t.skipType(7&n)}return r},a.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},a.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.idxs&&e.hasOwnProperty("idxs")){if(!Array.isArray(e.idxs))return"idxs: array expected";for(let t=0;t<e.idxs.length;++t)if(!Z.isInteger(e.idxs[t]))return"idxs: integer[] expected"}return null},a.fromObject=function(e){if(e instanceof C.protobuf.Scene.Floor.IndexInfo)return e;var i=new C.protobuf.Scene.Floor.IndexInfo;if(e.idxs){if(!Array.isArray(e.idxs))throw TypeError(".protobuf.Scene.Floor.IndexInfo.idxs: array expected");i.idxs=[];for(let t=0;t<e.idxs.length;++t)i.idxs[t]=0|e.idxs[t]}return i},a.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.idxs=[]),e.idxs&&e.idxs.length){i.idxs=[];for(let t=0;t<e.idxs.length;++t)i.idxs[t]=e.idxs[t]}return i},a.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},a),h),s.Building=(u.prototype.bid="",u.prototype.name="",u.prototype.ename="",u.prototype.alias="",u.prototype.x=0,u.prototype.y=0,u.prototype.mid="",u.prototype.version=0,u.prototype.floors=Z.emptyArray,u.prototype.bcode=0,u.create=function(t){return new u(t)},u.encode=function(e,i){if(i=i||B.create(),null!=e.bid&&Object.hasOwnProperty.call(e,"bid")&&i.uint32(10).string(e.bid),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&i.uint32(18).string(e.name),null!=e.ename&&Object.hasOwnProperty.call(e,"ename")&&i.uint32(26).string(e.ename),null!=e.alias&&Object.hasOwnProperty.call(e,"alias")&&i.uint32(34).string(e.alias),null!=e.x&&Object.hasOwnProperty.call(e,"x")&&i.uint32(45).float(e.x),null!=e.y&&Object.hasOwnProperty.call(e,"y")&&i.uint32(53).float(e.y),null!=e.mid&&Object.hasOwnProperty.call(e,"mid")&&i.uint32(58).string(e.mid),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&i.uint32(64).int32(e.version),null!=e.floors&&e.floors.length)for(let t=0;t<e.floors.length;++t)C.protobuf.Scene.Floor.encode(e.floors[t],i.uint32(74).fork()).ldelim();return null!=e.bcode&&Object.hasOwnProperty.call(e,"bcode")&&i.uint32(80).int32(e.bcode),i},u.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},u.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.Scene.Building;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.bid=t.string();break;case 2:r.name=t.string();break;case 3:r.ename=t.string();break;case 4:r.alias=t.string();break;case 5:r.x=t.float();break;case 6:r.y=t.float();break;case 7:r.mid=t.string();break;case 8:r.version=t.int32();break;case 9:r.floors&&r.floors.length||(r.floors=[]),r.floors.push(C.protobuf.Scene.Floor.decode(t,t.uint32()));break;case 10:r.bcode=t.int32();break;default:t.skipType(7&n)}}return r},u.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},u.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.bid&&e.hasOwnProperty("bid")&&!Z.isString(e.bid))return"bid: string expected";if(null!=e.name&&e.hasOwnProperty("name")&&!Z.isString(e.name))return"name: string expected";if(null!=e.ename&&e.hasOwnProperty("ename")&&!Z.isString(e.ename))return"ename: string expected";if(null!=e.alias&&e.hasOwnProperty("alias")&&!Z.isString(e.alias))return"alias: string expected";if(null!=e.x&&e.hasOwnProperty("x")&&"number"!=typeof e.x)return"x: number expected";if(null!=e.y&&e.hasOwnProperty("y")&&"number"!=typeof e.y)return"y: number expected";if(null!=e.mid&&e.hasOwnProperty("mid")&&!Z.isString(e.mid))return"mid: string expected";if(null!=e.version&&e.hasOwnProperty("version")&&!Z.isInteger(e.version))return"version: integer expected";if(null!=e.floors&&e.hasOwnProperty("floors")){if(!Array.isArray(e.floors))return"floors: array expected";for(let t=0;t<e.floors.length;++t){var i=C.protobuf.Scene.Floor.verify(e.floors[t]);if(i)return"floors."+i}}return null!=e.bcode&&e.hasOwnProperty("bcode")&&!Z.isInteger(e.bcode)?"bcode: integer expected":null},u.fromObject=function(e){if(e instanceof C.protobuf.Scene.Building)return e;var i=new C.protobuf.Scene.Building;if(null!=e.bid&&(i.bid=String(e.bid)),null!=e.name&&(i.name=String(e.name)),null!=e.ename&&(i.ename=String(e.ename)),null!=e.alias&&(i.alias=String(e.alias)),null!=e.x&&(i.x=Number(e.x)),null!=e.y&&(i.y=Number(e.y)),null!=e.mid&&(i.mid=String(e.mid)),null!=e.version&&(i.version=0|e.version),e.floors){if(!Array.isArray(e.floors))throw TypeError(".protobuf.Scene.Building.floors: array expected");i.floors=[];for(let t=0;t<e.floors.length;++t){if("object"!=typeof e.floors[t])throw TypeError(".protobuf.Scene.Building.floors: object expected");i.floors[t]=C.protobuf.Scene.Floor.fromObject(e.floors[t])}}return null!=e.bcode&&(i.bcode=0|e.bcode),i},u.toObject=function(e,i){var r={};if(((i=i||{}).arrays||i.defaults)&&(r.floors=[]),i.defaults&&(r.bid="",r.name="",r.ename="",r.alias="",r.x=0,r.y=0,r.mid="",r.version=0,r.bcode=0),null!=e.bid&&e.hasOwnProperty("bid")&&(r.bid=e.bid),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.ename&&e.hasOwnProperty("ename")&&(r.ename=e.ename),null!=e.alias&&e.hasOwnProperty("alias")&&(r.alias=e.alias),null!=e.x&&e.hasOwnProperty("x")&&(r.x=i.json&&!isFinite(e.x)?String(e.x):e.x),null!=e.y&&e.hasOwnProperty("y")&&(r.y=i.json&&!isFinite(e.y)?String(e.y):e.y),null!=e.mid&&e.hasOwnProperty("mid")&&(r.mid=e.mid),null!=e.version&&e.hasOwnProperty("version")&&(r.version=e.version),e.floors&&e.floors.length){r.floors=[];for(let t=0;t<e.floors.length;++t)r.floors[t]=C.protobuf.Scene.Floor.toObject(e.floors[t],i)}return null!=e.bcode&&e.hasOwnProperty("bcode")&&(r.bcode=e.bcode),r},u.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},u),s),i.Gate=(f.prototype.mid="",f.prototype.floors=Z.emptyArray,f.create=function(t){return new f(t)},f.encode=function(e,i){if((i=i||B.create()).uint32(10).string(e.mid),null!=e.floors&&e.floors.length)for(let t=0;t<e.floors.length;++t)C.protobuf.Gate.NaviFloor.encode(e.floors[t],i.uint32(18).fork()).ldelim();return i},f.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},f.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.Gate;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.mid=t.string();break;case 2:r.floors&&r.floors.length||(r.floors=[]),r.floors.push(C.protobuf.Gate.NaviFloor.decode(t,t.uint32()));break;default:t.skipType(7&n)}}if(r.hasOwnProperty("mid"))return r;throw Z.ProtocolError("missing required 'mid'",{instance:r})},f.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},f.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!Z.isString(e.mid))return"mid: string expected";if(null!=e.floors&&e.hasOwnProperty("floors")){if(!Array.isArray(e.floors))return"floors: array expected";for(let t=0;t<e.floors.length;++t){var i=C.protobuf.Gate.NaviFloor.verify(e.floors[t]);if(i)return"floors."+i}}return null},f.fromObject=function(e){if(e instanceof C.protobuf.Gate)return e;var i=new C.protobuf.Gate;if(null!=e.mid&&(i.mid=String(e.mid)),e.floors){if(!Array.isArray(e.floors))throw TypeError(".protobuf.Gate.floors: array expected");i.floors=[];for(let t=0;t<e.floors.length;++t){if("object"!=typeof e.floors[t])throw TypeError(".protobuf.Gate.floors: object expected");i.floors[t]=C.protobuf.Gate.NaviFloor.fromObject(e.floors[t])}}return i},f.toObject=function(e,i){var r={};if(((i=i||{}).arrays||i.defaults)&&(r.floors=[]),i.defaults&&(r.mid=""),null!=e.mid&&e.hasOwnProperty("mid")&&(r.mid=e.mid),e.floors&&e.floors.length){r.floors=[];for(let t=0;t<e.floors.length;++t)r.floors[t]=C.protobuf.Gate.NaviFloor.toObject(e.floors[t],i)}return r},f.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},f.NaviFloor=(c.prototype.gid=0,c.prototype.floorId="",c.prototype.bid="",c.prototype.mid="",c.prototype.navi=Z.emptyArray,c.prototype.drive=Z.emptyArray,c.prototype.accessible=Z.emptyArray,c.create=function(t){return new c(t)},c.encode=function(e,i){if(i=i||B.create(),null!=e.gid&&Object.hasOwnProperty.call(e,"gid")&&i.uint32(8).int32(e.gid),null!=e.floorId&&Object.hasOwnProperty.call(e,"floorId")&&i.uint32(18).string(e.floorId),null!=e.bid&&Object.hasOwnProperty.call(e,"bid")&&i.uint32(26).string(e.bid),null!=e.mid&&Object.hasOwnProperty.call(e,"mid")&&i.uint32(34).string(e.mid),null!=e.navi&&e.navi.length)for(let t=0;t<e.navi.length;++t)C.protobuf.Gate.NaviRelationship.encode(e.navi[t],i.uint32(42).fork()).ldelim();if(null!=e.drive&&e.drive.length)for(let t=0;t<e.drive.length;++t)C.protobuf.Gate.NaviRelationship.encode(e.drive[t],i.uint32(50).fork()).ldelim();if(null!=e.accessible&&e.accessible.length)for(let t=0;t<e.accessible.length;++t)C.protobuf.Gate.NaviRelationship.encode(e.accessible[t],i.uint32(58).fork()).ldelim();return i},c.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},c.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.Gate.NaviFloor;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.gid=t.int32();break;case 2:r.floorId=t.string();break;case 3:r.bid=t.string();break;case 4:r.mid=t.string();break;case 5:r.navi&&r.navi.length||(r.navi=[]),r.navi.push(C.protobuf.Gate.NaviRelationship.decode(t,t.uint32()));break;case 6:r.drive&&r.drive.length||(r.drive=[]),r.drive.push(C.protobuf.Gate.NaviRelationship.decode(t,t.uint32()));break;case 7:r.accessible&&r.accessible.length||(r.accessible=[]),r.accessible.push(C.protobuf.Gate.NaviRelationship.decode(t,t.uint32()));break;default:t.skipType(7&n)}}return r},c.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},c.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.gid&&e.hasOwnProperty("gid")&&!Z.isInteger(e.gid))return"gid: integer expected";if(null!=e.floorId&&e.hasOwnProperty("floorId")&&!Z.isString(e.floorId))return"floorId: string expected";if(null!=e.bid&&e.hasOwnProperty("bid")&&!Z.isString(e.bid))return"bid: string expected";if(null!=e.mid&&e.hasOwnProperty("mid")&&!Z.isString(e.mid))return"mid: string expected";if(null!=e.navi&&e.hasOwnProperty("navi")){if(!Array.isArray(e.navi))return"navi: array expected";for(let t=0;t<e.navi.length;++t){var i=C.protobuf.Gate.NaviRelationship.verify(e.navi[t]);if(i)return"navi."+i}}if(null!=e.drive&&e.hasOwnProperty("drive")){if(!Array.isArray(e.drive))return"drive: array expected";for(let t=0;t<e.drive.length;++t){var r=C.protobuf.Gate.NaviRelationship.verify(e.drive[t]);if(r)return"drive."+r}}if(null!=e.accessible&&e.hasOwnProperty("accessible")){if(!Array.isArray(e.accessible))return"accessible: array expected";for(let t=0;t<e.accessible.length;++t){var n=C.protobuf.Gate.NaviRelationship.verify(e.accessible[t]);if(n)return"accessible."+n}}return null},c.fromObject=function(e){if(e instanceof C.protobuf.Gate.NaviFloor)return e;var i=new C.protobuf.Gate.NaviFloor;if(null!=e.gid&&(i.gid=0|e.gid),null!=e.floorId&&(i.floorId=String(e.floorId)),null!=e.bid&&(i.bid=String(e.bid)),null!=e.mid&&(i.mid=String(e.mid)),e.navi){if(!Array.isArray(e.navi))throw TypeError(".protobuf.Gate.NaviFloor.navi: array expected");i.navi=[];for(let t=0;t<e.navi.length;++t){if("object"!=typeof e.navi[t])throw TypeError(".protobuf.Gate.NaviFloor.navi: object expected");i.navi[t]=C.protobuf.Gate.NaviRelationship.fromObject(e.navi[t])}}if(e.drive){if(!Array.isArray(e.drive))throw TypeError(".protobuf.Gate.NaviFloor.drive: array expected");i.drive=[];for(let t=0;t<e.drive.length;++t){if("object"!=typeof e.drive[t])throw TypeError(".protobuf.Gate.NaviFloor.drive: object expected");i.drive[t]=C.protobuf.Gate.NaviRelationship.fromObject(e.drive[t])}}if(e.accessible){if(!Array.isArray(e.accessible))throw TypeError(".protobuf.Gate.NaviFloor.accessible: array expected");i.accessible=[];for(let t=0;t<e.accessible.length;++t){if("object"!=typeof e.accessible[t])throw TypeError(".protobuf.Gate.NaviFloor.accessible: object expected");i.accessible[t]=C.protobuf.Gate.NaviRelationship.fromObject(e.accessible[t])}}return i},c.toObject=function(e,i){var r={};if(((i=i||{}).arrays||i.defaults)&&(r.navi=[],r.drive=[],r.accessible=[]),i.defaults&&(r.gid=0,r.floorId="",r.bid="",r.mid=""),null!=e.gid&&e.hasOwnProperty("gid")&&(r.gid=e.gid),null!=e.floorId&&e.hasOwnProperty("floorId")&&(r.floorId=e.floorId),null!=e.bid&&e.hasOwnProperty("bid")&&(r.bid=e.bid),null!=e.mid&&e.hasOwnProperty("mid")&&(r.mid=e.mid),e.navi&&e.navi.length){r.navi=[];for(let t=0;t<e.navi.length;++t)r.navi[t]=C.protobuf.Gate.NaviRelationship.toObject(e.navi[t],i)}if(e.drive&&e.drive.length){r.drive=[];for(let t=0;t<e.drive.length;++t)r.drive[t]=C.protobuf.Gate.NaviRelationship.toObject(e.drive[t],i)}if(e.accessible&&e.accessible.length){r.accessible=[];for(let t=0;t<e.accessible.length;++t)r.accessible[t]=C.protobuf.Gate.NaviRelationship.toObject(e.accessible[t],i)}return r},c.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},c),f.NaviRelationship=(d.prototype.eid=0,d.prototype.type=0,d.prototype.accessible=0,d.prototype.idxs=Z.emptyArray,d.prototype.pts=Z.emptyArray,d.prototype.flag=0,d.prototype.toBid=Z.emptyArray,d.prototype.toGid=Z.emptyArray,d.create=function(t){return new d(t)},d.encode=function(e,i){if((i=i||B.create()).uint32(8).int32(e.eid),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&i.uint32(16).int32(e.type),null!=e.accessible&&Object.hasOwnProperty.call(e,"accessible")&&i.uint32(24).int32(e.accessible),null!=e.idxs&&e.idxs.length)for(let t=0;t<e.idxs.length;++t)C.protobuf.Gate.NaviRelationship.IndexInfo.encode(e.idxs[t],i.uint32(34).fork()).ldelim();if(null!=e.pts&&e.pts.length)for(let t=0;t<e.pts.length;++t)i.uint32(41).double(e.pts[t]);if(null!=e.flag&&Object.hasOwnProperty.call(e,"flag")&&i.uint32(48).int32(e.flag),null!=e.toBid&&e.toBid.length)for(let t=0;t<e.toBid.length;++t)i.uint32(58).string(e.toBid[t]);if(null!=e.toGid&&e.toGid.length)for(let t=0;t<e.toGid.length;++t)i.uint32(66).string(e.toGid[t]);return i},d.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},d.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.Gate.NaviRelationship;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.eid=t.int32();break;case 2:r.type=t.int32();break;case 3:r.accessible=t.int32();break;case 4:r.idxs&&r.idxs.length||(r.idxs=[]),r.idxs.push(C.protobuf.Gate.NaviRelationship.IndexInfo.decode(t,t.uint32()));break;case 5:if(r.pts&&r.pts.length||(r.pts=[]),2==(7&n))for(var s=t.uint32()+t.pos;t.pos<s;)r.pts.push(t.double());else r.pts.push(t.double());break;case 6:r.flag=t.int32();break;case 7:r.toBid&&r.toBid.length||(r.toBid=[]),r.toBid.push(t.string());break;case 8:r.toGid&&r.toGid.length||(r.toGid=[]),r.toGid.push(t.string());break;default:t.skipType(7&n)}}if(r.hasOwnProperty("eid"))return r;throw Z.ProtocolError("missing required 'eid'",{instance:r})},d.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},d.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!Z.isInteger(e.eid))return"eid: integer expected";if(null!=e.type&&e.hasOwnProperty("type")&&!Z.isInteger(e.type))return"type: integer expected";if(null!=e.accessible&&e.hasOwnProperty("accessible")&&!Z.isInteger(e.accessible))return"accessible: integer expected";if(null!=e.idxs&&e.hasOwnProperty("idxs")){if(!Array.isArray(e.idxs))return"idxs: array expected";for(let t=0;t<e.idxs.length;++t){var i=C.protobuf.Gate.NaviRelationship.IndexInfo.verify(e.idxs[t]);if(i)return"idxs."+i}}if(null!=e.pts&&e.hasOwnProperty("pts")){if(!Array.isArray(e.pts))return"pts: array expected";for(let t=0;t<e.pts.length;++t)if("number"!=typeof e.pts[t])return"pts: number[] expected"}if(null!=e.flag&&e.hasOwnProperty("flag")&&!Z.isInteger(e.flag))return"flag: integer expected";if(null!=e.toBid&&e.hasOwnProperty("toBid")){if(!Array.isArray(e.toBid))return"toBid: array expected";for(let t=0;t<e.toBid.length;++t)if(!Z.isString(e.toBid[t]))return"toBid: string[] expected"}if(null!=e.toGid&&e.hasOwnProperty("toGid")){if(!Array.isArray(e.toGid))return"toGid: array expected";for(let t=0;t<e.toGid.length;++t)if(!Z.isString(e.toGid[t]))return"toGid: string[] expected"}return null},d.fromObject=function(e){if(e instanceof C.protobuf.Gate.NaviRelationship)return e;var i=new C.protobuf.Gate.NaviRelationship;if(null!=e.eid&&(i.eid=0|e.eid),null!=e.type&&(i.type=0|e.type),null!=e.accessible&&(i.accessible=0|e.accessible),e.idxs){if(!Array.isArray(e.idxs))throw TypeError(".protobuf.Gate.NaviRelationship.idxs: array expected");i.idxs=[];for(let t=0;t<e.idxs.length;++t){if("object"!=typeof e.idxs[t])throw TypeError(".protobuf.Gate.NaviRelationship.idxs: object expected");i.idxs[t]=C.protobuf.Gate.NaviRelationship.IndexInfo.fromObject(e.idxs[t])}}if(e.pts){if(!Array.isArray(e.pts))throw TypeError(".protobuf.Gate.NaviRelationship.pts: array expected");i.pts=[];for(let t=0;t<e.pts.length;++t)i.pts[t]=Number(e.pts[t])}if(null!=e.flag&&(i.flag=0|e.flag),e.toBid){if(!Array.isArray(e.toBid))throw TypeError(".protobuf.Gate.NaviRelationship.toBid: array expected");i.toBid=[];for(let t=0;t<e.toBid.length;++t)i.toBid[t]=String(e.toBid[t])}if(e.toGid){if(!Array.isArray(e.toGid))throw TypeError(".protobuf.Gate.NaviRelationship.toGid: array expected");i.toGid=[];for(let t=0;t<e.toGid.length;++t)i.toGid[t]=String(e.toGid[t])}return i},d.toObject=function(e,i){var r={};if(((i=i||{}).arrays||i.defaults)&&(r.idxs=[],r.pts=[],r.toBid=[],r.toGid=[]),i.defaults&&(r.eid=0,r.type=0,r.accessible=0,r.flag=0),null!=e.eid&&e.hasOwnProperty("eid")&&(r.eid=e.eid),null!=e.type&&e.hasOwnProperty("type")&&(r.type=e.type),null!=e.accessible&&e.hasOwnProperty("accessible")&&(r.accessible=e.accessible),e.idxs&&e.idxs.length){r.idxs=[];for(let t=0;t<e.idxs.length;++t)r.idxs[t]=C.protobuf.Gate.NaviRelationship.IndexInfo.toObject(e.idxs[t],i)}if(e.pts&&e.pts.length){r.pts=[];for(let t=0;t<e.pts.length;++t)r.pts[t]=i.json&&!isFinite(e.pts[t])?String(e.pts[t]):e.pts[t]}if(null!=e.flag&&e.hasOwnProperty("flag")&&(r.flag=e.flag),e.toBid&&e.toBid.length){r.toBid=[];for(let t=0;t<e.toBid.length;++t)r.toBid[t]=e.toBid[t]}if(e.toGid&&e.toGid.length){r.toGid=[];for(let t=0;t<e.toGid.length;++t)r.toGid[t]=e.toGid[t]}return r},d.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},d.IndexInfo=(p.prototype.idxs=Z.emptyArray,p.create=function(t){return new p(t)},p.encode=function(e,i){if(i=i||B.create(),null!=e.idxs&&e.idxs.length)for(let t=0;t<e.idxs.length;++t)i.uint32(8).int32(e.idxs[t]);return i},p.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},p.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.Gate.NaviRelationship.IndexInfo;t.pos<i;){var n=t.uint32();if(n>>>3==1)if(r.idxs&&r.idxs.length||(r.idxs=[]),2==(7&n))for(var s=t.uint32()+t.pos;t.pos<s;)r.idxs.push(t.int32());else r.idxs.push(t.int32());else t.skipType(7&n)}return r},p.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},p.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.idxs&&e.hasOwnProperty("idxs")){if(!Array.isArray(e.idxs))return"idxs: array expected";for(let t=0;t<e.idxs.length;++t)if(!Z.isInteger(e.idxs[t]))return"idxs: integer[] expected"}return null},p.fromObject=function(e){if(e instanceof C.protobuf.Gate.NaviRelationship.IndexInfo)return e;var i=new C.protobuf.Gate.NaviRelationship.IndexInfo;if(e.idxs){if(!Array.isArray(e.idxs))throw TypeError(".protobuf.Gate.NaviRelationship.IndexInfo.idxs: array expected");i.idxs=[];for(let t=0;t<e.idxs.length;++t)i.idxs[t]=0|e.idxs[t]}return i},p.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.idxs=[]),e.idxs&&e.idxs.length){i.idxs=[];for(let t=0;t<e.idxs.length;++t)i.idxs[t]=e.idxs[t]}return i},p.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},p),d),f),i.FloorGeo=(v.prototype.mid="",v.prototype.gid=0,v.prototype.height=0,v.prototype.extentLayer=Z.emptyArray,v.prototype.modelLayer=Z.emptyArray,v.prototype.labelLayer=Z.emptyArray,v.prototype.poiLayer=Z.emptyArray,v.prototype.polygonLayer=Z.emptyArray,v.prototype.polygonLabelLayer=Z.emptyArray,v.prototype.liftLayer=Z.emptyArray,v.prototype.stairLayer=Z.emptyArray,v.prototype.escalatorLayer=Z.emptyArray,v.prototype.externalModelLayer=Z.emptyArray,v.create=function(t){return new v(t)},v.encode=function(e,i){if((i=i||B.create()).uint32(10).string(e.mid),i.uint32(16).int32(e.gid),null!=e.height&&Object.hasOwnProperty.call(e,"height")&&i.uint32(29).float(e.height),null!=e.extentLayer&&e.extentLayer.length)for(let t=0;t<e.extentLayer.length;++t)C.protobuf.FloorGeo.GeneralGeoInfo.encode(e.extentLayer[t],i.uint32(34).fork()).ldelim();if(null!=e.modelLayer&&e.modelLayer.length)for(let t=0;t<e.modelLayer.length;++t)C.protobuf.FloorGeo.GeneralGeoInfo.encode(e.modelLayer[t],i.uint32(42).fork()).ldelim();if(null!=e.labelLayer&&e.labelLayer.length)for(let t=0;t<e.labelLayer.length;++t)C.protobuf.FloorGeo.GeneralGeoInfo.encode(e.labelLayer[t],i.uint32(50).fork()).ldelim();if(null!=e.poiLayer&&e.poiLayer.length)for(let t=0;t<e.poiLayer.length;++t)C.protobuf.FloorGeo.GeneralGeoInfo.encode(e.poiLayer[t],i.uint32(58).fork()).ldelim();if(null!=e.polygonLayer&&e.polygonLayer.length)for(let t=0;t<e.polygonLayer.length;++t)C.protobuf.FloorGeo.GeneralGeoInfo.encode(e.polygonLayer[t],i.uint32(66).fork()).ldelim();if(null!=e.polygonLabelLayer&&e.polygonLabelLayer.length)for(let t=0;t<e.polygonLabelLayer.length;++t)C.protobuf.FloorGeo.GeneralGeoInfo.encode(e.polygonLabelLayer[t],i.uint32(74).fork()).ldelim();if(null!=e.liftLayer&&e.liftLayer.length)for(let t=0;t<e.liftLayer.length;++t)C.protobuf.FloorGeo.GeneralGeoInfo.encode(e.liftLayer[t],i.uint32(82).fork()).ldelim();if(null!=e.stairLayer&&e.stairLayer.length)for(let t=0;t<e.stairLayer.length;++t)C.protobuf.FloorGeo.GeneralGeoInfo.encode(e.stairLayer[t],i.uint32(90).fork()).ldelim();if(null!=e.escalatorLayer&&e.escalatorLayer.length)for(let t=0;t<e.escalatorLayer.length;++t)C.protobuf.FloorGeo.GeneralGeoInfo.encode(e.escalatorLayer[t],i.uint32(98).fork()).ldelim();if(null!=e.externalModelLayer&&e.externalModelLayer.length)for(let t=0;t<e.externalModelLayer.length;++t)C.protobuf.FloorGeo.GeneralGeoInfo.encode(e.externalModelLayer[t],i.uint32(106).fork()).ldelim();return i},v.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},v.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorGeo;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.mid=t.string();break;case 2:r.gid=t.int32();break;case 3:r.height=t.float();break;case 4:r.extentLayer&&r.extentLayer.length||(r.extentLayer=[]),r.extentLayer.push(C.protobuf.FloorGeo.GeneralGeoInfo.decode(t,t.uint32()));break;case 5:r.modelLayer&&r.modelLayer.length||(r.modelLayer=[]),r.modelLayer.push(C.protobuf.FloorGeo.GeneralGeoInfo.decode(t,t.uint32()));break;case 6:r.labelLayer&&r.labelLayer.length||(r.labelLayer=[]),r.labelLayer.push(C.protobuf.FloorGeo.GeneralGeoInfo.decode(t,t.uint32()));break;case 7:r.poiLayer&&r.poiLayer.length||(r.poiLayer=[]),r.poiLayer.push(C.protobuf.FloorGeo.GeneralGeoInfo.decode(t,t.uint32()));break;case 8:r.polygonLayer&&r.polygonLayer.length||(r.polygonLayer=[]),r.polygonLayer.push(C.protobuf.FloorGeo.GeneralGeoInfo.decode(t,t.uint32()));break;case 9:r.polygonLabelLayer&&r.polygonLabelLayer.length||(r.polygonLabelLayer=[]),r.polygonLabelLayer.push(C.protobuf.FloorGeo.GeneralGeoInfo.decode(t,t.uint32()));break;case 10:r.liftLayer&&r.liftLayer.length||(r.liftLayer=[]),r.liftLayer.push(C.protobuf.FloorGeo.GeneralGeoInfo.decode(t,t.uint32()));break;case 11:r.stairLayer&&r.stairLayer.length||(r.stairLayer=[]),r.stairLayer.push(C.protobuf.FloorGeo.GeneralGeoInfo.decode(t,t.uint32()));break;case 12:r.escalatorLayer&&r.escalatorLayer.length||(r.escalatorLayer=[]),r.escalatorLayer.push(C.protobuf.FloorGeo.GeneralGeoInfo.decode(t,t.uint32()));break;case 13:r.externalModelLayer&&r.externalModelLayer.length||(r.externalModelLayer=[]),r.externalModelLayer.push(C.protobuf.FloorGeo.GeneralGeoInfo.decode(t,t.uint32()));break;default:t.skipType(7&n)}}if(!r.hasOwnProperty("mid"))throw Z.ProtocolError("missing required 'mid'",{instance:r});if(r.hasOwnProperty("gid"))return r;throw Z.ProtocolError("missing required 'gid'",{instance:r})},v.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},v.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!Z.isString(e.mid))return"mid: string expected";if(!Z.isInteger(e.gid))return"gid: integer expected";if(null!=e.height&&e.hasOwnProperty("height")&&"number"!=typeof e.height)return"height: number expected";if(null!=e.extentLayer&&e.hasOwnProperty("extentLayer")){if(!Array.isArray(e.extentLayer))return"extentLayer: array expected";for(let t=0;t<e.extentLayer.length;++t){var i=C.protobuf.FloorGeo.GeneralGeoInfo.verify(e.extentLayer[t]);if(i)return"extentLayer."+i}}if(null!=e.modelLayer&&e.hasOwnProperty("modelLayer")){if(!Array.isArray(e.modelLayer))return"modelLayer: array expected";for(let t=0;t<e.modelLayer.length;++t){var r=C.protobuf.FloorGeo.GeneralGeoInfo.verify(e.modelLayer[t]);if(r)return"modelLayer."+r}}if(null!=e.labelLayer&&e.hasOwnProperty("labelLayer")){if(!Array.isArray(e.labelLayer))return"labelLayer: array expected";for(let t=0;t<e.labelLayer.length;++t){var n=C.protobuf.FloorGeo.GeneralGeoInfo.verify(e.labelLayer[t]);if(n)return"labelLayer."+n}}if(null!=e.poiLayer&&e.hasOwnProperty("poiLayer")){if(!Array.isArray(e.poiLayer))return"poiLayer: array expected";for(let t=0;t<e.poiLayer.length;++t){var s=C.protobuf.FloorGeo.GeneralGeoInfo.verify(e.poiLayer[t]);if(s)return"poiLayer."+s}}if(null!=e.polygonLayer&&e.hasOwnProperty("polygonLayer")){if(!Array.isArray(e.polygonLayer))return"polygonLayer: array expected";for(let t=0;t<e.polygonLayer.length;++t){var l=C.protobuf.FloorGeo.GeneralGeoInfo.verify(e.polygonLayer[t]);if(l)return"polygonLayer."+l}}if(null!=e.polygonLabelLayer&&e.hasOwnProperty("polygonLabelLayer")){if(!Array.isArray(e.polygonLabelLayer))return"polygonLabelLayer: array expected";for(let t=0;t<e.polygonLabelLayer.length;++t){var o=C.protobuf.FloorGeo.GeneralGeoInfo.verify(e.polygonLabelLayer[t]);if(o)return"polygonLabelLayer."+o}}if(null!=e.liftLayer&&e.hasOwnProperty("liftLayer")){if(!Array.isArray(e.liftLayer))return"liftLayer: array expected";for(let t=0;t<e.liftLayer.length;++t){var h=C.protobuf.FloorGeo.GeneralGeoInfo.verify(e.liftLayer[t]);if(h)return"liftLayer."+h}}if(null!=e.stairLayer&&e.hasOwnProperty("stairLayer")){if(!Array.isArray(e.stairLayer))return"stairLayer: array expected";for(let t=0;t<e.stairLayer.length;++t){var a=C.protobuf.FloorGeo.GeneralGeoInfo.verify(e.stairLayer[t]);if(a)return"stairLayer."+a}}if(null!=e.escalatorLayer&&e.hasOwnProperty("escalatorLayer")){if(!Array.isArray(e.escalatorLayer))return"escalatorLayer: array expected";for(let t=0;t<e.escalatorLayer.length;++t){var u=C.protobuf.FloorGeo.GeneralGeoInfo.verify(e.escalatorLayer[t]);if(u)return"escalatorLayer."+u}}if(null!=e.externalModelLayer&&e.hasOwnProperty("externalModelLayer")){if(!Array.isArray(e.externalModelLayer))return"externalModelLayer: array expected";for(let t=0;t<e.externalModelLayer.length;++t){var f=C.protobuf.FloorGeo.GeneralGeoInfo.verify(e.externalModelLayer[t]);if(f)return"externalModelLayer."+f}}return null},v.fromObject=function(e){if(e instanceof C.protobuf.FloorGeo)return e;var i=new C.protobuf.FloorGeo;if(null!=e.mid&&(i.mid=String(e.mid)),null!=e.gid&&(i.gid=0|e.gid),null!=e.height&&(i.height=Number(e.height)),e.extentLayer){if(!Array.isArray(e.extentLayer))throw TypeError(".protobuf.FloorGeo.extentLayer: array expected");i.extentLayer=[];for(let t=0;t<e.extentLayer.length;++t){if("object"!=typeof e.extentLayer[t])throw TypeError(".protobuf.FloorGeo.extentLayer: object expected");i.extentLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.fromObject(e.extentLayer[t])}}if(e.modelLayer){if(!Array.isArray(e.modelLayer))throw TypeError(".protobuf.FloorGeo.modelLayer: array expected");i.modelLayer=[];for(let t=0;t<e.modelLayer.length;++t){if("object"!=typeof e.modelLayer[t])throw TypeError(".protobuf.FloorGeo.modelLayer: object expected");i.modelLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.fromObject(e.modelLayer[t])}}if(e.labelLayer){if(!Array.isArray(e.labelLayer))throw TypeError(".protobuf.FloorGeo.labelLayer: array expected");i.labelLayer=[];for(let t=0;t<e.labelLayer.length;++t){if("object"!=typeof e.labelLayer[t])throw TypeError(".protobuf.FloorGeo.labelLayer: object expected");i.labelLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.fromObject(e.labelLayer[t])}}if(e.poiLayer){if(!Array.isArray(e.poiLayer))throw TypeError(".protobuf.FloorGeo.poiLayer: array expected");i.poiLayer=[];for(let t=0;t<e.poiLayer.length;++t){if("object"!=typeof e.poiLayer[t])throw TypeError(".protobuf.FloorGeo.poiLayer: object expected");i.poiLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.fromObject(e.poiLayer[t])}}if(e.polygonLayer){if(!Array.isArray(e.polygonLayer))throw TypeError(".protobuf.FloorGeo.polygonLayer: array expected");i.polygonLayer=[];for(let t=0;t<e.polygonLayer.length;++t){if("object"!=typeof e.polygonLayer[t])throw TypeError(".protobuf.FloorGeo.polygonLayer: object expected");i.polygonLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.fromObject(e.polygonLayer[t])}}if(e.polygonLabelLayer){if(!Array.isArray(e.polygonLabelLayer))throw TypeError(".protobuf.FloorGeo.polygonLabelLayer: array expected");i.polygonLabelLayer=[];for(let t=0;t<e.polygonLabelLayer.length;++t){if("object"!=typeof e.polygonLabelLayer[t])throw TypeError(".protobuf.FloorGeo.polygonLabelLayer: object expected");i.polygonLabelLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.fromObject(e.polygonLabelLayer[t])}}if(e.liftLayer){if(!Array.isArray(e.liftLayer))throw TypeError(".protobuf.FloorGeo.liftLayer: array expected");i.liftLayer=[];for(let t=0;t<e.liftLayer.length;++t){if("object"!=typeof e.liftLayer[t])throw TypeError(".protobuf.FloorGeo.liftLayer: object expected");i.liftLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.fromObject(e.liftLayer[t])}}if(e.stairLayer){if(!Array.isArray(e.stairLayer))throw TypeError(".protobuf.FloorGeo.stairLayer: array expected");i.stairLayer=[];for(let t=0;t<e.stairLayer.length;++t){if("object"!=typeof e.stairLayer[t])throw TypeError(".protobuf.FloorGeo.stairLayer: object expected");i.stairLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.fromObject(e.stairLayer[t])}}if(e.escalatorLayer){if(!Array.isArray(e.escalatorLayer))throw TypeError(".protobuf.FloorGeo.escalatorLayer: array expected");i.escalatorLayer=[];for(let t=0;t<e.escalatorLayer.length;++t){if("object"!=typeof e.escalatorLayer[t])throw TypeError(".protobuf.FloorGeo.escalatorLayer: object expected");i.escalatorLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.fromObject(e.escalatorLayer[t])}}if(e.externalModelLayer){if(!Array.isArray(e.externalModelLayer))throw TypeError(".protobuf.FloorGeo.externalModelLayer: array expected");i.externalModelLayer=[];for(let t=0;t<e.externalModelLayer.length;++t){if("object"!=typeof e.externalModelLayer[t])throw TypeError(".protobuf.FloorGeo.externalModelLayer: object expected");i.externalModelLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.fromObject(e.externalModelLayer[t])}}return i},v.toObject=function(e,i){var r={};if(((i=i||{}).arrays||i.defaults)&&(r.extentLayer=[],r.modelLayer=[],r.labelLayer=[],r.poiLayer=[],r.polygonLayer=[],r.polygonLabelLayer=[],r.liftLayer=[],r.stairLayer=[],r.escalatorLayer=[],r.externalModelLayer=[]),i.defaults&&(r.mid="",r.gid=0,r.height=0),null!=e.mid&&e.hasOwnProperty("mid")&&(r.mid=e.mid),null!=e.gid&&e.hasOwnProperty("gid")&&(r.gid=e.gid),null!=e.height&&e.hasOwnProperty("height")&&(r.height=i.json&&!isFinite(e.height)?String(e.height):e.height),e.extentLayer&&e.extentLayer.length){r.extentLayer=[];for(let t=0;t<e.extentLayer.length;++t)r.extentLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.toObject(e.extentLayer[t],i)}if(e.modelLayer&&e.modelLayer.length){r.modelLayer=[];for(let t=0;t<e.modelLayer.length;++t)r.modelLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.toObject(e.modelLayer[t],i)}if(e.labelLayer&&e.labelLayer.length){r.labelLayer=[];for(let t=0;t<e.labelLayer.length;++t)r.labelLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.toObject(e.labelLayer[t],i)}if(e.poiLayer&&e.poiLayer.length){r.poiLayer=[];for(let t=0;t<e.poiLayer.length;++t)r.poiLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.toObject(e.poiLayer[t],i)}if(e.polygonLayer&&e.polygonLayer.length){r.polygonLayer=[];for(let t=0;t<e.polygonLayer.length;++t)r.polygonLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.toObject(e.polygonLayer[t],i)}if(e.polygonLabelLayer&&e.polygonLabelLayer.length){r.polygonLabelLayer=[];for(let t=0;t<e.polygonLabelLayer.length;++t)r.polygonLabelLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.toObject(e.polygonLabelLayer[t],i)}if(e.liftLayer&&e.liftLayer.length){r.liftLayer=[];for(let t=0;t<e.liftLayer.length;++t)r.liftLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.toObject(e.liftLayer[t],i)}if(e.stairLayer&&e.stairLayer.length){r.stairLayer=[];for(let t=0;t<e.stairLayer.length;++t)r.stairLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.toObject(e.stairLayer[t],i)}if(e.escalatorLayer&&e.escalatorLayer.length){r.escalatorLayer=[];for(let t=0;t<e.escalatorLayer.length;++t)r.escalatorLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.toObject(e.escalatorLayer[t],i)}if(e.externalModelLayer&&e.externalModelLayer.length){r.externalModelLayer=[];for(let t=0;t<e.externalModelLayer.length;++t)r.externalModelLayer[t]=C.protobuf.FloorGeo.GeneralGeoInfo.toObject(e.externalModelLayer[t],i)}return r},v.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},v.GeneralGeoInfo=(b.prototype.eid=0,b.prototype.geo="",b.prototype.height=0,b.prototype.area=0,b.prototype.idxs=Z.emptyArray,b.prototype.pts=Z.emptyArray,b.create=function(t){return new b(t)},b.encode=function(e,i){if((i=i||B.create()).uint32(8).int32(e.eid),null!=e.geo&&Object.hasOwnProperty.call(e,"geo")&&i.uint32(18).string(e.geo),null!=e.height&&Object.hasOwnProperty.call(e,"height")&&i.uint32(29).float(e.height),null!=e.area&&Object.hasOwnProperty.call(e,"area")&&i.uint32(37).float(e.area),null!=e.idxs&&e.idxs.length)for(let t=0;t<e.idxs.length;++t)C.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo.encode(e.idxs[t],i.uint32(42).fork()).ldelim();if(null!=e.pts&&e.pts.length)for(let t=0;t<e.pts.length;++t)i.uint32(49).double(e.pts[t]);return i},b.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},b.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorGeo.GeneralGeoInfo;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.eid=t.int32();break;case 2:r.geo=t.string();break;case 3:r.height=t.float();break;case 4:r.area=t.float();break;case 5:r.idxs&&r.idxs.length||(r.idxs=[]),r.idxs.push(C.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo.decode(t,t.uint32()));break;case 6:if(r.pts&&r.pts.length||(r.pts=[]),2==(7&n))for(var s=t.uint32()+t.pos;t.pos<s;)r.pts.push(t.double());else r.pts.push(t.double());break;default:t.skipType(7&n)}}if(r.hasOwnProperty("eid"))return r;throw Z.ProtocolError("missing required 'eid'",{instance:r})},b.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},b.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!Z.isInteger(e.eid))return"eid: integer expected";if(null!=e.geo&&e.hasOwnProperty("geo")&&!Z.isString(e.geo))return"geo: string expected";if(null!=e.height&&e.hasOwnProperty("height")&&"number"!=typeof e.height)return"height: number expected";if(null!=e.area&&e.hasOwnProperty("area")&&"number"!=typeof e.area)return"area: number expected";if(null!=e.idxs&&e.hasOwnProperty("idxs")){if(!Array.isArray(e.idxs))return"idxs: array expected";for(let t=0;t<e.idxs.length;++t){var i=C.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo.verify(e.idxs[t]);if(i)return"idxs."+i}}if(null!=e.pts&&e.hasOwnProperty("pts")){if(!Array.isArray(e.pts))return"pts: array expected";for(let t=0;t<e.pts.length;++t)if("number"!=typeof e.pts[t])return"pts: number[] expected"}return null},b.fromObject=function(e){if(e instanceof C.protobuf.FloorGeo.GeneralGeoInfo)return e;var i=new C.protobuf.FloorGeo.GeneralGeoInfo;if(null!=e.eid&&(i.eid=0|e.eid),null!=e.geo&&(i.geo=String(e.geo)),null!=e.height&&(i.height=Number(e.height)),null!=e.area&&(i.area=Number(e.area)),e.idxs){if(!Array.isArray(e.idxs))throw TypeError(".protobuf.FloorGeo.GeneralGeoInfo.idxs: array expected");i.idxs=[];for(let t=0;t<e.idxs.length;++t){if("object"!=typeof e.idxs[t])throw TypeError(".protobuf.FloorGeo.GeneralGeoInfo.idxs: object expected");i.idxs[t]=C.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo.fromObject(e.idxs[t])}}if(e.pts){if(!Array.isArray(e.pts))throw TypeError(".protobuf.FloorGeo.GeneralGeoInfo.pts: array expected");i.pts=[];for(let t=0;t<e.pts.length;++t)i.pts[t]=Number(e.pts[t])}return i},b.toObject=function(e,i){var r={};if(((i=i||{}).arrays||i.defaults)&&(r.idxs=[],r.pts=[]),i.defaults&&(r.eid=0,r.geo="",r.height=0,r.area=0),null!=e.eid&&e.hasOwnProperty("eid")&&(r.eid=e.eid),null!=e.geo&&e.hasOwnProperty("geo")&&(r.geo=e.geo),null!=e.height&&e.hasOwnProperty("height")&&(r.height=i.json&&!isFinite(e.height)?String(e.height):e.height),null!=e.area&&e.hasOwnProperty("area")&&(r.area=i.json&&!isFinite(e.area)?String(e.area):e.area),e.idxs&&e.idxs.length){r.idxs=[];for(let t=0;t<e.idxs.length;++t)r.idxs[t]=C.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo.toObject(e.idxs[t],i)}if(e.pts&&e.pts.length){r.pts=[];for(let t=0;t<e.pts.length;++t)r.pts[t]=i.json&&!isFinite(e.pts[t])?String(e.pts[t]):e.pts[t]}return r},b.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},b.IndexInfo=(y.prototype.idxs=Z.emptyArray,y.create=function(t){return new y(t)},y.encode=function(e,i){if(i=i||B.create(),null!=e.idxs&&e.idxs.length)for(let t=0;t<e.idxs.length;++t)i.uint32(8).int32(e.idxs[t]);return i},y.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},y.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo;t.pos<i;){var n=t.uint32();if(n>>>3==1)if(r.idxs&&r.idxs.length||(r.idxs=[]),2==(7&n))for(var s=t.uint32()+t.pos;t.pos<s;)r.idxs.push(t.int32());else r.idxs.push(t.int32());else t.skipType(7&n)}return r},y.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},y.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.idxs&&e.hasOwnProperty("idxs")){if(!Array.isArray(e.idxs))return"idxs: array expected";for(let t=0;t<e.idxs.length;++t)if(!Z.isInteger(e.idxs[t]))return"idxs: integer[] expected"}return null},y.fromObject=function(e){if(e instanceof C.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo)return e;var i=new C.protobuf.FloorGeo.GeneralGeoInfo.IndexInfo;if(e.idxs){if(!Array.isArray(e.idxs))throw TypeError(".protobuf.FloorGeo.GeneralGeoInfo.IndexInfo.idxs: array expected");i.idxs=[];for(let t=0;t<e.idxs.length;++t)i.idxs[t]=0|e.idxs[t]}return i},y.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.idxs=[]),e.idxs&&e.idxs.length){i.idxs=[];for(let t=0;t<e.idxs.length;++t)i.idxs[t]=e.idxs[t]}return i},y.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},y),b),v),i.FloorBiz=(g.prototype.mid="",g.prototype.gid=0,g.prototype.extentLayer=Z.emptyArray,g.prototype.modelLayer=Z.emptyArray,g.prototype.labelLayer=Z.emptyArray,g.prototype.poiLayer=Z.emptyArray,g.prototype.polygonLayer=Z.emptyArray,g.prototype.liftLayer=Z.emptyArray,g.prototype.stairLayer=Z.emptyArray,g.prototype.polygonLabelLayer=Z.emptyArray,g.prototype.externalModelLayer=Z.emptyArray,g.create=function(t){return new g(t)},g.encode=function(e,i){if((i=i||B.create()).uint32(10).string(e.mid),i.uint32(16).int32(e.gid),null!=e.extentLayer&&e.extentLayer.length)for(let t=0;t<e.extentLayer.length;++t)C.protobuf.FloorBiz.ExtentBizInfo.encode(e.extentLayer[t],i.uint32(26).fork()).ldelim();if(null!=e.modelLayer&&e.modelLayer.length)for(let t=0;t<e.modelLayer.length;++t)C.protobuf.FloorBiz.ModelBizInfo.encode(e.modelLayer[t],i.uint32(34).fork()).ldelim();if(null!=e.labelLayer&&e.labelLayer.length)for(let t=0;t<e.labelLayer.length;++t)C.protobuf.FloorBiz.LabelBizInfo.encode(e.labelLayer[t],i.uint32(42).fork()).ldelim();if(null!=e.poiLayer&&e.poiLayer.length)for(let t=0;t<e.poiLayer.length;++t)C.protobuf.FloorBiz.POIBizInfo.encode(e.poiLayer[t],i.uint32(50).fork()).ldelim();if(null!=e.polygonLayer&&e.polygonLayer.length)for(let t=0;t<e.polygonLayer.length;++t)C.protobuf.FloorBiz.PolygonBizInfo.encode(e.polygonLayer[t],i.uint32(58).fork()).ldelim();if(null!=e.liftLayer&&e.liftLayer.length)for(let t=0;t<e.liftLayer.length;++t)C.protobuf.FloorBiz.LiftBizInfo.encode(e.liftLayer[t],i.uint32(66).fork()).ldelim();if(null!=e.stairLayer&&e.stairLayer.length)for(let t=0;t<e.stairLayer.length;++t)C.protobuf.FloorBiz.StairBizInfo.encode(e.stairLayer[t],i.uint32(74).fork()).ldelim();if(null!=e.polygonLabelLayer&&e.polygonLabelLayer.length)for(let t=0;t<e.polygonLabelLayer.length;++t)C.protobuf.FloorBiz.PolygonLabelBizInfo.encode(e.polygonLabelLayer[t],i.uint32(82).fork()).ldelim();if(null!=e.externalModelLayer&&e.externalModelLayer.length)for(let t=0;t<e.externalModelLayer.length;++t)C.protobuf.FloorBiz.ExternalModelBizInfo.encode(e.externalModelLayer[t],i.uint32(90).fork()).ldelim();return i},g.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},g.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorBiz;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.mid=t.string();break;case 2:r.gid=t.int32();break;case 3:r.extentLayer&&r.extentLayer.length||(r.extentLayer=[]),r.extentLayer.push(C.protobuf.FloorBiz.ExtentBizInfo.decode(t,t.uint32()));break;case 4:r.modelLayer&&r.modelLayer.length||(r.modelLayer=[]),r.modelLayer.push(C.protobuf.FloorBiz.ModelBizInfo.decode(t,t.uint32()));break;case 5:r.labelLayer&&r.labelLayer.length||(r.labelLayer=[]),r.labelLayer.push(C.protobuf.FloorBiz.LabelBizInfo.decode(t,t.uint32()));break;case 6:r.poiLayer&&r.poiLayer.length||(r.poiLayer=[]),r.poiLayer.push(C.protobuf.FloorBiz.POIBizInfo.decode(t,t.uint32()));break;case 7:r.polygonLayer&&r.polygonLayer.length||(r.polygonLayer=[]),r.polygonLayer.push(C.protobuf.FloorBiz.PolygonBizInfo.decode(t,t.uint32()));break;case 8:r.liftLayer&&r.liftLayer.length||(r.liftLayer=[]),r.liftLayer.push(C.protobuf.FloorBiz.LiftBizInfo.decode(t,t.uint32()));break;case 9:r.stairLayer&&r.stairLayer.length||(r.stairLayer=[]),r.stairLayer.push(C.protobuf.FloorBiz.StairBizInfo.decode(t,t.uint32()));break;case 10:r.polygonLabelLayer&&r.polygonLabelLayer.length||(r.polygonLabelLayer=[]),r.polygonLabelLayer.push(C.protobuf.FloorBiz.PolygonLabelBizInfo.decode(t,t.uint32()));break;case 11:r.externalModelLayer&&r.externalModelLayer.length||(r.externalModelLayer=[]),r.externalModelLayer.push(C.protobuf.FloorBiz.ExternalModelBizInfo.decode(t,t.uint32()));break;default:t.skipType(7&n)}}if(!r.hasOwnProperty("mid"))throw Z.ProtocolError("missing required 'mid'",{instance:r});if(r.hasOwnProperty("gid"))return r;throw Z.ProtocolError("missing required 'gid'",{instance:r})},g.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},g.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!Z.isString(e.mid))return"mid: string expected";if(!Z.isInteger(e.gid))return"gid: integer expected";if(null!=e.extentLayer&&e.hasOwnProperty("extentLayer")){if(!Array.isArray(e.extentLayer))return"extentLayer: array expected";for(let t=0;t<e.extentLayer.length;++t){var i=C.protobuf.FloorBiz.ExtentBizInfo.verify(e.extentLayer[t]);if(i)return"extentLayer."+i}}if(null!=e.modelLayer&&e.hasOwnProperty("modelLayer")){if(!Array.isArray(e.modelLayer))return"modelLayer: array expected";for(let t=0;t<e.modelLayer.length;++t){var r=C.protobuf.FloorBiz.ModelBizInfo.verify(e.modelLayer[t]);if(r)return"modelLayer."+r}}if(null!=e.labelLayer&&e.hasOwnProperty("labelLayer")){if(!Array.isArray(e.labelLayer))return"labelLayer: array expected";for(let t=0;t<e.labelLayer.length;++t){var n=C.protobuf.FloorBiz.LabelBizInfo.verify(e.labelLayer[t]);if(n)return"labelLayer."+n}}if(null!=e.poiLayer&&e.hasOwnProperty("poiLayer")){if(!Array.isArray(e.poiLayer))return"poiLayer: array expected";for(let t=0;t<e.poiLayer.length;++t){var s=C.protobuf.FloorBiz.POIBizInfo.verify(e.poiLayer[t]);if(s)return"poiLayer."+s}}if(null!=e.polygonLayer&&e.hasOwnProperty("polygonLayer")){if(!Array.isArray(e.polygonLayer))return"polygonLayer: array expected";for(let t=0;t<e.polygonLayer.length;++t){var l=C.protobuf.FloorBiz.PolygonBizInfo.verify(e.polygonLayer[t]);if(l)return"polygonLayer."+l}}if(null!=e.liftLayer&&e.hasOwnProperty("liftLayer")){if(!Array.isArray(e.liftLayer))return"liftLayer: array expected";for(let t=0;t<e.liftLayer.length;++t){var o=C.protobuf.FloorBiz.LiftBizInfo.verify(e.liftLayer[t]);if(o)return"liftLayer."+o}}if(null!=e.stairLayer&&e.hasOwnProperty("stairLayer")){if(!Array.isArray(e.stairLayer))return"stairLayer: array expected";for(let t=0;t<e.stairLayer.length;++t){var h=C.protobuf.FloorBiz.StairBizInfo.verify(e.stairLayer[t]);if(h)return"stairLayer."+h}}if(null!=e.polygonLabelLayer&&e.hasOwnProperty("polygonLabelLayer")){if(!Array.isArray(e.polygonLabelLayer))return"polygonLabelLayer: array expected";for(let t=0;t<e.polygonLabelLayer.length;++t){var a=C.protobuf.FloorBiz.PolygonLabelBizInfo.verify(e.polygonLabelLayer[t]);if(a)return"polygonLabelLayer."+a}}if(null!=e.externalModelLayer&&e.hasOwnProperty("externalModelLayer")){if(!Array.isArray(e.externalModelLayer))return"externalModelLayer: array expected";for(let t=0;t<e.externalModelLayer.length;++t){var u=C.protobuf.FloorBiz.ExternalModelBizInfo.verify(e.externalModelLayer[t]);if(u)return"externalModelLayer."+u}}return null},g.fromObject=function(e){if(e instanceof C.protobuf.FloorBiz)return e;var i=new C.protobuf.FloorBiz;if(null!=e.mid&&(i.mid=String(e.mid)),null!=e.gid&&(i.gid=0|e.gid),e.extentLayer){if(!Array.isArray(e.extentLayer))throw TypeError(".protobuf.FloorBiz.extentLayer: array expected");i.extentLayer=[];for(let t=0;t<e.extentLayer.length;++t){if("object"!=typeof e.extentLayer[t])throw TypeError(".protobuf.FloorBiz.extentLayer: object expected");i.extentLayer[t]=C.protobuf.FloorBiz.ExtentBizInfo.fromObject(e.extentLayer[t])}}if(e.modelLayer){if(!Array.isArray(e.modelLayer))throw TypeError(".protobuf.FloorBiz.modelLayer: array expected");i.modelLayer=[];for(let t=0;t<e.modelLayer.length;++t){if("object"!=typeof e.modelLayer[t])throw TypeError(".protobuf.FloorBiz.modelLayer: object expected");i.modelLayer[t]=C.protobuf.FloorBiz.ModelBizInfo.fromObject(e.modelLayer[t])}}if(e.labelLayer){if(!Array.isArray(e.labelLayer))throw TypeError(".protobuf.FloorBiz.labelLayer: array expected");i.labelLayer=[];for(let t=0;t<e.labelLayer.length;++t){if("object"!=typeof e.labelLayer[t])throw TypeError(".protobuf.FloorBiz.labelLayer: object expected");i.labelLayer[t]=C.protobuf.FloorBiz.LabelBizInfo.fromObject(e.labelLayer[t])}}if(e.poiLayer){if(!Array.isArray(e.poiLayer))throw TypeError(".protobuf.FloorBiz.poiLayer: array expected");i.poiLayer=[];for(let t=0;t<e.poiLayer.length;++t){if("object"!=typeof e.poiLayer[t])throw TypeError(".protobuf.FloorBiz.poiLayer: object expected");i.poiLayer[t]=C.protobuf.FloorBiz.POIBizInfo.fromObject(e.poiLayer[t])}}if(e.polygonLayer){if(!Array.isArray(e.polygonLayer))throw TypeError(".protobuf.FloorBiz.polygonLayer: array expected");i.polygonLayer=[];for(let t=0;t<e.polygonLayer.length;++t){if("object"!=typeof e.polygonLayer[t])throw TypeError(".protobuf.FloorBiz.polygonLayer: object expected");i.polygonLayer[t]=C.protobuf.FloorBiz.PolygonBizInfo.fromObject(e.polygonLayer[t])}}if(e.liftLayer){if(!Array.isArray(e.liftLayer))throw TypeError(".protobuf.FloorBiz.liftLayer: array expected");i.liftLayer=[];for(let t=0;t<e.liftLayer.length;++t){if("object"!=typeof e.liftLayer[t])throw TypeError(".protobuf.FloorBiz.liftLayer: object expected");i.liftLayer[t]=C.protobuf.FloorBiz.LiftBizInfo.fromObject(e.liftLayer[t])}}if(e.stairLayer){if(!Array.isArray(e.stairLayer))throw TypeError(".protobuf.FloorBiz.stairLayer: array expected");i.stairLayer=[];for(let t=0;t<e.stairLayer.length;++t){if("object"!=typeof e.stairLayer[t])throw TypeError(".protobuf.FloorBiz.stairLayer: object expected");i.stairLayer[t]=C.protobuf.FloorBiz.StairBizInfo.fromObject(e.stairLayer[t])}}if(e.polygonLabelLayer){if(!Array.isArray(e.polygonLabelLayer))throw TypeError(".protobuf.FloorBiz.polygonLabelLayer: array expected");i.polygonLabelLayer=[];for(let t=0;t<e.polygonLabelLayer.length;++t){if("object"!=typeof e.polygonLabelLayer[t])throw TypeError(".protobuf.FloorBiz.polygonLabelLayer: object expected");i.polygonLabelLayer[t]=C.protobuf.FloorBiz.PolygonLabelBizInfo.fromObject(e.polygonLabelLayer[t])}}if(e.externalModelLayer){if(!Array.isArray(e.externalModelLayer))throw TypeError(".protobuf.FloorBiz.externalModelLayer: array expected");i.externalModelLayer=[];for(let t=0;t<e.externalModelLayer.length;++t){if("object"!=typeof e.externalModelLayer[t])throw TypeError(".protobuf.FloorBiz.externalModelLayer: object expected");i.externalModelLayer[t]=C.protobuf.FloorBiz.ExternalModelBizInfo.fromObject(e.externalModelLayer[t])}}return i},g.toObject=function(e,i){var r={};if(((i=i||{}).arrays||i.defaults)&&(r.extentLayer=[],r.modelLayer=[],r.labelLayer=[],r.poiLayer=[],r.polygonLayer=[],r.liftLayer=[],r.stairLayer=[],r.polygonLabelLayer=[],r.externalModelLayer=[]),i.defaults&&(r.mid="",r.gid=0),null!=e.mid&&e.hasOwnProperty("mid")&&(r.mid=e.mid),null!=e.gid&&e.hasOwnProperty("gid")&&(r.gid=e.gid),e.extentLayer&&e.extentLayer.length){r.extentLayer=[];for(let t=0;t<e.extentLayer.length;++t)r.extentLayer[t]=C.protobuf.FloorBiz.ExtentBizInfo.toObject(e.extentLayer[t],i)}if(e.modelLayer&&e.modelLayer.length){r.modelLayer=[];for(let t=0;t<e.modelLayer.length;++t)r.modelLayer[t]=C.protobuf.FloorBiz.ModelBizInfo.toObject(e.modelLayer[t],i)}if(e.labelLayer&&e.labelLayer.length){r.labelLayer=[];for(let t=0;t<e.labelLayer.length;++t)r.labelLayer[t]=C.protobuf.FloorBiz.LabelBizInfo.toObject(e.labelLayer[t],i)}if(e.poiLayer&&e.poiLayer.length){r.poiLayer=[];for(let t=0;t<e.poiLayer.length;++t)r.poiLayer[t]=C.protobuf.FloorBiz.POIBizInfo.toObject(e.poiLayer[t],i)}if(e.polygonLayer&&e.polygonLayer.length){r.polygonLayer=[];for(let t=0;t<e.polygonLayer.length;++t)r.polygonLayer[t]=C.protobuf.FloorBiz.PolygonBizInfo.toObject(e.polygonLayer[t],i)}if(e.liftLayer&&e.liftLayer.length){r.liftLayer=[];for(let t=0;t<e.liftLayer.length;++t)r.liftLayer[t]=C.protobuf.FloorBiz.LiftBizInfo.toObject(e.liftLayer[t],i)}if(e.stairLayer&&e.stairLayer.length){r.stairLayer=[];for(let t=0;t<e.stairLayer.length;++t)r.stairLayer[t]=C.protobuf.FloorBiz.StairBizInfo.toObject(e.stairLayer[t],i)}if(e.polygonLabelLayer&&e.polygonLabelLayer.length){r.polygonLabelLayer=[];for(let t=0;t<e.polygonLabelLayer.length;++t)r.polygonLabelLayer[t]=C.protobuf.FloorBiz.PolygonLabelBizInfo.toObject(e.polygonLabelLayer[t],i)}if(e.externalModelLayer&&e.externalModelLayer.length){r.externalModelLayer=[];for(let t=0;t<e.externalModelLayer.length;++t)r.externalModelLayer[t]=C.protobuf.FloorBiz.ExternalModelBizInfo.toObject(e.externalModelLayer[t],i)}return r},g.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},g.ExtentBizInfo=(m.prototype.eid=0,m.prototype.fid="",m.prototype.type=0,m.prototype.name="",m.prototype.ename="",m.prototype.minlevel=0,m.prototype.maxlevel=0,m.create=function(t){return new m(t)},m.encode=function(t,e){return(e=e||B.create()).uint32(8).int32(t.eid),null!=t.fid&&Object.hasOwnProperty.call(t,"fid")&&e.uint32(18).string(t.fid),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(24).int32(t.type),null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(34).string(t.name),null!=t.ename&&Object.hasOwnProperty.call(t,"ename")&&e.uint32(42).string(t.ename),null!=t.minlevel&&Object.hasOwnProperty.call(t,"minlevel")&&e.uint32(48).int32(t.minlevel),null!=t.maxlevel&&Object.hasOwnProperty.call(t,"maxlevel")&&e.uint32(56).int32(t.maxlevel),e},m.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},m.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorBiz.ExtentBizInfo;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.eid=t.int32();break;case 2:r.fid=t.string();break;case 3:r.type=t.int32();break;case 4:r.name=t.string();break;case 5:r.ename=t.string();break;case 6:r.minlevel=t.int32();break;case 7:r.maxlevel=t.int32();break;default:t.skipType(7&n)}}if(r.hasOwnProperty("eid"))return r;throw Z.ProtocolError("missing required 'eid'",{instance:r})},m.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},m.verify=function(t){return"object"!=typeof t||null===t?"object expected":Z.isInteger(t.eid)?null!=t.fid&&t.hasOwnProperty("fid")&&!Z.isString(t.fid)?"fid: string expected":null!=t.type&&t.hasOwnProperty("type")&&!Z.isInteger(t.type)?"type: integer expected":null!=t.name&&t.hasOwnProperty("name")&&!Z.isString(t.name)?"name: string expected":null!=t.ename&&t.hasOwnProperty("ename")&&!Z.isString(t.ename)?"ename: string expected":null!=t.minlevel&&t.hasOwnProperty("minlevel")&&!Z.isInteger(t.minlevel)?"minlevel: integer expected":null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&!Z.isInteger(t.maxlevel)?"maxlevel: integer expected":null:"eid: integer expected"},m.fromObject=function(t){var e;return t instanceof C.protobuf.FloorBiz.ExtentBizInfo?t:(e=new C.protobuf.FloorBiz.ExtentBizInfo,null!=t.eid&&(e.eid=0|t.eid),null!=t.fid&&(e.fid=String(t.fid)),null!=t.type&&(e.type=0|t.type),null!=t.name&&(e.name=String(t.name)),null!=t.ename&&(e.ename=String(t.ename)),null!=t.minlevel&&(e.minlevel=0|t.minlevel),null!=t.maxlevel&&(e.maxlevel=0|t.maxlevel),e)},m.toObject=function(t,e){var i={};return(e=e||{}).defaults&&(i.eid=0,i.fid="",i.type=0,i.name="",i.ename="",i.minlevel=0,i.maxlevel=0),null!=t.eid&&t.hasOwnProperty("eid")&&(i.eid=t.eid),null!=t.fid&&t.hasOwnProperty("fid")&&(i.fid=t.fid),null!=t.type&&t.hasOwnProperty("type")&&(i.type=t.type),null!=t.name&&t.hasOwnProperty("name")&&(i.name=t.name),null!=t.ename&&t.hasOwnProperty("ename")&&(i.ename=t.ename),null!=t.minlevel&&t.hasOwnProperty("minlevel")&&(i.minlevel=t.minlevel),null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&(i.maxlevel=t.maxlevel),i},m.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},m),g.ModelBizInfo=(_.prototype.eid=0,_.prototype.fid="",_.prototype.type=0,_.prototype.name="",_.prototype.ename="",_.prototype.minlevel=0,_.prototype.maxlevel=0,_.prototype.pass=0,_.create=function(t){return new _(t)},_.encode=function(t,e){return(e=e||B.create()).uint32(8).int32(t.eid),null!=t.fid&&Object.hasOwnProperty.call(t,"fid")&&e.uint32(18).string(t.fid),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(24).int32(t.type),null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(34).string(t.name),null!=t.ename&&Object.hasOwnProperty.call(t,"ename")&&e.uint32(42).string(t.ename),null!=t.minlevel&&Object.hasOwnProperty.call(t,"minlevel")&&e.uint32(48).int32(t.minlevel),null!=t.maxlevel&&Object.hasOwnProperty.call(t,"maxlevel")&&e.uint32(56).int32(t.maxlevel),null!=t.pass&&Object.hasOwnProperty.call(t,"pass")&&e.uint32(64).int32(t.pass),e},_.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},_.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorBiz.ModelBizInfo;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.eid=t.int32();break;case 2:r.fid=t.string();break;case 3:r.type=t.int32();break;case 4:r.name=t.string();break;case 5:r.ename=t.string();break;case 6:r.minlevel=t.int32();break;case 7:r.maxlevel=t.int32();break;case 8:r.pass=t.int32();break;default:t.skipType(7&n)}}if(r.hasOwnProperty("eid"))return r;throw Z.ProtocolError("missing required 'eid'",{instance:r})},_.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},_.verify=function(t){return"object"!=typeof t||null===t?"object expected":Z.isInteger(t.eid)?null!=t.fid&&t.hasOwnProperty("fid")&&!Z.isString(t.fid)?"fid: string expected":null!=t.type&&t.hasOwnProperty("type")&&!Z.isInteger(t.type)?"type: integer expected":null!=t.name&&t.hasOwnProperty("name")&&!Z.isString(t.name)?"name: string expected":null!=t.ename&&t.hasOwnProperty("ename")&&!Z.isString(t.ename)?"ename: string expected":null!=t.minlevel&&t.hasOwnProperty("minlevel")&&!Z.isInteger(t.minlevel)?"minlevel: integer expected":null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&!Z.isInteger(t.maxlevel)?"maxlevel: integer expected":null!=t.pass&&t.hasOwnProperty("pass")&&!Z.isInteger(t.pass)?"pass: integer expected":null:"eid: integer expected"},_.fromObject=function(t){var e;return t instanceof C.protobuf.FloorBiz.ModelBizInfo?t:(e=new C.protobuf.FloorBiz.ModelBizInfo,null!=t.eid&&(e.eid=0|t.eid),null!=t.fid&&(e.fid=String(t.fid)),null!=t.type&&(e.type=0|t.type),null!=t.name&&(e.name=String(t.name)),null!=t.ename&&(e.ename=String(t.ename)),null!=t.minlevel&&(e.minlevel=0|t.minlevel),null!=t.maxlevel&&(e.maxlevel=0|t.maxlevel),null!=t.pass&&(e.pass=0|t.pass),e)},_.toObject=function(t,e){var i={};return(e=e||{}).defaults&&(i.eid=0,i.fid="",i.type=0,i.name="",i.ename="",i.minlevel=0,i.maxlevel=0,i.pass=0),null!=t.eid&&t.hasOwnProperty("eid")&&(i.eid=t.eid),null!=t.fid&&t.hasOwnProperty("fid")&&(i.fid=t.fid),null!=t.type&&t.hasOwnProperty("type")&&(i.type=t.type),null!=t.name&&t.hasOwnProperty("name")&&(i.name=t.name),null!=t.ename&&t.hasOwnProperty("ename")&&(i.ename=t.ename),null!=t.minlevel&&t.hasOwnProperty("minlevel")&&(i.minlevel=t.minlevel),null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&(i.maxlevel=t.maxlevel),null!=t.pass&&t.hasOwnProperty("pass")&&(i.pass=t.pass),i},_.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},_),g.LabelBizInfo=(w.prototype.eid=0,w.prototype.fid="",w.prototype.type=0,w.prototype.name="",w.prototype.ename="",w.prototype.minlevel=0,w.prototype.maxlevel=0,w.create=function(t){return new w(t)},w.encode=function(t,e){return(e=e||B.create()).uint32(8).int32(t.eid),null!=t.fid&&Object.hasOwnProperty.call(t,"fid")&&e.uint32(18).string(t.fid),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(24).int32(t.type),null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(34).string(t.name),null!=t.ename&&Object.hasOwnProperty.call(t,"ename")&&e.uint32(42).string(t.ename),null!=t.minlevel&&Object.hasOwnProperty.call(t,"minlevel")&&e.uint32(48).int32(t.minlevel),null!=t.maxlevel&&Object.hasOwnProperty.call(t,"maxlevel")&&e.uint32(56).int32(t.maxlevel),e},w.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},w.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorBiz.LabelBizInfo;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.eid=t.int32();break;case 2:r.fid=t.string();break;case 3:r.type=t.int32();break;case 4:r.name=t.string();break;case 5:r.ename=t.string();break;case 6:r.minlevel=t.int32();break;case 7:r.maxlevel=t.int32();break;default:t.skipType(7&n)}}if(r.hasOwnProperty("eid"))return r;throw Z.ProtocolError("missing required 'eid'",{instance:r})},w.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},w.verify=function(t){return"object"!=typeof t||null===t?"object expected":Z.isInteger(t.eid)?null!=t.fid&&t.hasOwnProperty("fid")&&!Z.isString(t.fid)?"fid: string expected":null!=t.type&&t.hasOwnProperty("type")&&!Z.isInteger(t.type)?"type: integer expected":null!=t.name&&t.hasOwnProperty("name")&&!Z.isString(t.name)?"name: string expected":null!=t.ename&&t.hasOwnProperty("ename")&&!Z.isString(t.ename)?"ename: string expected":null!=t.minlevel&&t.hasOwnProperty("minlevel")&&!Z.isInteger(t.minlevel)?"minlevel: integer expected":null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&!Z.isInteger(t.maxlevel)?"maxlevel: integer expected":null:"eid: integer expected"},w.fromObject=function(t){var e;return t instanceof C.protobuf.FloorBiz.LabelBizInfo?t:(e=new C.protobuf.FloorBiz.LabelBizInfo,null!=t.eid&&(e.eid=0|t.eid),null!=t.fid&&(e.fid=String(t.fid)),null!=t.type&&(e.type=0|t.type),null!=t.name&&(e.name=String(t.name)),null!=t.ename&&(e.ename=String(t.ename)),null!=t.minlevel&&(e.minlevel=0|t.minlevel),null!=t.maxlevel&&(e.maxlevel=0|t.maxlevel),e)},w.toObject=function(t,e){var i={};return(e=e||{}).defaults&&(i.eid=0,i.fid="",i.type=0,i.name="",i.ename="",i.minlevel=0,i.maxlevel=0),null!=t.eid&&t.hasOwnProperty("eid")&&(i.eid=t.eid),null!=t.fid&&t.hasOwnProperty("fid")&&(i.fid=t.fid),null!=t.type&&t.hasOwnProperty("type")&&(i.type=t.type),null!=t.name&&t.hasOwnProperty("name")&&(i.name=t.name),null!=t.ename&&t.hasOwnProperty("ename")&&(i.ename=t.ename),null!=t.minlevel&&t.hasOwnProperty("minlevel")&&(i.minlevel=t.minlevel),null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&(i.maxlevel=t.maxlevel),i},w.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},w),g.PolygonBizInfo=(x.prototype.eid=0,x.prototype.fid="",x.prototype.type=0,x.prototype.name="",x.prototype.ename="",x.prototype.minlevel=0,x.prototype.maxlevel=0,x.create=function(t){return new x(t)},x.encode=function(t,e){return(e=e||B.create()).uint32(8).int32(t.eid),null!=t.fid&&Object.hasOwnProperty.call(t,"fid")&&e.uint32(18).string(t.fid),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(24).int32(t.type),null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(34).string(t.name),null!=t.ename&&Object.hasOwnProperty.call(t,"ename")&&e.uint32(42).string(t.ename),null!=t.minlevel&&Object.hasOwnProperty.call(t,"minlevel")&&e.uint32(48).int32(t.minlevel),null!=t.maxlevel&&Object.hasOwnProperty.call(t,"maxlevel")&&e.uint32(56).int32(t.maxlevel),e},x.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},x.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorBiz.PolygonBizInfo;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.eid=t.int32();break;case 2:r.fid=t.string();break;case 3:r.type=t.int32();break;case 4:r.name=t.string();break;case 5:r.ename=t.string();break;case 6:r.minlevel=t.int32();break;case 7:r.maxlevel=t.int32();break;default:t.skipType(7&n)}}if(r.hasOwnProperty("eid"))return r;throw Z.ProtocolError("missing required 'eid'",{instance:r})},x.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},x.verify=function(t){return"object"!=typeof t||null===t?"object expected":Z.isInteger(t.eid)?null!=t.fid&&t.hasOwnProperty("fid")&&!Z.isString(t.fid)?"fid: string expected":null!=t.type&&t.hasOwnProperty("type")&&!Z.isInteger(t.type)?"type: integer expected":null!=t.name&&t.hasOwnProperty("name")&&!Z.isString(t.name)?"name: string expected":null!=t.ename&&t.hasOwnProperty("ename")&&!Z.isString(t.ename)?"ename: string expected":null!=t.minlevel&&t.hasOwnProperty("minlevel")&&!Z.isInteger(t.minlevel)?"minlevel: integer expected":null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&!Z.isInteger(t.maxlevel)?"maxlevel: integer expected":null:"eid: integer expected"},x.fromObject=function(t){var e;return t instanceof C.protobuf.FloorBiz.PolygonBizInfo?t:(e=new C.protobuf.FloorBiz.PolygonBizInfo,null!=t.eid&&(e.eid=0|t.eid),null!=t.fid&&(e.fid=String(t.fid)),null!=t.type&&(e.type=0|t.type),null!=t.name&&(e.name=String(t.name)),null!=t.ename&&(e.ename=String(t.ename)),null!=t.minlevel&&(e.minlevel=0|t.minlevel),null!=t.maxlevel&&(e.maxlevel=0|t.maxlevel),e)},x.toObject=function(t,e){var i={};return(e=e||{}).defaults&&(i.eid=0,i.fid="",i.type=0,i.name="",i.ename="",i.minlevel=0,i.maxlevel=0),null!=t.eid&&t.hasOwnProperty("eid")&&(i.eid=t.eid),null!=t.fid&&t.hasOwnProperty("fid")&&(i.fid=t.fid),null!=t.type&&t.hasOwnProperty("type")&&(i.type=t.type),null!=t.name&&t.hasOwnProperty("name")&&(i.name=t.name),null!=t.ename&&t.hasOwnProperty("ename")&&(i.ename=t.ename),null!=t.minlevel&&t.hasOwnProperty("minlevel")&&(i.minlevel=t.minlevel),null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&(i.maxlevel=t.maxlevel),i},x.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},x),g.POIBizInfo=(O.prototype.eid=0,O.prototype.fid="",O.prototype.type=0,O.prototype.name="",O.prototype.ename="",O.prototype.minlevel=0,O.prototype.maxlevel=0,O.create=function(t){return new O(t)},O.encode=function(t,e){return(e=e||B.create()).uint32(8).int32(t.eid),null!=t.fid&&Object.hasOwnProperty.call(t,"fid")&&e.uint32(18).string(t.fid),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(24).int32(t.type),null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(34).string(t.name),null!=t.ename&&Object.hasOwnProperty.call(t,"ename")&&e.uint32(42).string(t.ename),null!=t.minlevel&&Object.hasOwnProperty.call(t,"minlevel")&&e.uint32(48).int32(t.minlevel),null!=t.maxlevel&&Object.hasOwnProperty.call(t,"maxlevel")&&e.uint32(56).int32(t.maxlevel),e},O.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},O.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorBiz.POIBizInfo;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.eid=t.int32();break;case 2:r.fid=t.string();break;case 3:r.type=t.int32();break;case 4:r.name=t.string();break;case 5:r.ename=t.string();break;case 6:r.minlevel=t.int32();break;case 7:r.maxlevel=t.int32();break;default:t.skipType(7&n)}}if(r.hasOwnProperty("eid"))return r;throw Z.ProtocolError("missing required 'eid'",{instance:r})},O.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},O.verify=function(t){return"object"!=typeof t||null===t?"object expected":Z.isInteger(t.eid)?null!=t.fid&&t.hasOwnProperty("fid")&&!Z.isString(t.fid)?"fid: string expected":null!=t.type&&t.hasOwnProperty("type")&&!Z.isInteger(t.type)?"type: integer expected":null!=t.name&&t.hasOwnProperty("name")&&!Z.isString(t.name)?"name: string expected":null!=t.ename&&t.hasOwnProperty("ename")&&!Z.isString(t.ename)?"ename: string expected":null!=t.minlevel&&t.hasOwnProperty("minlevel")&&!Z.isInteger(t.minlevel)?"minlevel: integer expected":null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&!Z.isInteger(t.maxlevel)?"maxlevel: integer expected":null:"eid: integer expected"},O.fromObject=function(t){var e;return t instanceof C.protobuf.FloorBiz.POIBizInfo?t:(e=new C.protobuf.FloorBiz.POIBizInfo,null!=t.eid&&(e.eid=0|t.eid),null!=t.fid&&(e.fid=String(t.fid)),null!=t.type&&(e.type=0|t.type),null!=t.name&&(e.name=String(t.name)),null!=t.ename&&(e.ename=String(t.ename)),null!=t.minlevel&&(e.minlevel=0|t.minlevel),null!=t.maxlevel&&(e.maxlevel=0|t.maxlevel),e)},O.toObject=function(t,e){var i={};return(e=e||{}).defaults&&(i.eid=0,i.fid="",i.type=0,i.name="",i.ename="",i.minlevel=0,i.maxlevel=0),null!=t.eid&&t.hasOwnProperty("eid")&&(i.eid=t.eid),null!=t.fid&&t.hasOwnProperty("fid")&&(i.fid=t.fid),null!=t.type&&t.hasOwnProperty("type")&&(i.type=t.type),null!=t.name&&t.hasOwnProperty("name")&&(i.name=t.name),null!=t.ename&&t.hasOwnProperty("ename")&&(i.ename=t.ename),null!=t.minlevel&&t.hasOwnProperty("minlevel")&&(i.minlevel=t.minlevel),null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&(i.maxlevel=t.maxlevel),i},O.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},O),g.LiftBizInfo=(j.prototype.eid=0,j.prototype.fid="",j.prototype.type=0,j.prototype.flag=0,j.prototype.floor="",j.prototype.minlevel=0,j.prototype.maxlevel=0,j.create=function(t){return new j(t)},j.encode=function(t,e){return(e=e||B.create()).uint32(8).int32(t.eid),null!=t.fid&&Object.hasOwnProperty.call(t,"fid")&&e.uint32(18).string(t.fid),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(24).int32(t.type),null!=t.flag&&Object.hasOwnProperty.call(t,"flag")&&e.uint32(32).int32(t.flag),null!=t.floor&&Object.hasOwnProperty.call(t,"floor")&&e.uint32(42).string(t.floor),null!=t.minlevel&&Object.hasOwnProperty.call(t,"minlevel")&&e.uint32(48).int32(t.minlevel),null!=t.maxlevel&&Object.hasOwnProperty.call(t,"maxlevel")&&e.uint32(56).int32(t.maxlevel),e},j.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},j.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorBiz.LiftBizInfo;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.eid=t.int32();break;case 2:r.fid=t.string();break;case 3:r.type=t.int32();break;case 4:r.flag=t.int32();break;case 5:r.floor=t.string();break;case 6:r.minlevel=t.int32();break;case 7:r.maxlevel=t.int32();break;default:t.skipType(7&n)}}if(r.hasOwnProperty("eid"))return r;throw Z.ProtocolError("missing required 'eid'",{instance:r})},j.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},j.verify=function(t){return"object"!=typeof t||null===t?"object expected":Z.isInteger(t.eid)?null!=t.fid&&t.hasOwnProperty("fid")&&!Z.isString(t.fid)?"fid: string expected":null!=t.type&&t.hasOwnProperty("type")&&!Z.isInteger(t.type)?"type: integer expected":null!=t.flag&&t.hasOwnProperty("flag")&&!Z.isInteger(t.flag)?"flag: integer expected":null!=t.floor&&t.hasOwnProperty("floor")&&!Z.isString(t.floor)?"floor: string expected":null!=t.minlevel&&t.hasOwnProperty("minlevel")&&!Z.isInteger(t.minlevel)?"minlevel: integer expected":null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&!Z.isInteger(t.maxlevel)?"maxlevel: integer expected":null:"eid: integer expected"},j.fromObject=function(t){var e;return t instanceof C.protobuf.FloorBiz.LiftBizInfo?t:(e=new C.protobuf.FloorBiz.LiftBizInfo,null!=t.eid&&(e.eid=0|t.eid),null!=t.fid&&(e.fid=String(t.fid)),null!=t.type&&(e.type=0|t.type),null!=t.flag&&(e.flag=0|t.flag),null!=t.floor&&(e.floor=String(t.floor)),null!=t.minlevel&&(e.minlevel=0|t.minlevel),null!=t.maxlevel&&(e.maxlevel=0|t.maxlevel),e)},j.toObject=function(t,e){var i={};return(e=e||{}).defaults&&(i.eid=0,i.fid="",i.type=0,i.flag=0,i.floor="",i.minlevel=0,i.maxlevel=0),null!=t.eid&&t.hasOwnProperty("eid")&&(i.eid=t.eid),null!=t.fid&&t.hasOwnProperty("fid")&&(i.fid=t.fid),null!=t.type&&t.hasOwnProperty("type")&&(i.type=t.type),null!=t.flag&&t.hasOwnProperty("flag")&&(i.flag=t.flag),null!=t.floor&&t.hasOwnProperty("floor")&&(i.floor=t.floor),null!=t.minlevel&&t.hasOwnProperty("minlevel")&&(i.minlevel=t.minlevel),null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&(i.maxlevel=t.maxlevel),i},j.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},j),g.StairBizInfo=(k.prototype.eid=0,k.prototype.fid="",k.prototype.type=0,k.prototype.flag=0,k.prototype.minlevel=0,k.prototype.maxlevel=0,k.create=function(t){return new k(t)},k.encode=function(t,e){return(e=e||B.create()).uint32(8).int32(t.eid),null!=t.fid&&Object.hasOwnProperty.call(t,"fid")&&e.uint32(18).string(t.fid),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(24).int32(t.type),null!=t.flag&&Object.hasOwnProperty.call(t,"flag")&&e.uint32(32).int32(t.flag),null!=t.minlevel&&Object.hasOwnProperty.call(t,"minlevel")&&e.uint32(40).int32(t.minlevel),null!=t.maxlevel&&Object.hasOwnProperty.call(t,"maxlevel")&&e.uint32(48).int32(t.maxlevel),e},k.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},k.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorBiz.StairBizInfo;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.eid=t.int32();break;case 2:r.fid=t.string();break;case 3:r.type=t.int32();break;case 4:r.flag=t.int32();break;case 5:r.minlevel=t.int32();break;case 6:r.maxlevel=t.int32();break;default:t.skipType(7&n)}}if(r.hasOwnProperty("eid"))return r;throw Z.ProtocolError("missing required 'eid'",{instance:r})},k.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},k.verify=function(t){return"object"!=typeof t||null===t?"object expected":Z.isInteger(t.eid)?null!=t.fid&&t.hasOwnProperty("fid")&&!Z.isString(t.fid)?"fid: string expected":null!=t.type&&t.hasOwnProperty("type")&&!Z.isInteger(t.type)?"type: integer expected":null!=t.flag&&t.hasOwnProperty("flag")&&!Z.isInteger(t.flag)?"flag: integer expected":null!=t.minlevel&&t.hasOwnProperty("minlevel")&&!Z.isInteger(t.minlevel)?"minlevel: integer expected":null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&!Z.isInteger(t.maxlevel)?"maxlevel: integer expected":null:"eid: integer expected"},k.fromObject=function(t){var e;return t instanceof C.protobuf.FloorBiz.StairBizInfo?t:(e=new C.protobuf.FloorBiz.StairBizInfo,null!=t.eid&&(e.eid=0|t.eid),null!=t.fid&&(e.fid=String(t.fid)),null!=t.type&&(e.type=0|t.type),null!=t.flag&&(e.flag=0|t.flag),null!=t.minlevel&&(e.minlevel=0|t.minlevel),null!=t.maxlevel&&(e.maxlevel=0|t.maxlevel),e)},k.toObject=function(t,e){var i={};return(e=e||{}).defaults&&(i.eid=0,i.fid="",i.type=0,i.flag=0,i.minlevel=0,i.maxlevel=0),null!=t.eid&&t.hasOwnProperty("eid")&&(i.eid=t.eid),null!=t.fid&&t.hasOwnProperty("fid")&&(i.fid=t.fid),null!=t.type&&t.hasOwnProperty("type")&&(i.type=t.type),null!=t.flag&&t.hasOwnProperty("flag")&&(i.flag=t.flag),null!=t.minlevel&&t.hasOwnProperty("minlevel")&&(i.minlevel=t.minlevel),null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&(i.maxlevel=t.maxlevel),i},k.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},k),g.PolygonLabelBizInfo=(E.prototype.eid=0,E.prototype.fid="",E.prototype.type=0,E.prototype.width=0,E.prototype.name="",E.prototype.ename="",E.prototype.angle=0,E.create=function(t){return new E(t)},E.encode=function(t,e){return(e=e||B.create()).uint32(8).int32(t.eid),null!=t.fid&&Object.hasOwnProperty.call(t,"fid")&&e.uint32(18).string(t.fid),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(24).int32(t.type),null!=t.width&&Object.hasOwnProperty.call(t,"width")&&e.uint32(37).float(t.width),null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(42).string(t.name),null!=t.ename&&Object.hasOwnProperty.call(t,"ename")&&e.uint32(50).string(t.ename),null!=t.angle&&Object.hasOwnProperty.call(t,"angle")&&e.uint32(61).float(t.angle),e},E.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},E.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorBiz.PolygonLabelBizInfo;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.eid=t.int32();break;case 2:r.fid=t.string();break;case 3:r.type=t.int32();break;case 4:r.width=t.float();break;case 5:r.name=t.string();break;case 6:r.ename=t.string();break;case 7:r.angle=t.float();break;default:t.skipType(7&n)}}if(r.hasOwnProperty("eid"))return r;throw Z.ProtocolError("missing required 'eid'",{instance:r})},E.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},E.verify=function(t){return"object"!=typeof t||null===t?"object expected":Z.isInteger(t.eid)?null!=t.fid&&t.hasOwnProperty("fid")&&!Z.isString(t.fid)?"fid: string expected":null!=t.type&&t.hasOwnProperty("type")&&!Z.isInteger(t.type)?"type: integer expected":null!=t.width&&t.hasOwnProperty("width")&&"number"!=typeof t.width?"width: number expected":null!=t.name&&t.hasOwnProperty("name")&&!Z.isString(t.name)?"name: string expected":null!=t.ename&&t.hasOwnProperty("ename")&&!Z.isString(t.ename)?"ename: string expected":null!=t.angle&&t.hasOwnProperty("angle")&&"number"!=typeof t.angle?"angle: number expected":null:"eid: integer expected"},E.fromObject=function(t){var e;return t instanceof C.protobuf.FloorBiz.PolygonLabelBizInfo?t:(e=new C.protobuf.FloorBiz.PolygonLabelBizInfo,null!=t.eid&&(e.eid=0|t.eid),null!=t.fid&&(e.fid=String(t.fid)),null!=t.type&&(e.type=0|t.type),null!=t.width&&(e.width=Number(t.width)),null!=t.name&&(e.name=String(t.name)),null!=t.ename&&(e.ename=String(t.ename)),null!=t.angle&&(e.angle=Number(t.angle)),e)},E.toObject=function(t,e){var i={};return(e=e||{}).defaults&&(i.eid=0,i.fid="",i.type=0,i.width=0,i.name="",i.ename="",i.angle=0),null!=t.eid&&t.hasOwnProperty("eid")&&(i.eid=t.eid),null!=t.fid&&t.hasOwnProperty("fid")&&(i.fid=t.fid),null!=t.type&&t.hasOwnProperty("type")&&(i.type=t.type),null!=t.width&&t.hasOwnProperty("width")&&(i.width=e.json&&!isFinite(t.width)?String(t.width):t.width),null!=t.name&&t.hasOwnProperty("name")&&(i.name=t.name),null!=t.ename&&t.hasOwnProperty("ename")&&(i.ename=t.ename),null!=t.angle&&t.hasOwnProperty("angle")&&(i.angle=e.json&&!isFinite(t.angle)?String(t.angle):t.angle),i},E.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},E),g.ExternalModelBizInfo=(M.prototype.eid=0,M.prototype.fid="",M.prototype.type=0,M.prototype.name="",M.prototype.ename="",M.prototype.minlevel=0,M.prototype.maxlevel=0,M.create=function(t){return new M(t)},M.encode=function(t,e){return(e=e||B.create()).uint32(8).int32(t.eid),null!=t.fid&&Object.hasOwnProperty.call(t,"fid")&&e.uint32(18).string(t.fid),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(24).int32(t.type),null!=t.name&&Object.hasOwnProperty.call(t,"name")&&e.uint32(34).string(t.name),null!=t.ename&&Object.hasOwnProperty.call(t,"ename")&&e.uint32(42).string(t.ename),null!=t.minlevel&&Object.hasOwnProperty.call(t,"minlevel")&&e.uint32(48).int32(t.minlevel),null!=t.maxlevel&&Object.hasOwnProperty.call(t,"maxlevel")&&e.uint32(56).int32(t.maxlevel),e},M.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},M.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorBiz.ExternalModelBizInfo;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.eid=t.int32();break;case 2:r.fid=t.string();break;case 3:r.type=t.int32();break;case 4:r.name=t.string();break;case 5:r.ename=t.string();break;case 6:r.minlevel=t.int32();break;case 7:r.maxlevel=t.int32();break;default:t.skipType(7&n)}}if(r.hasOwnProperty("eid"))return r;throw Z.ProtocolError("missing required 'eid'",{instance:r})},M.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},M.verify=function(t){return"object"!=typeof t||null===t?"object expected":Z.isInteger(t.eid)?null!=t.fid&&t.hasOwnProperty("fid")&&!Z.isString(t.fid)?"fid: string expected":null!=t.type&&t.hasOwnProperty("type")&&!Z.isInteger(t.type)?"type: integer expected":null!=t.name&&t.hasOwnProperty("name")&&!Z.isString(t.name)?"name: string expected":null!=t.ename&&t.hasOwnProperty("ename")&&!Z.isString(t.ename)?"ename: string expected":null!=t.minlevel&&t.hasOwnProperty("minlevel")&&!Z.isInteger(t.minlevel)?"minlevel: integer expected":null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&!Z.isInteger(t.maxlevel)?"maxlevel: integer expected":null:"eid: integer expected"},M.fromObject=function(t){var e;return t instanceof C.protobuf.FloorBiz.ExternalModelBizInfo?t:(e=new C.protobuf.FloorBiz.ExternalModelBizInfo,null!=t.eid&&(e.eid=0|t.eid),null!=t.fid&&(e.fid=String(t.fid)),null!=t.type&&(e.type=0|t.type),null!=t.name&&(e.name=String(t.name)),null!=t.ename&&(e.ename=String(t.ename)),null!=t.minlevel&&(e.minlevel=0|t.minlevel),null!=t.maxlevel&&(e.maxlevel=0|t.maxlevel),e)},M.toObject=function(t,e){var i={};return(e=e||{}).defaults&&(i.eid=0,i.fid="",i.type=0,i.name="",i.ename="",i.minlevel=0,i.maxlevel=0),null!=t.eid&&t.hasOwnProperty("eid")&&(i.eid=t.eid),null!=t.fid&&t.hasOwnProperty("fid")&&(i.fid=t.fid),null!=t.type&&t.hasOwnProperty("type")&&(i.type=t.type),null!=t.name&&t.hasOwnProperty("name")&&(i.name=t.name),null!=t.ename&&t.hasOwnProperty("ename")&&(i.ename=t.ename),null!=t.minlevel&&t.hasOwnProperty("minlevel")&&(i.minlevel=t.minlevel),null!=t.maxlevel&&t.hasOwnProperty("maxlevel")&&(i.maxlevel=t.maxlevel),i},M.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},M),g),i.FloorNavi=(N.prototype.mid="",N.prototype.gid=0,N.prototype.naviNodes=Z.emptyArray,N.prototype.naviSegments=Z.emptyArray,N.prototype.naviZones=Z.emptyArray,N.prototype.naviModels=Z.emptyArray,N.prototype.nextFloors=Z.emptyArray,N.prototype.naviExtents=Z.emptyArray,N.create=function(t){return new N(t)},N.encode=function(e,i){if((i=i||B.create()).uint32(10).string(e.mid),i.uint32(16).int32(e.gid),null!=e.naviNodes&&e.naviNodes.length)for(let t=0;t<e.naviNodes.length;++t)C.protobuf.FloorNavi.NaviNode.encode(e.naviNodes[t],i.uint32(26).fork()).ldelim();if(null!=e.naviSegments&&e.naviSegments.length)for(let t=0;t<e.naviSegments.length;++t)C.protobuf.FloorNavi.NaviSegment.encode(e.naviSegments[t],i.uint32(34).fork()).ldelim();if(null!=e.naviZones&&e.naviZones.length)for(let t=0;t<e.naviZones.length;++t)C.protobuf.FloorNavi.NaviZone.encode(e.naviZones[t],i.uint32(42).fork()).ldelim();if(null!=e.naviModels&&e.naviModels.length)for(let t=0;t<e.naviModels.length;++t)C.protobuf.FloorNavi.NaviModel.encode(e.naviModels[t],i.uint32(50).fork()).ldelim();if(null!=e.nextFloors&&e.nextFloors.length)for(let t=0;t<e.nextFloors.length;++t)i.uint32(56).int32(e.nextFloors[t]);if(null!=e.naviExtents&&e.naviExtents.length)for(let t=0;t<e.naviExtents.length;++t)C.protobuf.FloorNavi.NaviExtent.encode(e.naviExtents[t],i.uint32(66).fork()).ldelim();return i},N.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},N.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorNavi;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.mid=t.string();break;case 2:r.gid=t.int32();break;case 3:r.naviNodes&&r.naviNodes.length||(r.naviNodes=[]),r.naviNodes.push(C.protobuf.FloorNavi.NaviNode.decode(t,t.uint32()));break;case 4:r.naviSegments&&r.naviSegments.length||(r.naviSegments=[]),r.naviSegments.push(C.protobuf.FloorNavi.NaviSegment.decode(t,t.uint32()));break;case 5:r.naviZones&&r.naviZones.length||(r.naviZones=[]),r.naviZones.push(C.protobuf.FloorNavi.NaviZone.decode(t,t.uint32()));break;case 6:r.naviModels&&r.naviModels.length||(r.naviModels=[]),r.naviModels.push(C.protobuf.FloorNavi.NaviModel.decode(t,t.uint32()));break;case 7:if(r.nextFloors&&r.nextFloors.length||(r.nextFloors=[]),2==(7&n))for(var s=t.uint32()+t.pos;t.pos<s;)r.nextFloors.push(t.int32());else r.nextFloors.push(t.int32());break;case 8:r.naviExtents&&r.naviExtents.length||(r.naviExtents=[]),r.naviExtents.push(C.protobuf.FloorNavi.NaviExtent.decode(t,t.uint32()));break;default:t.skipType(7&n)}}if(!r.hasOwnProperty("mid"))throw Z.ProtocolError("missing required 'mid'",{instance:r});if(r.hasOwnProperty("gid"))return r;throw Z.ProtocolError("missing required 'gid'",{instance:r})},N.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},N.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!Z.isString(e.mid))return"mid: string expected";if(!Z.isInteger(e.gid))return"gid: integer expected";if(null!=e.naviNodes&&e.hasOwnProperty("naviNodes")){if(!Array.isArray(e.naviNodes))return"naviNodes: array expected";for(let t=0;t<e.naviNodes.length;++t){var i=C.protobuf.FloorNavi.NaviNode.verify(e.naviNodes[t]);if(i)return"naviNodes."+i}}if(null!=e.naviSegments&&e.hasOwnProperty("naviSegments")){if(!Array.isArray(e.naviSegments))return"naviSegments: array expected";for(let t=0;t<e.naviSegments.length;++t){var r=C.protobuf.FloorNavi.NaviSegment.verify(e.naviSegments[t]);if(r)return"naviSegments."+r}}if(null!=e.naviZones&&e.hasOwnProperty("naviZones")){if(!Array.isArray(e.naviZones))return"naviZones: array expected";for(let t=0;t<e.naviZones.length;++t){var n=C.protobuf.FloorNavi.NaviZone.verify(e.naviZones[t]);if(n)return"naviZones."+n}}if(null!=e.naviModels&&e.hasOwnProperty("naviModels")){if(!Array.isArray(e.naviModels))return"naviModels: array expected";for(let t=0;t<e.naviModels.length;++t){var s=C.protobuf.FloorNavi.NaviModel.verify(e.naviModels[t]);if(s)return"naviModels."+s}}if(null!=e.nextFloors&&e.hasOwnProperty("nextFloors")){if(!Array.isArray(e.nextFloors))return"nextFloors: array expected";for(let t=0;t<e.nextFloors.length;++t)if(!Z.isInteger(e.nextFloors[t]))return"nextFloors: integer[] expected"}if(null!=e.naviExtents&&e.hasOwnProperty("naviExtents")){if(!Array.isArray(e.naviExtents))return"naviExtents: array expected";for(let t=0;t<e.naviExtents.length;++t){var l=C.protobuf.FloorNavi.NaviExtent.verify(e.naviExtents[t]);if(l)return"naviExtents."+l}}return null},N.fromObject=function(e){if(e instanceof C.protobuf.FloorNavi)return e;var i=new C.protobuf.FloorNavi;if(null!=e.mid&&(i.mid=String(e.mid)),null!=e.gid&&(i.gid=0|e.gid),e.naviNodes){if(!Array.isArray(e.naviNodes))throw TypeError(".protobuf.FloorNavi.naviNodes: array expected");i.naviNodes=[];for(let t=0;t<e.naviNodes.length;++t){if("object"!=typeof e.naviNodes[t])throw TypeError(".protobuf.FloorNavi.naviNodes: object expected");i.naviNodes[t]=C.protobuf.FloorNavi.NaviNode.fromObject(e.naviNodes[t])}}if(e.naviSegments){if(!Array.isArray(e.naviSegments))throw TypeError(".protobuf.FloorNavi.naviSegments: array expected");i.naviSegments=[];for(let t=0;t<e.naviSegments.length;++t){if("object"!=typeof e.naviSegments[t])throw TypeError(".protobuf.FloorNavi.naviSegments: object expected");i.naviSegments[t]=C.protobuf.FloorNavi.NaviSegment.fromObject(e.naviSegments[t])}}if(e.naviZones){if(!Array.isArray(e.naviZones))throw TypeError(".protobuf.FloorNavi.naviZones: array expected");i.naviZones=[];for(let t=0;t<e.naviZones.length;++t){if("object"!=typeof e.naviZones[t])throw TypeError(".protobuf.FloorNavi.naviZones: object expected");i.naviZones[t]=C.protobuf.FloorNavi.NaviZone.fromObject(e.naviZones[t])}}if(e.naviModels){if(!Array.isArray(e.naviModels))throw TypeError(".protobuf.FloorNavi.naviModels: array expected");i.naviModels=[];for(let t=0;t<e.naviModels.length;++t){if("object"!=typeof e.naviModels[t])throw TypeError(".protobuf.FloorNavi.naviModels: object expected");i.naviModels[t]=C.protobuf.FloorNavi.NaviModel.fromObject(e.naviModels[t])}}if(e.nextFloors){if(!Array.isArray(e.nextFloors))throw TypeError(".protobuf.FloorNavi.nextFloors: array expected");i.nextFloors=[];for(let t=0;t<e.nextFloors.length;++t)i.nextFloors[t]=0|e.nextFloors[t]}if(e.naviExtents){if(!Array.isArray(e.naviExtents))throw TypeError(".protobuf.FloorNavi.naviExtents: array expected");i.naviExtents=[];for(let t=0;t<e.naviExtents.length;++t){if("object"!=typeof e.naviExtents[t])throw TypeError(".protobuf.FloorNavi.naviExtents: object expected");i.naviExtents[t]=C.protobuf.FloorNavi.NaviExtent.fromObject(e.naviExtents[t])}}return i},N.toObject=function(e,i){var r={};if(((i=i||{}).arrays||i.defaults)&&(r.naviNodes=[],r.naviSegments=[],r.naviZones=[],r.naviModels=[],r.nextFloors=[],r.naviExtents=[]),i.defaults&&(r.mid="",r.gid=0),null!=e.mid&&e.hasOwnProperty("mid")&&(r.mid=e.mid),null!=e.gid&&e.hasOwnProperty("gid")&&(r.gid=e.gid),e.naviNodes&&e.naviNodes.length){r.naviNodes=[];for(let t=0;t<e.naviNodes.length;++t)r.naviNodes[t]=C.protobuf.FloorNavi.NaviNode.toObject(e.naviNodes[t],i)}if(e.naviSegments&&e.naviSegments.length){r.naviSegments=[];for(let t=0;t<e.naviSegments.length;++t)r.naviSegments[t]=C.protobuf.FloorNavi.NaviSegment.toObject(e.naviSegments[t],i)}if(e.naviZones&&e.naviZones.length){r.naviZones=[];for(let t=0;t<e.naviZones.length;++t)r.naviZones[t]=C.protobuf.FloorNavi.NaviZone.toObject(e.naviZones[t],i)}if(e.naviModels&&e.naviModels.length){r.naviModels=[];for(let t=0;t<e.naviModels.length;++t)r.naviModels[t]=C.protobuf.FloorNavi.NaviModel.toObject(e.naviModels[t],i)}if(e.nextFloors&&e.nextFloors.length){r.nextFloors=[];for(let t=0;t<e.nextFloors.length;++t)r.nextFloors[t]=e.nextFloors[t]}if(e.naviExtents&&e.naviExtents.length){r.naviExtents=[];for(let t=0;t<e.naviExtents.length;++t)r.naviExtents[t]=C.protobuf.FloorNavi.NaviExtent.toObject(e.naviExtents[t],i)}return r},N.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},N.NaviNode=(T.prototype.nodeId=0,T.prototype.nodeType=0,T.prototype.liftType=0,T.prototype.liftFlag=0,T.prototype.liftEntry=0,T.prototype.liftFloor="",T.prototype.linkSeg="",T.prototype.geo="",T.prototype.entranceType=0,T.prototype.entranceFloor="",T.prototype.doortype=0,T.prototype.idxs=Z.emptyArray,T.prototype.pts=Z.emptyArray,T.prototype.accessible=0,T.create=function(t){return new T(t)},T.encode=function(e,i){if(i=i||B.create(),null!=e.nodeId&&Object.hasOwnProperty.call(e,"nodeId")&&i.uint32(8).int32(e.nodeId),null!=e.nodeType&&Object.hasOwnProperty.call(e,"nodeType")&&i.uint32(16).int32(e.nodeType),null!=e.liftType&&Object.hasOwnProperty.call(e,"liftType")&&i.uint32(24).int32(e.liftType),null!=e.liftFlag&&Object.hasOwnProperty.call(e,"liftFlag")&&i.uint32(32).int32(e.liftFlag),null!=e.liftEntry&&Object.hasOwnProperty.call(e,"liftEntry")&&i.uint32(40).int32(e.liftEntry),null!=e.liftFloor&&Object.hasOwnProperty.call(e,"liftFloor")&&i.uint32(50).string(e.liftFloor),null!=e.linkSeg&&Object.hasOwnProperty.call(e,"linkSeg")&&i.uint32(58).string(e.linkSeg),null!=e.geo&&Object.hasOwnProperty.call(e,"geo")&&i.uint32(66).string(e.geo),null!=e.entranceType&&Object.hasOwnProperty.call(e,"entranceType")&&i.uint32(72).int32(e.entranceType),null!=e.entranceFloor&&Object.hasOwnProperty.call(e,"entranceFloor")&&i.uint32(82).string(e.entranceFloor),null!=e.doortype&&Object.hasOwnProperty.call(e,"doortype")&&i.uint32(88).int32(e.doortype),null!=e.idxs&&e.idxs.length)for(let t=0;t<e.idxs.length;++t)i.uint32(96).int32(e.idxs[t]);if(null!=e.pts&&e.pts.length)for(let t=0;t<e.pts.length;++t)i.uint32(105).double(e.pts[t]);return null!=e.accessible&&Object.hasOwnProperty.call(e,"accessible")&&i.uint32(112).int32(e.accessible),i},T.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},T.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorNavi.NaviNode;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.nodeId=t.int32();break;case 2:r.nodeType=t.int32();break;case 3:r.liftType=t.int32();break;case 4:r.liftFlag=t.int32();break;case 5:r.liftEntry=t.int32();break;case 6:r.liftFloor=t.string();break;case 7:r.linkSeg=t.string();break;case 8:r.geo=t.string();break;case 9:r.entranceType=t.int32();break;case 10:r.entranceFloor=t.string();break;case 11:r.doortype=t.int32();break;case 12:if(r.idxs&&r.idxs.length||(r.idxs=[]),2==(7&n))for(var s=t.uint32()+t.pos;t.pos<s;)r.idxs.push(t.int32());else r.idxs.push(t.int32());break;case 13:if(r.pts&&r.pts.length||(r.pts=[]),2==(7&n))for(var l=t.uint32()+t.pos;t.pos<l;)r.pts.push(t.double());else r.pts.push(t.double());break;case 14:r.accessible=t.int32();break;default:t.skipType(7&n)}}return r},T.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},T.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.nodeId&&e.hasOwnProperty("nodeId")&&!Z.isInteger(e.nodeId))return"nodeId: integer expected";if(null!=e.nodeType&&e.hasOwnProperty("nodeType")&&!Z.isInteger(e.nodeType))return"nodeType: integer expected";if(null!=e.liftType&&e.hasOwnProperty("liftType")&&!Z.isInteger(e.liftType))return"liftType: integer expected";if(null!=e.liftFlag&&e.hasOwnProperty("liftFlag")&&!Z.isInteger(e.liftFlag))return"liftFlag: integer expected";if(null!=e.liftEntry&&e.hasOwnProperty("liftEntry")&&!Z.isInteger(e.liftEntry))return"liftEntry: integer expected";if(null!=e.liftFloor&&e.hasOwnProperty("liftFloor")&&!Z.isString(e.liftFloor))return"liftFloor: string expected";if(null!=e.linkSeg&&e.hasOwnProperty("linkSeg")&&!Z.isString(e.linkSeg))return"linkSeg: string expected";if(null!=e.geo&&e.hasOwnProperty("geo")&&!Z.isString(e.geo))return"geo: string expected";if(null!=e.entranceType&&e.hasOwnProperty("entranceType")&&!Z.isInteger(e.entranceType))return"entranceType: integer expected";if(null!=e.entranceFloor&&e.hasOwnProperty("entranceFloor")&&!Z.isString(e.entranceFloor))return"entranceFloor: string expected";if(null!=e.doortype&&e.hasOwnProperty("doortype")&&!Z.isInteger(e.doortype))return"doortype: integer expected";if(null!=e.idxs&&e.hasOwnProperty("idxs")){if(!Array.isArray(e.idxs))return"idxs: array expected";for(let t=0;t<e.idxs.length;++t)if(!Z.isInteger(e.idxs[t]))return"idxs: integer[] expected"}if(null!=e.pts&&e.hasOwnProperty("pts")){if(!Array.isArray(e.pts))return"pts: array expected";for(let t=0;t<e.pts.length;++t)if("number"!=typeof e.pts[t])return"pts: number[] expected"}return null!=e.accessible&&e.hasOwnProperty("accessible")&&!Z.isInteger(e.accessible)?"accessible: integer expected":null},T.fromObject=function(e){if(e instanceof C.protobuf.FloorNavi.NaviNode)return e;var i=new C.protobuf.FloorNavi.NaviNode;if(null!=e.nodeId&&(i.nodeId=0|e.nodeId),null!=e.nodeType&&(i.nodeType=0|e.nodeType),null!=e.liftType&&(i.liftType=0|e.liftType),null!=e.liftFlag&&(i.liftFlag=0|e.liftFlag),null!=e.liftEntry&&(i.liftEntry=0|e.liftEntry),null!=e.liftFloor&&(i.liftFloor=String(e.liftFloor)),null!=e.linkSeg&&(i.linkSeg=String(e.linkSeg)),null!=e.geo&&(i.geo=String(e.geo)),null!=e.entranceType&&(i.entranceType=0|e.entranceType),null!=e.entranceFloor&&(i.entranceFloor=String(e.entranceFloor)),null!=e.doortype&&(i.doortype=0|e.doortype),e.idxs){if(!Array.isArray(e.idxs))throw TypeError(".protobuf.FloorNavi.NaviNode.idxs: array expected");i.idxs=[];for(let t=0;t<e.idxs.length;++t)i.idxs[t]=0|e.idxs[t]}if(e.pts){if(!Array.isArray(e.pts))throw TypeError(".protobuf.FloorNavi.NaviNode.pts: array expected");i.pts=[];for(let t=0;t<e.pts.length;++t)i.pts[t]=Number(e.pts[t])}return null!=e.accessible&&(i.accessible=0|e.accessible),i},T.toObject=function(e,i){var r={};if(((i=i||{}).arrays||i.defaults)&&(r.idxs=[],r.pts=[]),i.defaults&&(r.nodeId=0,r.nodeType=0,r.liftType=0,r.liftFlag=0,r.liftEntry=0,r.liftFloor="",r.linkSeg="",r.geo="",r.entranceType=0,r.entranceFloor="",r.doortype=0,r.accessible=0),null!=e.nodeId&&e.hasOwnProperty("nodeId")&&(r.nodeId=e.nodeId),null!=e.nodeType&&e.hasOwnProperty("nodeType")&&(r.nodeType=e.nodeType),null!=e.liftType&&e.hasOwnProperty("liftType")&&(r.liftType=e.liftType),null!=e.liftFlag&&e.hasOwnProperty("liftFlag")&&(r.liftFlag=e.liftFlag),null!=e.liftEntry&&e.hasOwnProperty("liftEntry")&&(r.liftEntry=e.liftEntry),null!=e.liftFloor&&e.hasOwnProperty("liftFloor")&&(r.liftFloor=e.liftFloor),null!=e.linkSeg&&e.hasOwnProperty("linkSeg")&&(r.linkSeg=e.linkSeg),null!=e.geo&&e.hasOwnProperty("geo")&&(r.geo=e.geo),null!=e.entranceType&&e.hasOwnProperty("entranceType")&&(r.entranceType=e.entranceType),null!=e.entranceFloor&&e.hasOwnProperty("entranceFloor")&&(r.entranceFloor=e.entranceFloor),null!=e.doortype&&e.hasOwnProperty("doortype")&&(r.doortype=e.doortype),e.idxs&&e.idxs.length){r.idxs=[];for(let t=0;t<e.idxs.length;++t)r.idxs[t]=e.idxs[t]}if(e.pts&&e.pts.length){r.pts=[];for(let t=0;t<e.pts.length;++t)r.pts[t]=i.json&&!isFinite(e.pts[t])?String(e.pts[t]):e.pts[t]}return null!=e.accessible&&e.hasOwnProperty("accessible")&&(r.accessible=e.accessible),r},T.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},T),N.NaviSegment=(A.prototype.segmentId=0,A.prototype.snode=0,A.prototype.enode=0,A.prototype.length=0,A.prototype.rank=0,A.prototype.name="",A.prototype.entry=0,A.prototype.desc="",A.prototype.geo="",A.prototype.through=0,A.prototype.idxs=Z.emptyArray,A.prototype.pts=Z.emptyArray,A.create=function(t){return new A(t)},A.encode=function(e,i){if(i=i||B.create(),null!=e.segmentId&&Object.hasOwnProperty.call(e,"segmentId")&&i.uint32(8).int32(e.segmentId),null!=e.snode&&Object.hasOwnProperty.call(e,"snode")&&i.uint32(16).int32(e.snode),null!=e.enode&&Object.hasOwnProperty.call(e,"enode")&&i.uint32(24).int32(e.enode),null!=e.length&&Object.hasOwnProperty.call(e,"length")&&i.uint32(33).double(e.length),null!=e.rank&&Object.hasOwnProperty.call(e,"rank")&&i.uint32(40).int32(e.rank),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&i.uint32(50).string(e.name),null!=e.entry&&Object.hasOwnProperty.call(e,"entry")&&i.uint32(56).int32(e.entry),null!=e.desc&&Object.hasOwnProperty.call(e,"desc")&&i.uint32(66).string(e.desc),null!=e.geo&&Object.hasOwnProperty.call(e,"geo")&&i.uint32(74).string(e.geo),null!=e.through&&Object.hasOwnProperty.call(e,"through")&&i.uint32(80).int32(e.through),null!=e.idxs&&e.idxs.length)for(let t=0;t<e.idxs.length;++t)i.uint32(88).int32(e.idxs[t]);if(null!=e.pts&&e.pts.length)for(let t=0;t<e.pts.length;++t)i.uint32(97).double(e.pts[t]);return i},A.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},A.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorNavi.NaviSegment;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.segmentId=t.int32();break;case 2:r.snode=t.int32();break;case 3:r.enode=t.int32();break;case 4:r.length=t.double();break;case 5:r.rank=t.int32();break;case 6:r.name=t.string();break;case 7:r.entry=t.int32();break;case 8:r.desc=t.string();break;case 9:r.geo=t.string();break;case 10:r.through=t.int32();break;case 11:if(r.idxs&&r.idxs.length||(r.idxs=[]),2==(7&n))for(var s=t.uint32()+t.pos;t.pos<s;)r.idxs.push(t.int32());else r.idxs.push(t.int32());break;case 12:if(r.pts&&r.pts.length||(r.pts=[]),2==(7&n))for(var l=t.uint32()+t.pos;t.pos<l;)r.pts.push(t.double());else r.pts.push(t.double());break;default:t.skipType(7&n)}}return r},A.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},A.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.segmentId&&e.hasOwnProperty("segmentId")&&!Z.isInteger(e.segmentId))return"segmentId: integer expected";if(null!=e.snode&&e.hasOwnProperty("snode")&&!Z.isInteger(e.snode))return"snode: integer expected";if(null!=e.enode&&e.hasOwnProperty("enode")&&!Z.isInteger(e.enode))return"enode: integer expected";if(null!=e.length&&e.hasOwnProperty("length")&&"number"!=typeof e.length)return"length: number expected";if(null!=e.rank&&e.hasOwnProperty("rank")&&!Z.isInteger(e.rank))return"rank: integer expected";if(null!=e.name&&e.hasOwnProperty("name")&&!Z.isString(e.name))return"name: string expected";if(null!=e.entry&&e.hasOwnProperty("entry")&&!Z.isInteger(e.entry))return"entry: integer expected";if(null!=e.desc&&e.hasOwnProperty("desc")&&!Z.isString(e.desc))return"desc: string expected";if(null!=e.geo&&e.hasOwnProperty("geo")&&!Z.isString(e.geo))return"geo: string expected";if(null!=e.through&&e.hasOwnProperty("through")&&!Z.isInteger(e.through))return"through: integer expected";if(null!=e.idxs&&e.hasOwnProperty("idxs")){if(!Array.isArray(e.idxs))return"idxs: array expected";for(let t=0;t<e.idxs.length;++t)if(!Z.isInteger(e.idxs[t]))return"idxs: integer[] expected"}if(null!=e.pts&&e.hasOwnProperty("pts")){if(!Array.isArray(e.pts))return"pts: array expected";for(let t=0;t<e.pts.length;++t)if("number"!=typeof e.pts[t])return"pts: number[] expected"}return null},A.fromObject=function(e){if(e instanceof C.protobuf.FloorNavi.NaviSegment)return e;var i=new C.protobuf.FloorNavi.NaviSegment;if(null!=e.segmentId&&(i.segmentId=0|e.segmentId),null!=e.snode&&(i.snode=0|e.snode),null!=e.enode&&(i.enode=0|e.enode),null!=e.length&&(i.length=Number(e.length)),null!=e.rank&&(i.rank=0|e.rank),null!=e.name&&(i.name=String(e.name)),null!=e.entry&&(i.entry=0|e.entry),null!=e.desc&&(i.desc=String(e.desc)),null!=e.geo&&(i.geo=String(e.geo)),null!=e.through&&(i.through=0|e.through),e.idxs){if(!Array.isArray(e.idxs))throw TypeError(".protobuf.FloorNavi.NaviSegment.idxs: array expected");i.idxs=[];for(let t=0;t<e.idxs.length;++t)i.idxs[t]=0|e.idxs[t]}if(e.pts){if(!Array.isArray(e.pts))throw TypeError(".protobuf.FloorNavi.NaviSegment.pts: array expected");i.pts=[];for(let t=0;t<e.pts.length;++t)i.pts[t]=Number(e.pts[t])}return i},A.toObject=function(e,i){var r={};if(((i=i||{}).arrays||i.defaults)&&(r.idxs=[],r.pts=[]),i.defaults&&(r.segmentId=0,r.snode=0,r.enode=0,r.length=0,r.rank=0,r.name="",r.entry=0,r.desc="",r.geo="",r.through=0),null!=e.segmentId&&e.hasOwnProperty("segmentId")&&(r.segmentId=e.segmentId),null!=e.snode&&e.hasOwnProperty("snode")&&(r.snode=e.snode),null!=e.enode&&e.hasOwnProperty("enode")&&(r.enode=e.enode),null!=e.length&&e.hasOwnProperty("length")&&(r.length=i.json&&!isFinite(e.length)?String(e.length):e.length),null!=e.rank&&e.hasOwnProperty("rank")&&(r.rank=e.rank),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.entry&&e.hasOwnProperty("entry")&&(r.entry=e.entry),null!=e.desc&&e.hasOwnProperty("desc")&&(r.desc=e.desc),null!=e.geo&&e.hasOwnProperty("geo")&&(r.geo=e.geo),null!=e.through&&e.hasOwnProperty("through")&&(r.through=e.through),e.idxs&&e.idxs.length){r.idxs=[];for(let t=0;t<e.idxs.length;++t)r.idxs[t]=e.idxs[t]}if(e.pts&&e.pts.length){r.pts=[];for(let t=0;t<e.pts.length;++t)r.pts[t]=i.json&&!isFinite(e.pts[t])?String(e.pts[t]):e.pts[t]}return r},A.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},A),N.NaviZone=(R.prototype.id=0,R.prototype.type=0,R.prototype.geo="",R.prototype.rejects=Z.emptyArray,R.prototype.idxs=Z.emptyArray,R.prototype.pts=Z.emptyArray,R.create=function(t){return new R(t)},R.encode=function(e,i){if((i=i||B.create()).uint32(8).int32(e.id),i.uint32(16).int32(e.type),null!=e.geo&&Object.hasOwnProperty.call(e,"geo")&&i.uint32(26).string(e.geo),null!=e.rejects&&e.rejects.length)for(let t=0;t<e.rejects.length;++t)i.uint32(34).string(e.rejects[t]);if(null!=e.idxs&&e.idxs.length)for(let t=0;t<e.idxs.length;++t)i.uint32(40).int32(e.idxs[t]);if(null!=e.pts&&e.pts.length)for(let t=0;t<e.pts.length;++t)i.uint32(49).double(e.pts[t]);return i},R.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},R.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorNavi.NaviZone;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.id=t.int32();break;case 2:r.type=t.int32();break;case 3:r.geo=t.string();break;case 4:r.rejects&&r.rejects.length||(r.rejects=[]),r.rejects.push(t.string());break;case 5:if(r.idxs&&r.idxs.length||(r.idxs=[]),2==(7&n))for(var s=t.uint32()+t.pos;t.pos<s;)r.idxs.push(t.int32());else r.idxs.push(t.int32());break;case 6:if(r.pts&&r.pts.length||(r.pts=[]),2==(7&n))for(var l=t.uint32()+t.pos;t.pos<l;)r.pts.push(t.double());else r.pts.push(t.double());break;default:t.skipType(7&n)}}if(!r.hasOwnProperty("id"))throw Z.ProtocolError("missing required 'id'",{instance:r});if(r.hasOwnProperty("type"))return r;throw Z.ProtocolError("missing required 'type'",{instance:r})},R.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},R.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!Z.isInteger(e.id))return"id: integer expected";if(!Z.isInteger(e.type))return"type: integer expected";if(null!=e.geo&&e.hasOwnProperty("geo")&&!Z.isString(e.geo))return"geo: string expected";if(null!=e.rejects&&e.hasOwnProperty("rejects")){if(!Array.isArray(e.rejects))return"rejects: array expected";for(let t=0;t<e.rejects.length;++t)if(!Z.isString(e.rejects[t]))return"rejects: string[] expected"}if(null!=e.idxs&&e.hasOwnProperty("idxs")){if(!Array.isArray(e.idxs))return"idxs: array expected";for(let t=0;t<e.idxs.length;++t)if(!Z.isInteger(e.idxs[t]))return"idxs: integer[] expected"}if(null!=e.pts&&e.hasOwnProperty("pts")){if(!Array.isArray(e.pts))return"pts: array expected";for(let t=0;t<e.pts.length;++t)if("number"!=typeof e.pts[t])return"pts: number[] expected"}return null},R.fromObject=function(e){if(e instanceof C.protobuf.FloorNavi.NaviZone)return e;var i=new C.protobuf.FloorNavi.NaviZone;if(null!=e.id&&(i.id=0|e.id),null!=e.type&&(i.type=0|e.type),null!=e.geo&&(i.geo=String(e.geo)),e.rejects){if(!Array.isArray(e.rejects))throw TypeError(".protobuf.FloorNavi.NaviZone.rejects: array expected");i.rejects=[];for(let t=0;t<e.rejects.length;++t)i.rejects[t]=String(e.rejects[t])}if(e.idxs){if(!Array.isArray(e.idxs))throw TypeError(".protobuf.FloorNavi.NaviZone.idxs: array expected");i.idxs=[];for(let t=0;t<e.idxs.length;++t)i.idxs[t]=0|e.idxs[t]}if(e.pts){if(!Array.isArray(e.pts))throw TypeError(".protobuf.FloorNavi.NaviZone.pts: array expected");i.pts=[];for(let t=0;t<e.pts.length;++t)i.pts[t]=Number(e.pts[t])}return i},R.toObject=function(e,i){var r={};if(((i=i||{}).arrays||i.defaults)&&(r.rejects=[],r.idxs=[],r.pts=[]),i.defaults&&(r.id=0,r.type=0,r.geo=""),null!=e.id&&e.hasOwnProperty("id")&&(r.id=e.id),null!=e.type&&e.hasOwnProperty("type")&&(r.type=e.type),null!=e.geo&&e.hasOwnProperty("geo")&&(r.geo=e.geo),e.rejects&&e.rejects.length){r.rejects=[];for(let t=0;t<e.rejects.length;++t)r.rejects[t]=e.rejects[t]}if(e.idxs&&e.idxs.length){r.idxs=[];for(let t=0;t<e.idxs.length;++t)r.idxs[t]=e.idxs[t]}if(e.pts&&e.pts.length){r.pts=[];for(let t=0;t<e.pts.length;++t)r.pts[t]=i.json&&!isFinite(e.pts[t])?String(e.pts[t]):e.pts[t]}return r},R.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},R),N.NaviModel=(I.prototype.modelid=0,I.prototype.doorids=Z.emptyArray,I.prototype.nodetypes=Z.emptyArray,I.prototype.entrytypes=Z.emptyArray,I.create=function(t){return new I(t)},I.encode=function(e,i){if((i=i||B.create()).uint32(8).int32(e.modelid),null!=e.doorids&&e.doorids.length)for(let t=0;t<e.doorids.length;++t)i.uint32(16).int32(e.doorids[t]);if(null!=e.nodetypes&&e.nodetypes.length)for(let t=0;t<e.nodetypes.length;++t)i.uint32(24).int32(e.nodetypes[t]);if(null!=e.entrytypes&&e.entrytypes.length)for(let t=0;t<e.entrytypes.length;++t)i.uint32(32).int32(e.entrytypes[t]);return i},I.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},I.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorNavi.NaviModel;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.modelid=t.int32();break;case 2:if(r.doorids&&r.doorids.length||(r.doorids=[]),2==(7&n))for(var s=t.uint32()+t.pos;t.pos<s;)r.doorids.push(t.int32());else r.doorids.push(t.int32());break;case 3:if(r.nodetypes&&r.nodetypes.length||(r.nodetypes=[]),2==(7&n))for(var l=t.uint32()+t.pos;t.pos<l;)r.nodetypes.push(t.int32());else r.nodetypes.push(t.int32());break;case 4:if(r.entrytypes&&r.entrytypes.length||(r.entrytypes=[]),2==(7&n))for(var o=t.uint32()+t.pos;t.pos<o;)r.entrytypes.push(t.int32());else r.entrytypes.push(t.int32());break;default:t.skipType(7&n)}}if(r.hasOwnProperty("modelid"))return r;throw Z.ProtocolError("missing required 'modelid'",{instance:r})},I.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},I.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!Z.isInteger(e.modelid))return"modelid: integer expected";if(null!=e.doorids&&e.hasOwnProperty("doorids")){if(!Array.isArray(e.doorids))return"doorids: array expected";for(let t=0;t<e.doorids.length;++t)if(!Z.isInteger(e.doorids[t]))return"doorids: integer[] expected"}if(null!=e.nodetypes&&e.hasOwnProperty("nodetypes")){if(!Array.isArray(e.nodetypes))return"nodetypes: array expected";for(let t=0;t<e.nodetypes.length;++t)if(!Z.isInteger(e.nodetypes[t]))return"nodetypes: integer[] expected"}if(null!=e.entrytypes&&e.hasOwnProperty("entrytypes")){if(!Array.isArray(e.entrytypes))return"entrytypes: array expected";for(let t=0;t<e.entrytypes.length;++t)if(!Z.isInteger(e.entrytypes[t]))return"entrytypes: integer[] expected"}return null},I.fromObject=function(e){if(e instanceof C.protobuf.FloorNavi.NaviModel)return e;var i=new C.protobuf.FloorNavi.NaviModel;if(null!=e.modelid&&(i.modelid=0|e.modelid),e.doorids){if(!Array.isArray(e.doorids))throw TypeError(".protobuf.FloorNavi.NaviModel.doorids: array expected");i.doorids=[];for(let t=0;t<e.doorids.length;++t)i.doorids[t]=0|e.doorids[t]}if(e.nodetypes){if(!Array.isArray(e.nodetypes))throw TypeError(".protobuf.FloorNavi.NaviModel.nodetypes: array expected");i.nodetypes=[];for(let t=0;t<e.nodetypes.length;++t)i.nodetypes[t]=0|e.nodetypes[t]}if(e.entrytypes){if(!Array.isArray(e.entrytypes))throw TypeError(".protobuf.FloorNavi.NaviModel.entrytypes: array expected");i.entrytypes=[];for(let t=0;t<e.entrytypes.length;++t)i.entrytypes[t]=0|e.entrytypes[t]}return i},I.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.doorids=[],i.nodetypes=[],i.entrytypes=[]),t.defaults&&(i.modelid=0),null!=e.modelid&&e.hasOwnProperty("modelid")&&(i.modelid=e.modelid),e.doorids&&e.doorids.length){i.doorids=[];for(let t=0;t<e.doorids.length;++t)i.doorids[t]=e.doorids[t]}if(e.nodetypes&&e.nodetypes.length){i.nodetypes=[];for(let t=0;t<e.nodetypes.length;++t)i.nodetypes[t]=e.nodetypes[t]}if(e.entrytypes&&e.entrytypes.length){i.entrytypes=[];for(let t=0;t<e.entrytypes.length;++t)i.entrytypes[t]=e.entrytypes[t]}return i},I.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},I),N.NaviExtent=(L.prototype.id=0,L.prototype.pts=Z.emptyArray,L.prototype.idxs=Z.emptyArray,L.create=function(t){return new L(t)},L.encode=function(e,i){if((i=i||B.create()).uint32(8).int32(e.id),null!=e.pts&&e.pts.length)for(let t=0;t<e.pts.length;++t)i.uint32(17).double(e.pts[t]);if(null!=e.idxs&&e.idxs.length)for(let t=0;t<e.idxs.length;++t)C.protobuf.FloorNavi.NaviExtent.IndexInfo.encode(e.idxs[t],i.uint32(26).fork()).ldelim();return i},L.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},L.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorNavi.NaviExtent;t.pos<i;){var n=t.uint32();switch(n>>>3){case 1:r.id=t.int32();break;case 2:if(r.pts&&r.pts.length||(r.pts=[]),2==(7&n))for(var s=t.uint32()+t.pos;t.pos<s;)r.pts.push(t.double());else r.pts.push(t.double());break;case 3:r.idxs&&r.idxs.length||(r.idxs=[]),r.idxs.push(C.protobuf.FloorNavi.NaviExtent.IndexInfo.decode(t,t.uint32()));break;default:t.skipType(7&n)}}if(r.hasOwnProperty("id"))return r;throw Z.ProtocolError("missing required 'id'",{instance:r})},L.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},L.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!Z.isInteger(e.id))return"id: integer expected";if(null!=e.pts&&e.hasOwnProperty("pts")){if(!Array.isArray(e.pts))return"pts: array expected";for(let t=0;t<e.pts.length;++t)if("number"!=typeof e.pts[t])return"pts: number[] expected"}if(null!=e.idxs&&e.hasOwnProperty("idxs")){if(!Array.isArray(e.idxs))return"idxs: array expected";for(let t=0;t<e.idxs.length;++t){var i=C.protobuf.FloorNavi.NaviExtent.IndexInfo.verify(e.idxs[t]);if(i)return"idxs."+i}}return null},L.fromObject=function(e){if(e instanceof C.protobuf.FloorNavi.NaviExtent)return e;var i=new C.protobuf.FloorNavi.NaviExtent;if(null!=e.id&&(i.id=0|e.id),e.pts){if(!Array.isArray(e.pts))throw TypeError(".protobuf.FloorNavi.NaviExtent.pts: array expected");i.pts=[];for(let t=0;t<e.pts.length;++t)i.pts[t]=Number(e.pts[t])}if(e.idxs){if(!Array.isArray(e.idxs))throw TypeError(".protobuf.FloorNavi.NaviExtent.idxs: array expected");i.idxs=[];for(let t=0;t<e.idxs.length;++t){if("object"!=typeof e.idxs[t])throw TypeError(".protobuf.FloorNavi.NaviExtent.idxs: object expected");i.idxs[t]=C.protobuf.FloorNavi.NaviExtent.IndexInfo.fromObject(e.idxs[t])}}return i},L.toObject=function(e,i){var r={};if(((i=i||{}).arrays||i.defaults)&&(r.pts=[],r.idxs=[]),i.defaults&&(r.id=0),null!=e.id&&e.hasOwnProperty("id")&&(r.id=e.id),e.pts&&e.pts.length){r.pts=[];for(let t=0;t<e.pts.length;++t)r.pts[t]=i.json&&!isFinite(e.pts[t])?String(e.pts[t]):e.pts[t]}if(e.idxs&&e.idxs.length){r.idxs=[];for(let t=0;t<e.idxs.length;++t)r.idxs[t]=C.protobuf.FloorNavi.NaviExtent.IndexInfo.toObject(e.idxs[t],i)}return r},L.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},L.IndexInfo=(S.prototype.idxs=Z.emptyArray,S.create=function(t){return new S(t)},S.encode=function(e,i){if(i=i||B.create(),null!=e.idxs&&e.idxs.length)for(let t=0;t<e.idxs.length;++t)i.uint32(8).int32(e.idxs[t]);return i},S.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},S.decode=function(t,e){t instanceof P||(t=P.create(t));for(var i=void 0===e?t.len:t.pos+e,r=new C.protobuf.FloorNavi.NaviExtent.IndexInfo;t.pos<i;){var n=t.uint32();if(n>>>3==1)if(r.idxs&&r.idxs.length||(r.idxs=[]),2==(7&n))for(var s=t.uint32()+t.pos;t.pos<s;)r.idxs.push(t.int32());else r.idxs.push(t.int32());else t.skipType(7&n)}return r},S.decodeDelimited=function(t){return t instanceof P||(t=new P(t)),this.decode(t,t.uint32())},S.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.idxs&&e.hasOwnProperty("idxs")){if(!Array.isArray(e.idxs))return"idxs: array expected";for(let t=0;t<e.idxs.length;++t)if(!Z.isInteger(e.idxs[t]))return"idxs: integer[] expected"}return null},S.fromObject=function(e){if(e instanceof C.protobuf.FloorNavi.NaviExtent.IndexInfo)return e;var i=new C.protobuf.FloorNavi.NaviExtent.IndexInfo;if(e.idxs){if(!Array.isArray(e.idxs))throw TypeError(".protobuf.FloorNavi.NaviExtent.IndexInfo.idxs: array expected");i.idxs=[];for(let t=0;t<e.idxs.length;++t)i.idxs[t]=0|e.idxs[t]}return i},S.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.idxs=[]),e.idxs&&e.idxs.length){i.idxs=[];for(let t=0;t<e.idxs.length;++t)i.idxs[t]=e.idxs[t]}return i},S.prototype.toJSON=function(){return this.constructor.toObject(this,F.util.toJSONOptions)},S),L),N),i})();class Cs{constructor(){this.Ae=null}}Object.assign(Cs.prototype,{Re(){this.Ae||(this.Ae=C.protobuf)},Ie(t){return this.Re(),this.Ae.Map.decode(t)},Le(e){for(let t=0;t<e.buffers.length;t++){var i=e.buffers[t];if(1==i.btype)return this.Se(i.data)}return null},Fe(e){for(let t=0;t<e.buffers.length;t++){var i=e.buffers[t];if(7==i.btype)return this.Pe(i.data)}return null},Ge(e,i){for(let t=0;t<e.buffers.length;t++){var r=e.buffers[t];if(2==r.btype&&r.gid==i)return this.De(r.data)}return null},Ve(e,i){for(let t=0;t<e.buffers.length;t++){var r=e.buffers[t];if(3==r.btype&&r.gid==i)return this.Be(r.data)}return null},Ze(e,i){for(let t=0;t<e.buffers.length;t++){var r=e.buffers[t];if(4==r.btype&&r.gid==i)return this.Ce(r.data)}return null},We(e,i){for(let t=0;t<e.buffers.length;t++){var r=e.buffers[t];if(5===r.btype&&r.gid===i)return this.Ce(r.data)}return null},Ue(e,i){for(let t=0;t<e.buffers.length;t++){var r=e.buffers[t];if(6===r.btype&&r.gid===i)return this.Ce(r.data)}return null},Se(t){this.Re();let e=this.Ae.Scene.decode(t);return e.levels=[],e.layerGroups.forEach(t=>{e.levels.push(t.gid)}),e},Pe(t){return this.Re(),this.Ae.Gate.decode(t)},De(t){return this.Re(),this.Ae.FloorGeo.decode(t)},Be(t){return this.Re(),this.Ae.FloorBiz.decode(t)},Ce(t){return this.Re(),this.Ae.FloorNavi.decode(t)}});let Ws=new WeakMap;class Us{constructor(t){this.identifier=t.identifier,this.force=void 0===t.force?1:t.force,this.pageX=t.pageX||t.x,this.pageY=t.pageY||t.y,this.clientX=t.clientX||t.x,this.clientY=t.clientY||t.y,this.screenX=this.pageX,this.screenY=this.pageY}}class qs{constructor(){Ws.set(this,{})}addEventListener(t,e,i={}){let r=Ws.get(this);r||(r={},Ws.set(this,r)),r[t]||(r[t]=[]),r[t].push(e),i.capture}removeEventListener(t,e){var i=Ws.get(this);if(i){var r=i[t];if(r&&0<r.length)for(let t=r.length;t--;t)if(r[t]===e){r.splice(t,1);break}}}dispatchEvent(e={}){"function"!=typeof e.preventDefault&&(e.preventDefault=()=>{}),"function"!=typeof e.stopPropagation&&(e.stopPropagation=()=>{});var i=Ws.get(this)[e.type];if(i)for(let t=0;t<i.length;t++)i[t](e)}dispatchTouchEvent(t={}){var e={...this},e={changedTouches:t.changedTouches.map(t=>new Us(t)),touches:t.touches.map(t=>new Us(t)),targetTouches:Array.prototype.slice.call(t.touches.map(t=>new Us(t))),timeStamp:t.timeStamp,target:e,currentTarget:e,type:t.type,cancelBubble:!1,cancelable:!1};this.dispatchEvent(e)}}let Ys=new WeakMap,Xs=new WeakMap;function zs(t,e={}){e.target=e.target||this,"function"==typeof this["on"+t]&&this["on"+t].call(this,e)}function Hs(t,e={}){this.readyState=t,e.readyState=t,zs.call(this,"readystatechange",e)}function Qs(t){return!/^(http|https|ftp|wxfile):\/\/.*/i.test(t)}class O extends qs{constructor(){super(),this.onabort=null,this.onerror=null,this.onload=null,this.onloadstart=null,this.onprogress=null,this.ontimeout=null,this.onloadend=null,this.onreadystatechange=null,this.readyState=0,this.response=null,this.responseText=null,this.responseType="text",this.dataType="string",this.responseXML=null,this.status=0,this.statusText="",this.upload={},this.withCredentials=!1,Ys.set(this,{"content-type":"application/x-www-form-urlencoded"}),Xs.set(this,{})}abort(){this.isAbort=!0,this.request?.abort()}getAllResponseHeaders(){let e=Xs.get(this);return Object.keys(e).map(t=>t+": "+e[t]).join("\n")}getResponseHeader(t){return Xs.get(this)[t]}open(t,e){this.Oc=t,this.jc=e,Hs.call(this,O.OPENED)}overrideMimeType(){}send(r=""){if(this.readyState!==O.OPENED)throw new Error("Failed to execute 'send' on 'XMLHttpRequest': The object's state must be OPENED.");{var n=this.jc,s=Ys.get(this);let t=this.responseType.toLocaleLowerCase();"arraybuffer"!==t&&(t="text");var l=this.dataType;let e=Qs(n),i;"arraybuffer"!==t&&(i="utf8"),delete this.response,this.response=null;var o,h,a=({data:e,statusCode:t,header:i})=>{if(!0!==this.isAbort){if(this.status=t=void 0===t?200:t,i&&Xs.set(this,i),zs.call(this,"loadstart"),Hs.call(this,O.HEADERS_RECEIVED),Hs.call(this,O.LOADING),"json"==this.responseType)try{this.response=JSON.parse(e)}catch(t){this.response=e}else this.response=e;Hs.call(this,O.DONE),zs.call(this,"load"),zs.call(this,"loadend")}},u=({errMsg:t})=>{!0!==this.isAbort&&(-1!==t.indexOf("abort")?zs.call(this,"abort"):zs.call(this,"error",{message:t}),zs.call(this,"loadend"),e)&&console.warn(t)};e?(o=wx.getFileSystemManager(),h={filePath:n,success:a,fail:u},i&&(h.encoding=i),o.readFile(h)):this.request=wx.request({data:r,url:n,method:this.Oc,header:s,dataType:l,responseType:t,success:a,fail:u})}}setRequestHeader(t,e){var i=Ys.get(this);i[t]=e,Ys.set(this,i)}addEventListener(t,e){"function"==typeof e&&(this["on"+t]=(t={})=>{t.target=t.target||this,e.call(this,t)})}removeEventListener(t,e){this["on"+t]===e&&(this["on"+t]=null)}}O.UNSEND=0,O.OPENED=1,O.HEADERS_RECEIVED=2,O.LOADING=3,O.DONE=4,u.XMLHttpRequest=O,u.environment=Ht.WX,u.window=Xn,u.ProtoReaderStatic=Cs,u.WX_USER_DATA_PATH=/^(wxfile:)?\/\//i;let Ks={VERSION:N.VERSION,BUILD:N.BUILD,XMLHttpRequest:O,FMType:t,FMNaviMode:f,FMNaviPriority:v,FMRouteResult:G,FMLanguageType:n,FMNaviTransfer:T,FMRoadNetworkResult:A,FMSearchRequest:zt,FMSearchAnalyser:an,FMNaviAnalyser:Nn,FMNaviObstruction:Tn,FMNaviDriveAnalyser:An,FMNaviWalkAnalyser:Rn},Js=Kt.global(),$s=void 0!==Js?Js.fengmap:{};for(Zs in void 0===$s&&($s={}),Ks)$s[Zs]=Ks[Zs];void 0!==Js&&(Js.fengmap=$s);var tl=$s;let el=N.VERSION,il=N.BUILD,rl=O;exports.BUILD=il,exports.FMLanguageType=n,exports.FMNaviAnalyser=Nn,exports.FMNaviDriveAnalyser=An,exports.FMNaviMode=f,exports.FMNaviObstruction=Tn,exports.FMNaviPriority=v,exports.FMNaviTransfer=T,exports.FMNaviWalkAnalyser=Rn,exports.FMRoadNetworkResult=A,exports.FMRouteResult=G,exports.FMSearchAnalyser=an,exports.FMSearchRequest=zt,exports.FMType=t,exports.VERSION=el,exports.XMLHttpRequest=rl,exports.default=tl;
